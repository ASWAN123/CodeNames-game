/*! For license information please see main.4e438b9a.js.LICENSE.txt */
!function(){var e={334:function(e,t,n){var r=n(699),i=["ability","able","aboard","about","above","accept","accident","according","account","accurate","acres","across","act","action","active","activity","actual","actually","add","addition","additional","adjective","adult","adventure","advice","affect","afraid","after","afternoon","again","against","age","ago","agree","ahead","aid","air","airplane","alike","alive","all","allow","almost","alone","along","aloud","alphabet","already","also","although","am","among","amount","ancient","angle","angry","animal","announced","another","answer","ants","any","anybody","anyone","anything","anyway","anywhere","apart","apartment","appearance","apple","applied","appropriate","are","area","arm","army","around","arrange","arrangement","arrive","arrow","art","article","as","aside","ask","asleep","at","ate","atmosphere","atom","atomic","attached","attack","attempt","attention","audience","author","automobile","available","average","avoid","aware","away","baby","back","bad","badly","bag","balance","ball","balloon","band","bank","bar","bare","bark","barn","base","baseball","basic","basis","basket","bat","battle","be","bean","bear","beat","beautiful","beauty","became","because","become","becoming","bee","been","before","began","beginning","begun","behavior","behind","being","believed","bell","belong","below","belt","bend","beneath","bent","beside","best","bet","better","between","beyond","bicycle","bigger","biggest","bill","birds","birth","birthday","bit","bite","black","blank","blanket","blew","blind","block","blood","blow","blue","board","boat","body","bone","book","border","born","both","bottle","bottom","bound","bow","bowl","box","boy","brain","branch","brass","brave","bread","break","breakfast","breath","breathe","breathing","breeze","brick","bridge","brief","bright","bring","broad","broke","broken","brother","brought","brown","brush","buffalo","build","building","built","buried","burn","burst","bus","bush","business","busy","but","butter","buy","by","cabin","cage","cake","call","calm","came","camera","camp","can","canal","cannot","cap","capital","captain","captured","car","carbon","card","care","careful","carefully","carried","carry","case","cast","castle","cat","catch","cattle","caught","cause","cave","cell","cent","center","central","century","certain","certainly","chain","chair","chamber","chance","change","changing","chapter","character","characteristic","charge","chart","check","cheese","chemical","chest","chicken","chief","child","children","choice","choose","chose","chosen","church","circle","circus","citizen","city","class","classroom","claws","clay","clean","clear","clearly","climate","climb","clock","close","closely","closer","cloth","clothes","clothing","cloud","club","coach","coal","coast","coat","coffee","cold","collect","college","colony","color","column","combination","combine","come","comfortable","coming","command","common","community","company","compare","compass","complete","completely","complex","composed","composition","compound","concerned","condition","congress","connected","consider","consist","consonant","constantly","construction","contain","continent","continued","contrast","control","conversation","cook","cookies","cool","copper","copy","corn","corner","correct","correctly","cost","cotton","could","count","country","couple","courage","course","court","cover","cow","cowboy","crack","cream","create","creature","crew","crop","cross","crowd","cry","cup","curious","current","curve","customs","cut","cutting","daily","damage","dance","danger","dangerous","dark","darkness","date","daughter","dawn","day","dead","deal","dear","death","decide","declared","deep","deeply","deer","definition","degree","depend","depth","describe","desert","design","desk","detail","determine","develop","development","diagram","diameter","did","die","differ","difference","different","difficult","difficulty","dig","dinner","direct","direction","directly","dirt","dirty","disappear","discover","discovery","discuss","discussion","disease","dish","distance","distant","divide","division","do","doctor","does","dog","doing","doll","dollar","done","donkey","door","dot","double","doubt","down","dozen","draw","drawn","dream","dress","drew","dried","drink","drive","driven","driver","driving","drop","dropped","drove","dry","duck","due","dug","dull","during","dust","duty","each","eager","ear","earlier","early","earn","earth","easier","easily","east","easy","eat","eaten","edge","education","effect","effort","egg","eight","either","electric","electricity","element","elephant","eleven","else","empty","end","enemy","energy","engine","engineer","enjoy","enough","enter","entire","entirely","environment","equal","equally","equator","equipment","escape","especially","essential","establish","even","evening","event","eventually","ever","every","everybody","everyone","everything","everywhere","evidence","exact","exactly","examine","example","excellent","except","exchange","excited","excitement","exciting","exclaimed","exercise","exist","expect","experience","experiment","explain","explanation","explore","express","expression","extra","eye","face","facing","fact","factor","factory","failed","fair","fairly","fall","fallen","familiar","family","famous","far","farm","farmer","farther","fast","fastened","faster","fat","father","favorite","fear","feathers","feature","fed","feed","feel","feet","fell","fellow","felt","fence","few","fewer","field","fierce","fifteen","fifth","fifty","fight","fighting","figure","fill","film","final","finally","find","fine","finest","finger","finish","fire","fireplace","firm","first","fish","five","fix","flag","flame","flat","flew","flies","flight","floating","floor","flow","flower","fly","fog","folks","follow","food","foot","football","for","force","foreign","forest","forget","forgot","forgotten","form","former","fort","forth","forty","forward","fought","found","four","fourth","fox","frame","free","freedom","frequently","fresh","friend","friendly","frighten","frog","from","front","frozen","fruit","fuel","full","fully","fun","function","funny","fur","furniture","further","future","gain","game","garage","garden","gas","gasoline","gate","gather","gave","general","generally","gentle","gently","get","getting","giant","gift","girl","give","given","giving","glad","glass","globe","go","goes","gold","golden","gone","good","goose","got","government","grabbed","grade","gradually","grain","grandfather","grandmother","graph","grass","gravity","gray","great","greater","greatest","greatly","green","grew","ground","group","grow","grown","growth","guard","guess","guide","gulf","gun","habit","had","hair","half","halfway","hall","hand","handle","handsome","hang","happen","happened","happily","happy","harbor","hard","harder","hardly","has","hat","have","having","hay","he","headed","heading","health","heard","hearing","heart","heat","heavy","height","held","hello","help","helpful","her","herd","here","herself","hidden","hide","high","higher","highest","highway","hill","him","himself","his","history","hit","hold","hole","hollow","home","honor","hope","horn","horse","hospital","hot","hour","house","how","however","huge","human","hundred","hung","hungry","hunt","hunter","hurried","hurry","hurt","husband","ice","idea","identity","if","ill","image","imagine","immediately","importance","important","impossible","improve","in","inch","include","including","income","increase","indeed","independent","indicate","individual","industrial","industry","influence","information","inside","instance","instant","instead","instrument","interest","interior","into","introduced","invented","involved","iron","is","island","it","its","itself","jack","jar","jet","job","join","joined","journey","joy","judge","jump","jungle","just","keep","kept","key","kids","kill","kind","kitchen","knew","knife","know","knowledge","known","label","labor","lack","lady","laid","lake","lamp","land","language","large","larger","largest","last","late","later","laugh","law","lay","layers","lead","leader","leaf","learn","least","leather","leave","leaving","led","left","leg","length","lesson","let","letter","level","library","lie","life","lift","light","like","likely","limited","line","lion","lips","liquid","list","listen","little","live","living","load","local","locate","location","log","lonely","long","longer","look","loose","lose","loss","lost","lot","loud","love","lovely","low","lower","luck","lucky","lunch","lungs","lying","machine","machinery","mad","made","magic","magnet","mail","main","mainly","major","make","making","man","managed","manner","manufacturing","many","map","mark","market","married","mass","massage","master","material","mathematics","matter","may","maybe","me","meal","mean","means","meant","measure","meat","medicine","meet","melted","member","memory","men","mental","merely","met","metal","method","mice","middle","might","mighty","mile","military","milk","mill","mind","mine","minerals","minute","mirror","missing","mission","mistake","mix","mixture","model","modern","molecular","moment","money","monkey","month","mood","moon","more","morning","most","mostly","mother","motion","motor","mountain","mouse","mouth","move","movement","movie","moving","mud","muscle","music","musical","must","my","myself","mysterious","nails","name","nation","national","native","natural","naturally","nature","near","nearby","nearer","nearest","nearly","necessary","neck","needed","needle","needs","negative","neighbor","neighborhood","nervous","nest","never","new","news","newspaper","next","nice","night","nine","no","nobody","nodded","noise","none","noon","nor","north","nose","not","note","noted","nothing","notice","noun","now","number","numeral","nuts","object","observe","obtain","occasionally","occur","ocean","of","off","offer","office","officer","official","oil","old","older","oldest","on","once","one","only","onto","open","operation","opinion","opportunity","opposite","or","orange","orbit","order","ordinary","organization","organized","origin","original","other","ought","our","ourselves","out","outer","outline","outside","over","own","owner","oxygen","pack","package","page","paid","pain","paint","pair","palace","pale","pan","paper","paragraph","parallel","parent","park","part","particles","particular","particularly","partly","parts","party","pass","passage","past","path","pattern","pay","peace","pen","pencil","people","per","percent","perfect","perfectly","perhaps","period","person","personal","pet","phrase","physical","piano","pick","picture","pictured","pie","piece","pig","pile","pilot","pine","pink","pipe","pitch","place","plain","plan","plane","planet","planned","planning","plant","plastic","plate","plates","play","pleasant","please","pleasure","plenty","plural","plus","pocket","poem","poet","poetry","point","pole","police","policeman","political","pond","pony","pool","poor","popular","population","porch","port","position","positive","possible","possibly","post","pot","potatoes","pound","pour","powder","power","powerful","practical","practice","prepare","present","president","press","pressure","pretty","prevent","previous","price","pride","primitive","principal","principle","printed","private","prize","probably","problem","process","produce","product","production","program","progress","promised","proper","properly","property","protection","proud","prove","provide","public","pull","pupil","pure","purple","purpose","push","put","putting","quarter","queen","question","quick","quickly","quiet","quietly","quite","rabbit","race","radio","railroad","rain","raise","ran","ranch","range","rapidly","rate","rather","raw","rays","reach","read","reader","ready","real","realize","rear","reason","recall","receive","recent","recently","recognize","record","red","refer","refused","region","regular","related","relationship","religious","remain","remarkable","remember","remove","repeat","replace","replied","report","represent","require","research","respect","rest","result","return","review","rhyme","rhythm","rice","rich","ride","riding","right","ring","rise","rising","river","road","roar","rock","rocket","rocky","rod","roll","roof","room","root","rope","rose","rough","round","route","row","rubbed","rubber","rule","ruler","run","running","rush","sad","saddle","safe","safety","said","sail","sale","salmon","salt","same","sand","sang","sat","satellites","satisfied","save","saved","saw","say","scale","scared","scene","school","science","scientific","scientist","score","screen","sea","search","season","seat","second","secret","section","see","seed","seeing","seems","seen","seldom","select","selection","sell","send","sense","sent","sentence","separate","series","serious","serve","service","sets","setting","settle","settlers","seven","several","shade","shadow","shake","shaking","shall","shallow","shape","share","sharp","she","sheep","sheet","shelf","shells","shelter","shine","shinning","ship","shirt","shoe","shoot","shop","shore","short","shorter","shot","should","shoulder","shout","show","shown","shut","sick","sides","sight","sign","signal","silence","silent","silk","silly","silver","similar","simple","simplest","simply","since","sing","single","sink","sister","sit","sitting","situation","six","size","skill","skin","sky","slabs","slave","sleep","slept","slide","slight","slightly","slip","slipped","slope","slow","slowly","small","smaller","smallest","smell","smile","smoke","smooth","snake","snow","so","soap","social","society","soft","softly","soil","solar","sold","soldier","solid","solution","solve","some","somebody","somehow","someone","something","sometime","somewhere","son","song","soon","sort","sound","source","south","southern","space","speak","special","species","specific","speech","speed","spell","spend","spent","spider","spin","spirit","spite","split","spoken","sport","spread","spring","square","stage","stairs","stand","standard","star","stared","start","state","statement","station","stay","steady","steam","steel","steep","stems","step","stepped","stick","stiff","still","stock","stomach","stone","stood","stop","stopped","store","storm","story","stove","straight","strange","stranger","straw","stream","street","strength","stretch","strike","string","strip","strong","stronger","struck","structure","struggle","stuck","student","studied","studying","subject","substance","success","successful","such","sudden","suddenly","sugar","suggest","suit","sum","summer","sun","sunlight","supper","supply","support","suppose","sure","surface","surprise","surrounded","swam","sweet","swept","swim","swimming","swing","swung","syllable","symbol","system","table","tail","take","taken","tales","talk","tall","tank","tape","task","taste","taught","tax","tea","teach","teacher","team","tears","teeth","telephone","television","tell","temperature","ten","tent","term","terrible","test","than","thank","that","thee","them","themselves","then","theory","there","therefore","these","they","thick","thin","thing","think","third","thirty","this","those","thou","though","thought","thousand","thread","three","threw","throat","through","throughout","throw","thrown","thumb","thus","thy","tide","tie","tight","tightly","till","time","tin","tiny","tip","tired","title","to","tobacco","today","together","told","tomorrow","tone","tongue","tonight","too","took","tool","top","topic","torn","total","touch","toward","tower","town","toy","trace","track","trade","traffic","trail","train","transportation","trap","travel","treated","tree","triangle","tribe","trick","tried","trip","troops","tropical","trouble","truck","trunk","truth","try","tube","tune","turn","twelve","twenty","twice","two","type","typical","uncle","under","underline","understanding","unhappy","union","unit","universe","unknown","unless","until","unusual","up","upon","upper","upward","us","use","useful","using","usual","usually","valley","valuable","value","vapor","variety","various","vast","vegetable","verb","vertical","very","vessels","victory","view","village","visit","visitor","voice","volume","vote","vowel","voyage","wagon","wait","walk","wall","want","war","warm","warn","was","wash","waste","watch","water","wave","way","we","weak","wealth","wear","weather","week","weigh","weight","welcome","well","went","were","west","western","wet","whale","what","whatever","wheat","wheel","when","whenever","where","wherever","whether","which","while","whispered","whistle","white","who","whole","whom","whose","why","wide","widely","wife","wild","will","willing","win","wind","window","wing","winter","wire","wise","wish","with","within","without","wolf","women","won","wonder","wonderful","wood","wooden","wool","word","wore","work","worker","world","worried","worry","worse","worth","would","wrapped","write","writer","writing","written","wrong","wrote","yard","year","yellow","yes","yesterday","yet","you","young","younger","your","yourself","youth","zero","zebra","zipper","zoo","zulu"];function a(e){var t,n=null!==(t=e)&&void 0!==t&&t.seed?new r(e.seed):null;function a(){return e&&e.maxLength>1?function(){var t,n=!1;for(;!n;)(t=o()).length<=e.maxLength&&(n=!0);return t}():o()}function o(){return i[u(i.length)]}function u(e){var t=n?n():Math.random();return Math.floor(t*e)}if("undefined"===typeof e)return a();"number"===typeof e&&(e={exactly:e}),e.exactly&&(e.min=e.exactly,e.max=e.exactly),"number"!==typeof e.wordsPerString&&(e.wordsPerString=1),"function"!==typeof e.formatter&&(e.formatter=function(e){return e}),"string"!==typeof e.separator&&(e.separator=" ");for(var s=e.min+u(e.max+1-e.min),c=[],l="",f=0,h=0;h<s*e.wordsPerString;h++)f===e.wordsPerString-1?l+=e.formatter(a(),f):l+=e.formatter(a(),f)+e.separator,f++,(h+1)%e.wordsPerString===0&&(c.push(l),l="",f=0);return"string"===typeof e.join&&(c=c.join(e.join)),c}e.exports=a,a.wordList=i},981:function(e,t,n){"use strict";var r=n(791),i=n(164);function a(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function o(e){if(a(e)!==e)throw Error("Unable to find node on an unmounted component.")}var u=Object.assign;function s(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function c(){return!0}function l(){return!1}function f(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?c:l,this.isPropagationStopped=l,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=c)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=c)},persist:function(){},isPersistent:c}),t}var h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d=f(h),p=u({},h,{view:0,detail:0});f(p);var v,m,y,g=u({},p,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==y&&(y&&"mousemove"===e.type?(v=e.screenX-y.screenX,m=e.screenY-y.screenY):m=v=0,y=e),v)},movementY:function(e){return"movementY"in e?e.movementY:m}});f(g),f(u({},g,{dataTransfer:0})),f(u({},p,{relatedTarget:0})),f(u({},h,{animationName:0,elapsedTime:0,pseudoElement:0})),f(u({},h,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),f(u({},h,{data:0}));var b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=w[e])&&!!t[e]}function S(){return x}function E(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}f(u({},p,{key:function(e){if(e.key){var t=b[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=s(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?k[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),f(u({},g,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),f(u({},p,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S})),f(u({},h,{propertyName:0,elapsedTime:0,pseudoElement:0})),f(u({},g,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}));var _=!1,I=null,T=!1,C=null,N={onError:function(e){_=!0,I=e}};function D(e,t,n,r,i,a,o,u,s){_=!1,I=null,E.apply(N,arguments)}var A=Array.isArray,P=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Events,O=P[0],R=P[1],L=P[2],M=P[3],F=P[4],j=r.unstable_act;function V(){}function z(e,t){if(!e)return[];if(e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error("Unable to find node on an unmounted component.");return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var u=i.alternate;if(null===u){if(null!==(r=i.return)){n=r;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===n)return o(i),e;if(u===r)return o(i),t;u=u.sibling}throw Error("Unable to find node on an unmounted component.")}if(n.return!==r.return)n=i,r=u;else{for(var s=!1,c=i.child;c;){if(c===n){s=!0,n=i,r=u;break}if(c===r){s=!0,r=i,n=u;break}c=c.sibling}if(!s){for(c=u.child;c;){if(c===n){s=!0,n=u,r=i;break}if(c===r){s=!0,r=u,n=i;break}c=c.sibling}if(!s)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(n.alternate!==r)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==n.tag)throw Error("Unable to find node on an unmounted component.");return n.stateNode.current===n?e:t}(e),!e)return[];for(var n=e,r=[];;){if(5===n.tag||6===n.tag||1===n.tag||0===n.tag){var i=n.stateNode;t(i)&&r.push(i)}if(n.child)n.child.return=n,n=n.child;else{if(n===e)return r;for(;!n.sibling;){if(!n.return||n.return===e)return r;n=n.return}n.sibling.return=n.return,n=n.sibling}}}function U(e,t){if(e&&!e._reactInternals){var n=String(e);throw e=A(e)?"an array":e&&1===e.nodeType&&e.tagName?"a DOM node":"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,Error(t+"(...): the first argument must be a React class instance. Instead received: "+e+".")}}function B(e){return!(!e||1!==e.nodeType||!e.tagName)}function q(e){return!B(e)&&(null!=e&&"function"===typeof e.render&&"function"===typeof e.setState)}function K(e,t){return!!q(e)&&e._reactInternals.type===t}function G(e,t){return U(e,"findAllInRenderedTree"),e?z(e._reactInternals,t):[]}function Q(e,t){return U(e,"scryRenderedDOMComponentsWithClass"),G(e,(function(e){if(B(e)){var n=e.className;"string"!==typeof n&&(n=e.getAttribute("class")||"");var r=n.split(/\s+/);if(!A(t)){if(void 0===t)throw Error("TestUtils.scryRenderedDOMComponentsWithClass expects a className as a second argument.");t=t.split(/\s+/)}return t.every((function(e){return-1!==r.indexOf(e)}))}return!1}))}function W(e,t){return U(e,"scryRenderedDOMComponentsWithTag"),G(e,(function(e){return B(e)&&e.tagName.toUpperCase()===t.toUpperCase()}))}function H(e,t){return U(e,"scryRenderedComponentsWithType"),G(e,(function(e){return K(e,t)}))}function X(e,t,n){var r=e.type||"unknown-event";e.currentTarget=R(n),function(e,t,n,r,i,a,o,u,s){if(D.apply(this,arguments),_){if(!_)throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.");var c=I;_=!1,I=null,T||(T=!0,C=c)}}(r,t,void 0,e),e.currentTarget=null}function $(e,t,n){for(var r=[];e;){r.push(e);do{e=e.return}while(e&&5!==e.tag);e=e||null}for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function Y(e,t){var n=e.stateNode;if(!n)return null;var r=L(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof n+"` type.");return n}function J(e,t,n){var r=n._reactName;"captured"===t&&(r+="Capture"),(t=Y(e,r))&&(null==n._dispatchListeners&&(n._dispatchListeners=[]),null==n._dispatchInstances&&(n._dispatchInstances=[]),n._dispatchListeners.push(t),n._dispatchInstances.push(e))}var Z={},ee=new Set(["mouseEnter","mouseLeave","pointerEnter","pointerLeave"]);function te(e){return function(t,n){if(r.isValidElement(t))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a React element. Pass the DOM node you wish to simulate the event on instead. Note that TestUtils.Simulate will not work if you are using shallow rendering.");if(q(t))throw Error("TestUtils.Simulate expected a DOM node as the first argument but received a component instance. Pass the DOM node you wish to simulate the event on instead.");var a="on"+e[0].toUpperCase()+e.slice(1),o=new V;o.target=t,o.type=e.toLowerCase();var s=O(t),c=new d(a,o.type,s,o,t);c.persist(),u(c,n),ee.has(e)?c&&c._reactName&&function(e,t,n){e&&n&&n._reactName&&(t=Y(e,n._reactName))&&(null==n._dispatchListeners&&(n._dispatchListeners=[]),null==n._dispatchInstances&&(n._dispatchInstances=[]),n._dispatchListeners.push(t),n._dispatchInstances.push(e))}(c._targetInst,null,c):c&&c._reactName&&$(c._targetInst,J,c),i.unstable_batchedUpdates((function(){if(M(t),c){var e=c._dispatchListeners,n=c._dispatchInstances;if(A(e))for(var r=0;r<e.length&&!c.isPropagationStopped();r++)X(c,e[r],n[r]);else e&&X(c,e,n);c._dispatchListeners=null,c._dispatchInstances=null,c.isPersistent()||c.constructor.release(c)}if(T)throw e=C,T=!1,C=null,e})),F()}}"blur cancel click close contextMenu copy cut auxClick doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play pointerCancel pointerDown pointerUp rateChange reset resize seeked submit touchCancel touchEnd touchStart volumeChange drag dragEnter dragExit dragLeave dragOver mouseMove mouseOut mouseOver pointerMove pointerOut pointerOver scroll toggle touchMove wheel abort animationEnd animationIteration animationStart canPlay canPlayThrough durationChange emptied encrypted ended error gotPointerCapture load loadedData loadedMetadata loadStart lostPointerCapture playing progress seeking stalled suspend timeUpdate transitionEnd waiting mouseEnter mouseLeave pointerEnter pointerLeave change select beforeInput compositionEnd compositionStart compositionUpdate".split(" ").forEach((function(e){Z[e]=te(e)}))},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case _:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Se=null,Ee=null;function _e(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ie(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Te(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var De=!1;function Ae(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==Se||null!==Ee)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ve=null,ze={onError:function(e){Me=!0,Fe=e}};function Ue(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,St,Et,_t,It=!1,Tt=[],Ct=null,Nt=null,Dt=null,At=new Map,Pt=new Map,Ot=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void _t(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Vt(e,t,n){jt(e)&&n.delete(t)}function zt(){It=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==Dt&&jt(Dt)&&(Dt=null),At.forEach(Vt),Pt.forEach(Vt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Nt&&Ut(Nt,e),null!==Dt&&Ut(Dt,e),At.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=k.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=1,Wt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Qt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=4,Wt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Xt(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Kr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function Xt(e,t,n,r){if(Ht=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function _n(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(An),On=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Rn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Wn=null;function Hn(e){jr(e,0)}function Xn(e){if(W(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Qn&&(Qn.detachEvent("onpropertychange",nr),Wn=Qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ae(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==H(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Qr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function _r(e){if(Sr[e])return Sr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ir=_r("animationend"),Tr=_r("animationiteration"),Cr=_r("animationstart"),Nr=_r("transitionend"),Dr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Rr=Ar[Or];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Ir,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ue.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ve,je=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Qt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Ir:case Tr:case Cr:s=yn;break;case Nr:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ki(s),d=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Kn(u))if(Yn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?ki(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(g=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(y=Qr(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Un(n))&&(b.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,jn);case"textInput":return(e=t.data)===jn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Zt=Jt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],Si=-1;function Ei(e){return{current:e}}function _i(e){0>Si||(e.current=xi[Si],xi[Si]=null,Si--)}function Ii(e,t){Si++,xi[Si]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Ni=Ei(!1),Di=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){_i(Ni),_i(Ci)}function Ri(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Di=Ci.current,Ii(Ci,e),Ii(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,_i(Ni),_i(Ci),Ii(Ci,e)):_i(Ni),Ii(Ni,n)}var ji=null,Vi=!1,zi=!1;function Ui(e){null===ji?ji=[e]:ji.push(e)}function Bi(){if(!zi&&null!==ji){zi=!0;var e=0,t=bt;try{var n=ji;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Vi=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,Bi),i}finally{bt=t,zi=!1}}return null}var qi=[],Ki=0,Gi=null,Qi=0,Wi=[],Hi=0,Xi=null,$i=1,Yi="";function Ji(e,t){qi[Ki++]=Qi,qi[Ki++]=Gi,Gi=e,Qi=t}function Zi(e,t,n){Wi[Hi++]=$i,Wi[Hi++]=Yi,Wi[Hi++]=Xi,Xi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Qi=qi[--Ki],qi[Ki]=null;for(;e===Xi;)Xi=Wi[--Hi],Wi[Hi]=null,Yi=Wi[--Hi],Wi[Hi]=null,$i=Wi[--Hi],Wi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ba=null,ka=null;function wa(){ka=ba=ga=null}function xa(e){var t=ya.current;_i(ya),e._currentValue=t}function Sa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ka=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ku=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ga)throw Error(a(308));ba=e,ga.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ns)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ua={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ra(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ra(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=_a(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ua,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ua.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=_a(a):(a=Pi(t)?Di:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ua.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ha(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ha(a)===t.type)?((r=i(t,n.props)).ref=Qa(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Qa(e,null,t),n.return=e,n;case x:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ha(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Qa(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=jc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Xa(!0),Ya=Xa(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Za),Ii(Za,t)}function io(){_i(Za),_i(eo),_i(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(_i(Za),_i(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=k.ReactCurrentDispatcher,ho=k.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,bo=!1,ko=0,wo=0;function xo(){throw Error(a(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),bo){o=0;do{if(bo=!1,ko=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(bo)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function _o(){var e=0!==ko;return ko=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(ku=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,ku=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Ro.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ro(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function jo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Uo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return Uo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Qo(e,t){return Bo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Wo.bind(null,t,e),n)}function Xo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{bt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){bo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:_a,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:_a,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Uo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:jo,useDebugValue:Xo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Ro.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ds.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:_a,useCallback:$o,useContext:_a,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:_a,useCallback:$o,useContext:_a,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Qo,useMemo:Yo,useReducer:Do,useRef:zo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Qs=r),hu(0,t)},n}function vu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Ra(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bu=k.ReactCurrentOwner,ku=!1;function wu(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=_o(),null===e||ku?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Su(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Rc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(ku=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(ku=!0)}}return Tu(e,t,n,r,i)}function _u(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Rs,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Rs,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Rs,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Rs,Os),Os|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=_o(),null===e||ku?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=_a(c):c=Ai(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Da?("function"===typeof l&&(za(t,n,l,r),s=t.memoizedState),(u=Da||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=_a(s):s=Ai(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Da?("function"===typeof d&&(za(t,n,d,r),p=t.memoizedState),(c=Da||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,bu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ou,Ru,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ju(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,zu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return zu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,zu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),ku||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return mc(),zu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Hi++]=$i,Wi[Hi++]=Yi,Wi[Hi++]=Xi,$i=e.id,Yi=e.overflow,Xi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Rc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Rc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Sa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uu(e,n,t);else if(19===e.tag)Uu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),_i(Ni),_i(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ru(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":Q(r),Z(r,o,!0);break;case"textarea":Q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=X(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(_i(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&Br(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(_i(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Qu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Qu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qs&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Qu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Ye()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Qu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),_i(Ni),_i(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(_i(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Ru=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){_c(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Yu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_c(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,ds(e,t,n),Yu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){_c(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){_c(e,e.return,m)}try{rs(5,e,e.return)}catch(m){_c(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){_c(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&Y(i,o),be(s,u);var l=be(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){_c(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){_c(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){_c(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Ye())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,ms(t,e),Yu=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(p=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){_c(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==p?(p.return=d,Zu=p):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){_c(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){_c(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){_c(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bs(e,t,n){Zu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?Ss(i):null!==s?(s.return=o,Zu=s):Ss(i);for(;null!==a;)Zu=a,ks(a,t,n),a=a.sibling;Zu=i,$u=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&as(t)}catch(d){_c(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function Ss(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){_c(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){_c(t,i,s)}}var a=t.return;try{as(t)}catch(s){_c(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){_c(t,o,s)}}}catch(s){_c(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,_s=Math.ceil,Is=k.ReactCurrentDispatcher,Ts=k.ReactCurrentOwner,Cs=k.ReactCurrentBatchConfig,Ns=0,Ds=null,As=null,Ps=0,Os=0,Rs=Ei(0),Ls=0,Ms=null,Fs=0,js=0,Vs=0,zs=null,Us=null,Bs=0,qs=1/0,Ks=null,Gs=!1,Qs=null,Ws=null,Hs=!1,Xs=null,$s=0,Ys=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ns)?Ye():-1!==Zs?Zs:Zs=Ye()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ns)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ns)&&e===Ds||(e===Ds&&(0===(2&Ns)&&(js|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ns&&0===(1&t.mode)&&(qs=Ye()+500,Vi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Ps:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){Vi=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),oi((function(){0===(6&Ns)&&Bi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ns))throw Error(a(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ns;Ns|=2;var o=vc();for(Ds===e&&Ps===t||(Ks=null,qs=Ye()+500,dc(e,t));;)try{bc();break}catch(s){pc(e,s)}wa(),Is.current=o,Ns=i,null!==As?t=0:(Ds=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Us,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bs+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Us,Ks),t);break}xc(e,Us,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_s(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Us,Ks),r);break}xc(e,Us,Ks);break;default:throw Error(a(329))}}}return ic(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=zs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Us,Us=n,null!==t&&uc(t)),e}function uc(e){null===Us?Us=e:Us.push.apply(Us,e)}function sc(e,t){for(t&=~Vs,t&=~js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ns))throw Error(a(327));Sc();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Us,Ks),ic(e,Ye()),null}function lc(e,t){var n=Ns;Ns|=1;try{return e(t)}finally{0===(Ns=n)&&(qs=Ye()+500,Vi&&Bi())}}function fc(e){null!==Xs&&0===Xs.tag&&0===(6&Ns)&&Sc();var t=Ns;Ns|=1;var n=Cs.transition,r=bt;try{if(Cs.transition=null,bt=1,e)return e()}finally{bt=r,Cs.transition=n,0===(6&(Ns=t))&&Bi()}}function hc(){Os=Rs.current,_i(Rs)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),_i(Ni),_i(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:_i(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,As=e=Rc(e.current,null),Ps=Os=t,Ls=0,Ms=null,Vs=js=Fs=0,Us=zs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function pc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,bo=!1,ko=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===zs?zs=[o]:zs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ws||!Ws.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(k){t=k,As===n&&null!==n&&(As=n=n.return);continue}break}}function vc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ds||0===(268435455&Fs)&&0===(268435455&js)||sc(Ds,Ps)}function yc(e,t){var n=Ns;Ns|=2;var r=vc();for(Ds===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(wa(),Ns=n,Is.current=r,null!==As)throw Error(a(261));return Ds=null,Ps=0,Ls}function gc(){for(;null!==As;)kc(As)}function bc(){for(;null!==As&&!Xe();)kc(As)}function kc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Hu(n,t,Os)))return void(As=n)}else{if(null!==(n=Xu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=bt,i=Cs.transition;try{Cs.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Xs);if(0!==(6&Ns))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(As=Ds=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Dc(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=bt;bt=1;var s=Ns;Ns|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}v=ns,ns=!1}(e,n),ys(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,bs(n,e,i),$e(),Ns=s,bt=u,Cs.transition=o}else e.current=n;if(Hs&&(Hs=!1,Xs=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Qs,Qs=null,e;0!==(1&$s)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===Js?Ys++:(Ys=0,Js=e):Ys=0,Bi()}(e,t,n,r)}finally{Cs.transition=i,bt=r}return null}function Sc(){if(null!==Xs){var e=kt($s),t=Cs.transition,n=bt;try{if(Cs.transition=null,bt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,$s=0,0!==(6&Ns))throw Error(a(331));var i=Ns;for(Ns|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,p=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=p,Zu=d;break}Zu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var b=e.current;for(Zu=b;null!==Zu;){var k=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Zu=k;else e:for(u=b;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){_c(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ns=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Ra(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function _c(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Ra(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>Ye()-Bs?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Dc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case _:return(e=Pc(12,n,t,2|i)).elementType=_,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case D:return(e=Pc(19,n,t,i)).elementType=D,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,o,u,s){return e=new zc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Uc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ra(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ra(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ku=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ku=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ju(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,_u(e,t,n)}return Gu(e,t,n)}(e,t,n);ku=0!==(131072&e.flags)}else ku=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Ua,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Su(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return ju(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Sa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Sa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=_a(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Su(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return _u(e,t,n)}throw Error(a(156,t.tag))};var Hc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Ye()),0===(6&Ns)&&(qs=Ye()+500,Bi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[bi,ki,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Hc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},180:function(e,t,n){"use strict";n(981)},631:function(e,t,n){"use strict";var r=n(576);t.Z=r.default},133:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.dummyQueue=[],this.eventQueue=[]}return e.prototype.restartTypeWriter=function(){return this.memoWord=this.nextWord,this.eventQueue=this.nextWord?this.nextWord.split(""):[],this.erasing=!1,""},e.prototype.typing=function(){if(this.erasing&&!this.word)return this.restartTypeWriter();if(this.erasing&&this.word)return this.erase();if(this.word===this.memoWord)return this.word;var e=this.eventQueue.shift();return this.dummyQueue.push(e),this.word=this.dummyQueue.join(""),this.word},e.prototype.startTypeWord=function(e){return this.erasing=!0,this.nextWord=e,this.dummyQueue.pop(),this.word=this.dummyQueue.join(""),this.word},e.prototype.erase=function(){return this.dummyQueue.pop(),this.word=this.dummyQueue.join(""),this.word},e.prototype.rd=function(){var e=Math.random();return e>.1||e<.07?this.rd():1e3*e},e}();t.default=n},576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(791),i=new(n(133).default);t.default=function(e){var t=r.useState(null),n=t[0],a=t[1],o=r.useRef({}),u=r.useRef({});return r.useEffect((function(){u.current=a(i.startTypeWord(e))}),[e]),r.useEffect((function(){return o.current=setInterval((function(){a(i.typing())}),i.rd()),function(){clearInterval(o.current)}}),[n]),n}},666:function(e){e.exports=function(){for(var e=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],t=[],n=0;n<36;n++)t[n]=8===n||13===n||18===n||23===n?"-":e[Math.ceil(Math.random()*e.length-1)];return t.join("")}},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,O(x);else{var t=r(l);null!==t&&R(w,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(I),I=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&R(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,_=null,I=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function D(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?S():(E=!1,_=null)}}else E=!1}if("function"===typeof b)S=function(){b(D)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=D,S=function(){P.postMessage(null)}}else S=function(){y(D,0)};function O(e){_=e,E||(E=!0,S())}function R(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(I),I=-1):m=!0,R(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},699:function(e,t,n){var r=n(501),i=n(112),a=n(132),o=n(890),u=n(113),s=n(725),c=n(411);c.alea=r,c.xor128=i,c.xorwow=a,c.xorshift7=o,c.xor4096=u,c.tychei=s,e.exports=c},501:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function u(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new o(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},725:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},112:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},113:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),i=0,a=-32;a<s;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=u[127&a]^=r+o)?i+1:0);for(i>=128&&(u[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=u[i+34&127],n=u[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[i]=r^n;e.w=o,e.X=u,e.i=i}(t,e)}function u(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function u(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},132:function(e,t,n){var r;!function(e,i,a){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new o(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},411:function(e,t,n){var r;!function(i,a,o){var u,s=256,c=o.pow(s,6),l=o.pow(2,52),f=2*l,h=s-1;function d(e,t,n){var r=[],h=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return u&&(e=u.randomBytes)?e=e(s):(e=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,g(a)]}}():e,3),r),d=new p(r),b=function(){for(var e=d.g(6),t=c,n=0;e<l;)e=(e+n)*s,t*=s,n=d.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|d.g(4)},b.quick=function(){return d.g(4)/4294967296},b.double=b,y(g(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,d),e.state=function(){return v(d,{})}),n?(o.random=e,t):e})(b,h,"global"in t?t.global:this==o,t.state)}function p(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<s;)o[i]=i++;for(i=0;i<s;i++)o[i]=o[a=h&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=h&i+1],n=n*s+o[h&(o[i]=o[a=h&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(s)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(m(e[n],t-1))}catch(a){}return r.length?r:"string"==i?e:e+"\0"}function y(e,t){for(var n,r=e+"",i=0;i<r.length;)t[h&i]=h&(n^=19*t[h&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(y(o.random(),a),e.exports){e.exports=d;try{u=n(42)}catch(b){}}else void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},42:function(){}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return rt},SDK_VERSION:function(){return fn},_DEFAULT_ENTRY_NAME:function(){return Yt},_addComponent:function(){return tn},_addOrOverwriteComponent:function(){return nn},_apps:function(){return Zt},_clearComponents:function(){return un},_components:function(){return en},_getProvider:function(){return an},_registerComponent:function(){return rn},_removeServiceInstance:function(){return on},deleteApp:function(){return vn},getApp:function(){return dn},getApps:function(){return pn},initializeApp:function(){return hn},onLog:function(){return gn},registerVersion:function(){return yn},setLogLevel:function(){return bn}});var t,r=n(791),i=n(250);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function u(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){if(Array.isArray(e))return e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,t){return l(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||h(e,t)||d()}function v(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||v(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function b(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){var t=S();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,n)}}function I(e,t,n){return I=S()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&k(i,n.prototype),i},I.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,x(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,e)},T(e)}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var D,A="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function O(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function L(e,t,n,r){return void 0===n&&(n=null),N({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?F(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function M(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function F(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function j(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null,d=p();function p(){return(l.state||{idx:null}).idx}function v(){f=t.Pop;var e=p(),n=null==e?null:e-d;d=e,h&&h({action:f,location:y.location,delta:n})}function m(e){var t="null"!==u.location.origin?u.location.origin:u.location.href,n="string"===typeof e?e:M(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==d&&(d=0,l.replaceState(N({},l.state,{idx:d}),""));var y={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(A,v),h=e,function(){u.removeEventListener(A,v),h=null}},createHref:function(e){return n(u,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=L(y.location,e,n);r&&r(i,e);var a=R(i,d=p()+1),o=y.createHref(i);try{l.pushState(a,"",o)}catch(s){u.location.assign(o)}c&&h&&h({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;var i=L(y.location,e,n);r&&r(i,e);var a=R(i,d=p()),o=y.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:y.location,delta:0})},go:function(e){return l.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(D||(D={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function V(e,t,n){void 0===n&&(n="/");var r=Z(("string"===typeof t?F(t):t).pathname||"/",n);if(null==r)return null;var i=z(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=$(i[o],J(r));return a}function z(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=re([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),z(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:X(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=C(U(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function U(e){var t=e.split("/");if(0===t.length)return[];var n,r=l(n=t)||v(n)||h(n)||d(),i=r[0],a=r.slice(1),o=i.endsWith("?"),u=i.replace(/\?$/,"");if(0===a.length)return o?[u,""]:[u];var s=U(a.join("/")),c=[];return c.push.apply(c,m(s.map((function(e){return""===e?u:[u,e].join("/")})))),o&&c.push.apply(c,m(s)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var B=/^:\w+$/,q=3,K=2,G=1,Q=10,W=-2,H=function(e){return"*"===e};function X(e,t){var n=e.split("/"),r=n.length;return n.some(H)&&(r+=W),t&&(r+=K),n.filter((function(e){return!H(e)})).reduce((function(e,t){return e+(B.test(t)?q:""===t?G:Q)}),r)}function $(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=Y({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:re([i,l.pathname]),pathnameBase:ie(re([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=re([i,l.pathnameBase]))}return a}function Y(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);O("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=p(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return O(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function J(e){try{return decodeURI(e)}catch(t){return O(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function ee(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function te(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function ne(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=F(e):(P(!(i=N({},e)).pathname||!i.pathname.includes("?"),ee("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),ee("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),ee("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?F(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ae(a),hash:oe(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var re=function(e){return e.join("/").replace(/\/\/+/g,"/")},ie=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ae=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},oe=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ue=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n)}(T(Error));function se(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ce=["post","put","patch","delete"],le=(new Set(ce),["get"].concat(ce));new Set(le),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}var he=r.createContext(null);var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var me=r.createContext(null);var ye=r.createContext({outlet:null,matches:[]});var ge=r.createContext(null);function be(){return null!=r.useContext(me)}function ke(){return be()||P(!1),r.useContext(me).location}function we(e){r.useContext(ve).static||r.useLayoutEffect(e)}function xe(){return null!=r.useContext(he)?function(){var e=Ae(_e.UseNavigateStable).router,t=Oe(Ie.UseNavigateStable),n=r.useRef(!1);we((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,fe({fromRouteId:t},i)))}),[e,t]);return i}():function(){be()||P(!1);var e=r.useContext(ve),t=e.basename,n=e.navigator,i=r.useContext(ye).matches,a=ke().pathname,o=JSON.stringify(te(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);we((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=ne(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:re([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}()}function Se(e,n,i){be()||P(!1);var a,o=r.useContext(ve).navigator,u=r.useContext(ye).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,ke());if(n){var h,d="string"===typeof n?F(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),a=d}else a=f;var p=a.pathname||"/",v=V(e,{pathname:"/"===l?p:p.slice(l.length)||"/"});var m=De(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:re([l,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:re([l,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,i);return n&&m?r.createElement(me.Provider,{value:{location:fe({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:t.Pop}},m):m}function Ee(){var e=function(){var e,t=r.useContext(ge),n=Pe(Ie.UseRouteError),i=Oe(Ie.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=se(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var _e,Ie,Te=r.createElement(Ee,null),Ce=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return b(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(ye.Provider,{value:this.props.routeContext},r.createElement(ge.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Ne(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(he);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ye.Provider,{value:t},i)}function De(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,u=null==(i=n)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||P(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Te);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=s?c:i.route.element?i.route.element:e,r.createElement(Ne,{match:i,routeContext:{outlet:e,matches:l},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(Ce,{location:n.location,revalidation:n.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Ae(e){var t=r.useContext(he);return t||P(!1),t}function Pe(e){var t=r.useContext(de);return t||P(!1),t}function Oe(e){var t=function(e){var t=r.useContext(ye);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(_e||(_e={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ie||(Ie={}));var Re;function Le(e){P(!1)}function Me(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;be()&&P(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=F(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,b=void 0===g?"":g,k=v.hash,w=void 0===k?"":k,x=v.state,S=void 0===x?null:x,E=v.key,_=void 0===E?"default":E,I=r.useMemo((function(){var e=Z(y,d);return null==e?null:{location:{pathname:e,search:b,hash:w,state:S,key:_},navigationType:c}}),[d,y,b,w,S,_,c]);return null==I?null:r.createElement(ve.Provider,{value:p},r.createElement(me.Provider,{children:o,value:I}))}function Fe(e){var t=e.children,n=e.location;return Se(Ve(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Re||(Re={}));var je=new Promise((function(){}));r.Component;function Ve(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(m(t),[i]);if(e.type!==r.Fragment){e.type!==Le&&P(!1),e.props.index&&e.props.children&&P(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ve(e.props.children,a)),n.push(o)}else n.push.apply(n,Ve(e.props.children,a))}})),n}var ze=(0,r.createContext)([]),Ue=n(184);var Be=function(e){var t=e.seconds,n=p((0,r.useState)(t),2),i=n[0],a=n[1],o=(0,r.useContext)(ze),u=o.data,s=(o.setData,o.db),c=ke().pathname.replace("/game/","").split("-"),l=c.at(0),f=c.at(-1),h=null===u||void 0===u?void 0:u.find((function(e){return e.id==l})),d=null===h||void 0===h?void 0:h.players.find((function(e){return e.id==f}));return(0,r.useEffect)((function(){if(i>0&&1==d.admin){var e=setTimeout((function(){a(i-1);var e=Math.floor(i/60),t=i%60,n="".concat(e<10?"0"+e:e,":").concat(t<10?"0"+t:t);s.collection("Rooms").doc(l).update({countor:n}),1==i&&s.collection("Rooms").doc(l).update({guessing:!1,turn:"Team 1"==(null===h||void 0===h?void 0:h.turn)?"Team 2":"Team 1"})}),800);return function(){return clearTimeout(e)}}}),[i]),(0,Ue.jsx)("div",{children:null===h||void 0===h?void 0:h.countor})};var qe=function(e){var t=e.teamName,n=ke().pathname.replace("/game/","").split("-"),i=n.shift(),a=n.join("-"),o=(0,r.useContext)(ze),u=o.data,s=(o.db,u.find((function(e){return e.id==i})));return null===s||void 0===s||s.players.find((function(e){return e.id==a})),(0,Ue.jsx)("div",{className:" flex flex-col gap-2 ",children:(0,Ue.jsxs)("div",{className:" p-2 card w-[240px]  flex flex-col gap-2  rounded-lg mt-6  bg-gradient-to-r ".concat("Team 1"==t?"from-blue-600 to-blue-500":"from-red-600 to-red-500","  "),children:[(0,Ue.jsxs)("div",{className:"flex gap-2 text-[20px] items-center px-1 ",children:[(0,Ue.jsxs)("p",{children:[null===s||void 0===s?void 0:s.cards.filter((function(e){return 0==e.flip&&e.team==t})).length," Words left"]}),(0,Ue.jsx)("span",{className:"  rounded-lg bg-white text-black ml-auto px-1 text-[16px]",children:(null===s||void 0===s?void 0:s.turn)==t?(0,Ue.jsx)(Be,{seconds:null===s||void 0===s?void 0:s.timer}):"00:00"})]}),(0,Ue.jsxs)("div",{className:"flex flex-col px-2 gap-1",children:[(0,Ue.jsx)("p",{className:"border-b-2 ",children:"Operatives"}),(0,Ue.jsx)("div",{className:"flex gap-2  flex-wrap ",children:null===s||void 0===s?void 0:s.players.filter((function(e){return e.team==t})).map((function(e){if(!1===e.spymaster)return(0,Ue.jsx)("span",{className:"bg-white ".concat("Team 1"==t?" text-[#818cf8]":" text-[#db2777]","   rounded-lg px-1  "),children:e.name},e.id)}))}),(0,Ue.jsx)("p",{className:"border-b-2",children:"Spymaster"}),(0,Ue.jsx)("div",{className:"flex gap-2 flex-wrap ",children:null===s||void 0===s?void 0:s.players.filter((function(e){return e.team==t})).map((function(e){if(!0===e.spymaster)return(0,Ue.jsxs)("span",{className:"bg-white   ".concat("Team 1"==t?" text-[#818cf8]":" text-[#db2777]"," rounded-lg px-1  "),children:[e.admin?"admin:":"",e.name]},e.id)}))})]})]})})},Ke=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ke(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new Qe;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Qe=function(e){w(n,e);var t=_(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return b(n)}(T(Error)),We=function(e){return function(e){var t=Ke(e);return Ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},He=function(e){try{return Ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Xe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Xe(e[n],t[n]));return e}var $e=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Ye=function(){try{return $e()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/CodeNames-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&He(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Je=function(){var e;return null===(e=Ye())||void 0===e?void 0:e.config},Ze=function(){function e(){var t=this;y(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return b(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function et(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function tt(){return!function(){var e,t=null===(e=Ye())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var rt=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(E(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(E(a),it.prototype.create),a}return b(n)}(T(Error)),it=function(){function e(t,n,r){y(this,e),this.service=t,this.serviceName=n,this.errors=r}return b(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(at,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new rt(n,a,t)}}]),e}();var at=/\{\$([^}]+)}/g;function ot(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(st(u)&&st(s)){if(!ut(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function st(e){return null!==e&&"object"===typeof e}function ct(e,t){var n=new lt(e,t);return n.subscribe.bind(n)}var lt=function(){function e(t,n){var r=this;y(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return b(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ft),void 0===r.error&&(r.error=ft),void 0===r.complete&&(r.complete=ft);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ft(){}function ht(e){return e&&e._delegate?e._delegate:e}function dt(){dt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var m={};c(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,o)&&(m=g);var b=v.prototype=d.prototype=Object.create(m);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,o,u,s){var c=f(e[r],e,o);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==a(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,u,s)}),(function(e){i("throw",e,u,s)})):t.resolve(h).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(w.prototype),c(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function pt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){pt(a,r,i,o,u,"next",e)}function u(e){pt(a,r,i,o,u,"throw",e)}o(void 0)}))}}var mt=function(){function e(t,n,r){y(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return b(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),yt="[DEFAULT]",gt=function(){function e(t,n){y(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return b(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ze;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:yt})}catch(s){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=vt(dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(m(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),m(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=p(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Ry){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===yt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Ry){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt;return this.component?this.component.multipleInstances?e:yt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var bt,kt,wt=function(){function e(t){y(this,e),this.name=t,this.providers=new Map}return b(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new gt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),xt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(kt||(kt={}));var St={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Et=kt.INFO,_t=(u(bt={},kt.DEBUG,"log"),u(bt,kt.VERBOSE,"log"),u(bt,kt.INFO,"info"),u(bt,kt.WARN,"warn"),u(bt,kt.ERROR,"error"),bt),It=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_t[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Tt=function(){function e(t){y(this,e),this.name=t,this._logLevel=Et,this._logHandler=It,this._userLogHandler=null,xt.push(this)}return b(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in kt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?St[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kt.DEBUG].concat(t)),this._logHandler.apply(this,[this,kt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,kt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kt.INFO].concat(t)),this._logHandler.apply(this,[this,kt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kt.WARN].concat(t)),this._logHandler.apply(this,[this,kt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kt.ERROR].concat(t)),this._logHandler.apply(this,[this,kt.ERROR].concat(t))}}]),e}();var Ct,Nt,Dt=function(e,t){return t.some((function(t){return e instanceof t}))};var At=new WeakMap,Pt=new WeakMap,Ot=new WeakMap,Rt=new WeakMap,Lt=new WeakMap;var Mt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ot.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ft(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Nt||(Nt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(zt(this),n),Vt(At.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vt(e.apply(zt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[zt(this),t].concat(r));return Ot.set(a,t.sort?t.sort():[t]),Vt(a)}}function jt(e){return"function"===typeof e?Ft(e):(e instanceof IDBTransaction&&function(e){if(!Pt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Pt.set(e,t)}}(e),Dt(e,Ct||(Ct=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Mt):e)}function Vt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Vt(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&At.set(t,e)})).catch((function(){})),Lt.set(t,e),t}(e);if(Rt.has(e))return Rt.get(e);var t=jt(e);return t!==e&&(Rt.set(e,t),Lt.set(t,e)),t}var zt=function(e){return Lt.get(e)};var Ut,Bt,qt=["get","getKey","getAll","getAllKeys","count"],Kt=["put","add","delete","clear"],Gt=new Map;function Qt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Gt.get(t))return Gt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Kt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||qt.includes(n))){var a=function(){var e=vt(dt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Gt.set(t,a),a}}}Mt=function(e){return c(c({},e),{},{get:function(t,n,r){return Qt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Qt(t,n)||e.has(t,n)}})}(Mt);var Wt=function(){function e(t){y(this,e),this.container=t}return b(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ht="@firebase/app",Xt="0.9.9",$t=new Tt("@firebase/app"),Yt="[DEFAULT]",Jt=(u(Ut={},Ht,"fire-core"),u(Ut,"@firebase/app-compat","fire-core-compat"),u(Ut,"@firebase/analytics","fire-analytics"),u(Ut,"@firebase/analytics-compat","fire-analytics-compat"),u(Ut,"@firebase/app-check","fire-app-check"),u(Ut,"@firebase/app-check-compat","fire-app-check-compat"),u(Ut,"@firebase/auth","fire-auth"),u(Ut,"@firebase/auth-compat","fire-auth-compat"),u(Ut,"@firebase/database","fire-rtdb"),u(Ut,"@firebase/database-compat","fire-rtdb-compat"),u(Ut,"@firebase/functions","fire-fn"),u(Ut,"@firebase/functions-compat","fire-fn-compat"),u(Ut,"@firebase/installations","fire-iid"),u(Ut,"@firebase/installations-compat","fire-iid-compat"),u(Ut,"@firebase/messaging","fire-fcm"),u(Ut,"@firebase/messaging-compat","fire-fcm-compat"),u(Ut,"@firebase/performance","fire-perf"),u(Ut,"@firebase/performance-compat","fire-perf-compat"),u(Ut,"@firebase/remote-config","fire-rc"),u(Ut,"@firebase/remote-config-compat","fire-rc-compat"),u(Ut,"@firebase/storage","fire-gcs"),u(Ut,"@firebase/storage-compat","fire-gcs-compat"),u(Ut,"@firebase/firestore","fire-fst"),u(Ut,"@firebase/firestore-compat","fire-fst-compat"),u(Ut,"fire-js","fire-js"),u(Ut,"firebase","fire-js-all"),Ut),Zt=new Map,en=new Map;function tn(e,t){try{e.container.addComponent(t)}catch(n){$t.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function nn(e,t){e.container.addOrOverwriteComponent(t)}function rn(e){var t=e.name;if(en.has(t))return $t.debug("There were multiple attempts to register component ".concat(t,".")),!1;en.set(t,e);var n,r=C(Zt.values());try{for(r.s();!(n=r.n()).done;){tn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function an(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function on(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yt;an(e,t).clearInstance(n)}function un(){en.clear()}var sn=(u(Bt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),u(Bt,"bad-app-name","Illegal App name: '{$appName}"),u(Bt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),u(Bt,"app-deleted","Firebase App named '{$appName}' already deleted"),u(Bt,"no-options","Need to provide options, when not being deployed to hosting via source."),u(Bt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),u(Bt,"invalid-log-argument","First argument to `onLog` must be null or a function."),u(Bt,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),u(Bt,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),u(Bt,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),u(Bt,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Bt),cn=new it("app","Firebase",sn),ln=function(){function e(t,n,r){var i=this;y(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",(function(){return i}),"PUBLIC"))}return b(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}]),e}(),fn="9.21.0";function hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw cn.create("bad-app-name",{appName:String(i)});if(n||(n=Je()),!n)throw cn.create("no-options");var a=Zt.get(i);if(a){if(ut(n,a.options)&&ut(r,a.config))return a;throw cn.create("duplicate-app",{appName:i})}var o,u=new wt(i),s=C(en.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new ln(n,r,u);return Zt.set(i,l),l}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=Zt.get(e);if(!t&&e===Yt)return hn();if(!t)throw cn.create("no-app",{appName:e});return t}function pn(){return Array.from(Zt.values())}function vn(e){return mn.apply(this,arguments)}function mn(){return(mn=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Zt.has(n)){e.next=6;break}return Zt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e,t,n){var r,i=null!==(r=Jt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void $t.warn(u.join(" "))}rn(new mt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function gn(e,t){if(null!==e&&"function"!==typeof e)throw cn.create("invalid-log-argument");!function(e,t){var n,r=C(xt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=St[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:kt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function bn(e){var t;t=e,xt.forEach((function(e){e.setLogLevel(t)}))}var kn="firebase-heartbeat-database",wn=1,xn="firebase-heartbeat-store",Sn=null;function En(){return Sn||(Sn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Vt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Vt(u.result),e.oldVersion,e.newVersion,Vt(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(kn,wn,{upgrade:function(e,t){if(0===t)e.createObjectStore(xn)}}).catch((function(e){throw cn.create("idb-open",{originalErrorMessage:e.message})}))),Sn}function _n(e){return In.apply(this,arguments)}function In(){return In=vt(dt().mark((function e(t){var n,r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,En();case 3:return n=e.sent,e.abrupt("return",n.transaction(xn).objectStore(xn).get(Nn(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof rt?$t.warn(e.t0.message):(r=cn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),$t.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),In.apply(this,arguments)}function Tn(e,t){return Cn.apply(this,arguments)}function Cn(){return Cn=vt(dt().mark((function e(t,n){var r,i,a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,En();case 3:return r=e.sent,i=r.transaction(xn,"readwrite"),a=i.objectStore(xn),e.next=8,a.put(n,Nn(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof rt?$t.warn(e.t0.message):(o=cn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),$t.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Cn.apply(this,arguments)}function Nn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Dn=function(){function e(t){var n=this;y(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ln(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return b(e,[{key:"triggerHeartbeat",value:function(){var e=vt(dt().mark((function e(){var t,n,r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=An(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=vt(dt().mark((function e(){var t,n,r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=An(),n=Pn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=We(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function An(){return(new Date).toISOString().substring(0,10)}function Pn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Mn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Mn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var On,Rn,Ln=function(){function e(t){y(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return b(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=vt(dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,_n(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=vt(dt().mark((function e(t){var n,r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=vt(dt().mark((function e(t){var n,r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(m(r.heartbeats),m(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Mn(e){return We(JSON.stringify({version:2,heartbeats:e})).length}On="",rn(new mt("platform-logger",(function(e){return new Wt(e)}),"PRIVATE")),rn(new mt("heartbeat",(function(e){return new Dn(e)}),"PRIVATE")),yn(Ht,Xt,On),yn(Ht,Xt,"esm2017"),yn("fire-js","");var Fn=function(){function e(t,n){var r=this;y(this,e),this._delegate=t,this.firebase=n,tn(t,new mt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return b(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),vn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){tn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){nn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),jn=(u(Rn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),u(Rn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Rn),Vn=new it("app-compat","Firebase",jn);var zn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ot(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:yn,setLogLevel:bn,onLog:gn,apps:null,SDK_VERSION:fn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(rn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Vn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Xe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ot(n,e=e||Yt))throw Vn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Fn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Xe(n,e)},createSubscribe:ct,ErrorFactory:it,deepExtend:Xe}),n}(),Un=new Tt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Un.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Bn=self.firebase.SDK_VERSION;Bn&&Bn.indexOf("LITE")>=0&&Un.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var qn=zn;!function(e){yn("@firebase/app-compat","0.2.9",e)}();qn.registerVersion("firebase","9.21.0","app-compat");var Kn={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Gn=r.createContext&&r.createContext(Kn),Qn=function(){return Qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qn.apply(this,arguments)},Wn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Hn(e){return e&&e.map((function(e,t){return r.createElement(e.tag,Qn({key:t},e.attr),Hn(e.child))}))}function Xn(e){return function(t){return r.createElement($n,Qn({attr:Qn({},e.attr)},t),Hn(e.child))}}function $n(e){var t=function(t){var n,i=e.attr,a=e.size,o=e.title,u=Wn(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Qn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:n,style:Qn(Qn({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==Gn?r.createElement(Gn.Consumer,null,(function(e){return t(e)})):t(Kn)}function Yn(e){return Xn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.15 269.75a133.197 133.197 0 0 1-55.862 179.975l-42.782 22.541-10.52 5.533a71.277 71.277 0 0 1-62.966 1.685l-167.077-71.38 15.733-46.676 99.363 19.194-51.458-97.78-82.843-157.411 40.357-21.232 82.844 157.457 19.934-10.485-36.521-69.445 40.335-21.22 36.52 69.445 19.935-10.485-28.2-53.598 40.358-21.232 28.2 53.598 19.945-10.576-19.354-36.886 40.346-21.174 19.354 36.885 54.348 103.301zM73.268 146.674a60.03 60.03 0 0 1 42.361-102.459 60.098 60.098 0 0 1 56.58 80.169l10.588 20.013A78.29 78.29 0 0 0 115.708 26a78.233 78.233 0 0 0-5.635 156.262L99.428 162.02a59.688 59.688 0 0 1-26.16-15.346z"}}]})(e)}var Jn=function(e){var t,n=e.card,i=ke().pathname.replace("/game/","").split("-"),a=i.shift(),o=i.join("-"),s=(xe(),(0,r.useContext)(ze)),l=s.data,f=(s.setData,s.db),h=l.find((function(e){return e.id==a})),d=null===h||void 0===h||null===(t=h.players)||void 0===t?void 0:t.find((function(e){return e.id==o}));return(0,Ue.jsxs)("div",{className:"relative",children:[0==(null===d||void 0===d?void 0:d.spymaster)&&0==n.flip&&(null===d||void 0===d?void 0:d.team)==(null===h||void 0===h?void 0:h.turn)&&1==(null===h||void 0===h?void 0:h.guessing)&&(0,Ue.jsx)(Yn,{size:30,onClick:function(){!function(e){if(1!=d.spymaster&&(null===h||void 0===h?void 0:h.turn)===d.team&&1!=e.flip)if(1!=(null===h||void 0===h?void 0:h.forbiddencard)||"x"!=e.team){var t,n=null===h||void 0===h?void 0:h.cards.map((function(t){return t.word==e.word?c(c({},t),{},{flip:!0}):t}));if(console.log(n.filter((function(e){return 1==e.flip})).length,"cards count  for ",null===d||void 0===d?void 0:d.team),8===n.filter((function(e){return e.team==(null===h||void 0===h?void 0:h.turn)&&1==e.flip})).length)return console.log("because  it  8",n.filter((function(t){return 1==t.flip&&e.team==(null===h||void 0===h?void 0:h.turn)})).length),void f.collection("Rooms").doc(a).update((t={turn:"",cards:n,flip:0,guessing:!1},u(t,"flip","done"),u(t,"winner",null===h||void 0===h?void 0:h.turn),u(t,"gameover",!0),t));var r=null===h||void 0===h?void 0:h.flip;f.collection("Rooms").doc(a).update({cards:n,flip:r-1})}else f.collection("Rooms").doc(a).update({gameover:!0,turn:"",guessing:!1,flip:"done",winner:"Team 1"==(null===h||void 0===h?void 0:h.turn)?"Team 2":"Team 1"})}(n)},className:"absolute cursor-pointer top-[-10px] right-[-5px]  bg-yellow-300 rounded-2xl p-1 rotate-45 ",color:"white"}),(0,Ue.jsxs)("div",{onClick:function(){!function(e){if(1!=d.spymaster&&(null===h||void 0===h?void 0:h.turn)===d.team){var t=null===h||void 0===h?void 0:h.cards.map((function(t){return e.hover.filter((function(e){return e.id==d.id})).length&&e.word==t.word&&e.team==t.team?c(c({},t),{},{hover:m(t.hover.filter((function(e){return e.id!==d.id})))}):e.word==t.word&&e.team==t.team?c(c({},t),{},{hover:[].concat(m(t.hover.filter((function(e){return e.id!==d.id}))),[d])}):t}));f.collection("Rooms").doc(a).update({cards:t})}}(n)},className:" hover:shadow-lg  cursor-pointer  flex flex-col items-center justify-center rounded-lg min-h-[100px] min-w-[170px]   shadow-inner  border-4 border-gray-100 hover:scale-[0.9] ".concat(0==(null===d||void 0===d?void 0:d.spymaster)&&0==n.flip?" bg-orange-300":n.color," "),children:[(0,Ue.jsx)("div",{className:"flex gap-2 ",children:n.hover.map((function(e){return(0,Ue.jsx)("span",{children:e.name})}))}),(0,Ue.jsxs)("p",{className:" text-black bg-gray-50 py-1 px-2 rounded-lg font-bold   mt-auto mb-1  ",children:[" ",n.word]}),(0,Ue.jsx)("div",{className:"absolute  bg-transparent  cursor-pointer ] h-[90px] w-[130px] "})]},n.word)]})};n(631);var Zn=function(){var e,t=ke().pathname.replace("/game/","").split("-"),n=t.shift(),i=t.join("-"),a=(0,r.useContext)(ze),o=a.data,u=(a.setData,a.db),s=p((0,r.useState)(""),2),c=s[0],l=s[1],f=p((0,r.useState)(1),2),h=f[0],d=f[1],v=null===o||void 0===o?void 0:o.find((function(e){return e.id==n})),m=null===v||void 0===v?void 0:v.players.find((function(e){return e.id==i}));return(0,Ue.jsxs)("div",{className:" w-full flex flex-col gap-2  relative  items-center ",children:[0==(null===m||void 0===m?void 0:m.spymaster)&&1==(null===v||void 0===v?void 0:v.guessing)&&(null===v||void 0===v?void 0:v.turn)==(null===m||void 0===m?void 0:m.team)&&(0,Ue.jsxs)("div",{className:"px-2 py-1 mx-auto rounded-lg  absolute top-4  text-black font-bold text-[18px]  bg-white ",children:[null===v||void 0===v?void 0:v.guessValue," | ",null===v||void 0===v?void 0:v.flip]}),0==(null===m||void 0===m?void 0:m.spymaster)&&0==(null===v||void 0===v?void 0:v.guessing)&&(null===v||void 0===v?void 0:v.turn)==(null===m||void 0===m?void 0:m.team)&&(0,Ue.jsx)("div",{className:"px-2 py-1 mx-auto rounded-lg  absolute top-4  text-black font-bold text-[18px]  bg-white ",children:"Waiting for spymaster to give a Clue"}),(null===v||void 0===v?void 0:v.turn)!==(null===m||void 0===m?void 0:m.team)&&(0,Ue.jsxs)("div",{className:"px-2 py-1 mx-auto rounded-lg absolute top-4  text-black font-bold text-[18px]  bg-white ",children:["Team 1"==(null===v||void 0===v?void 0:v.turn)?"Blue Team ":"Red Team "," is playing"]}),1==(null===m||void 0===m?void 0:m.spymaster)&&1==(null===v||void 0===v?void 0:v.guessing)&&(null===v||void 0===v?void 0:v.turn)==m.team&&(0,Ue.jsxs)("div",{className:"px-2 py-1 mx-auto   rounded-lg  absolute top-4  text-black font-bold text-[18px]  bg-white ",children:[null===v||void 0===v?void 0:v.guessValue," | ",null===v||void 0===v?void 0:v.flip]}),(0,Ue.jsx)("div",{className:"grid grid-cols-5 gap-2 p-1 min-w-[60%] max-w-[80%] my-auto  mx-auto mt-[8%] ",children:null===v||void 0===v||null===(e=v.cards)||void 0===e?void 0:e.map((function(e){return(0,Ue.jsx)(Jn,{card:e},e.index+e.word)}))}),1==(null===v||void 0===v?void 0:v.started)&&0==(null===v||void 0===v?void 0:v.guessing)&&1==(null===m||void 0===m?void 0:m.spymaster)&&(null===v||void 0===v?void 0:v.turn)==m.team&&(0,Ue.jsx)("div",{className:"  rounded-lg text-center p-1 w-full justify-center  absolute top-4   ",children:(0,Ue.jsxs)("div",{className:"flex  justify-center mx-auto gap-2 ",children:[(0,Ue.jsx)("input",{value:c,onChange:function(e){l(e.target.value)},type:"text",name:"",id:"",className:"w-[40%] outline-none h-8 bg-white rounded-lg text-black p-2 "}),(0,Ue.jsxs)("select",{name:"",id:"",onChange:function(e){d(e.target.value)},className:"bg-transparent p-1 rounded-lg text-white border",children:[(0,Ue.jsx)("option",{className:"text-black ",value:"1",children:"1"}),(0,Ue.jsx)("option",{className:"text-black ",value:"2",children:"2"}),(0,Ue.jsx)("option",{className:"text-black ",value:"3",children:"3"}),(0,Ue.jsx)("option",{className:"text-black ",value:"4",children:"4"})]}),(0,Ue.jsx)("button",{onClick:function(){""!=c&&(u.collection("Rooms").doc(n).update({guessing:!0,guessValue:c,flip:h}),l(""),d(1))},className:"bg-green-600 px-3 py-1 rounded-lg ",children:"Give Clue"})]})})]})};var er=function(){var e,t,n=(0,r.useContext)(ze),i=n.data,a=(n.setData,n.db),o=ke(),u=xe(),s=o.pathname.replace("/game/","").split("-"),l=s.shift(),f=s.join("-"),h=null===i||void 0===i?void 0:i.find((function(e){return e.id==l})),d=null===i||void 0===i||null===(e=i.find((function(e){return e.id==l})))||void 0===e||null===(t=e.players)||void 0===t?void 0:t.find((function(e){return e.id==f}));return(0,r.useEffect)((function(){1==(null===h||void 0===h?void 0:h.gameover)&&(a.collection("Rooms").doc(l).update({started:!1,guessing:!1}),u("/gameover/"+l+"-"+d.id))}),[h]),(0,r.useEffect)((function(){if(0==(null===h||void 0===h?void 0:h.flip)&&1==(null===h||void 0===h?void 0:h.guessing)){console.log("turn end");var e=h.cards.map((function(e){return c(c({},e),{},{hover:[]})}));a.collection("Rooms").doc(l).update({started:!0,turn:"Team 1"==(null===h||void 0===h?void 0:h.turn)?"Team 2":"Team 1",guessing:!1,cards:e})}}),[h]),(0,Ue.jsxs)("div",{className:"mx-auto min-h-screen  flex md:flex-col lg:flex-row relative  gap-2 ".concat("Team 2"==(null===h||void 0===h?void 0:h.turn)?" bg-gradient-to-br  from-red-900 to-red-700":"bg-gradient-to-br  from-blue-900 to-blue-700"),children:[(0,Ue.jsxs)("div",{className:"flex  lg:flex-col gap-2 pl-2 justify-center lg:justify-normal p-1 ",children:[(0,Ue.jsx)(qe,{teamName:"Team 1"},"Team1"),(0,Ue.jsx)(qe,{teamName:"Team 2"},"Team2"),(0,Ue.jsxs)("div",{className:"  text-center flex flex-col gap-4  p-1  left-4 text-[12px] ",children:[(0,Ue.jsxs)("p",{className:"bg-green-300 text-black px-4  mt-5 text-center rounded-lg text-[18px] ",children:["Players Online : ",null===h||void 0===h?void 0:h.players.length]}),(null===h||void 0===h?void 0:h.turn)==(null===d||void 0===d?void 0:d.team)&&1==(null===h||void 0===h?void 0:h.guessing)&&(0,Ue.jsx)("button",{className:"font-bold text-black  mt-2  py-1  bg-orange-200 text-[18px] rounded-lg  ",onClick:function(){a.collection("Rooms").doc(l).update({guessing:!1,turn:"Team 1"==(null===h||void 0===h?void 0:h.turn)?"Team 2":"Team 1"})},children:"End turn"})]})]}),(0,Ue.jsx)(Zn,{},"cards")]})};function tr(){return tr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},tr.apply(this,arguments)}var nr,rr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ir={},ar=ar||{},or=rr||self;function ur(){}function sr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function cr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var lr="closure_uid_"+(1e9*Math.random()>>>0),fr=0;function hr(e,t,n){return e.call.apply(e.bind,arguments)}function dr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function pr(e,t,n){return(pr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hr:dr).apply(null,arguments)}function vr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function yr(){this.s=this.s,this.o=this.o}yr.prototype.s=!1,yr.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,lr)&&e[lr]||(e[lr]=++fr))},yr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var gr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function br(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function kr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(sr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function wr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}wr.prototype.h=function(){this.defaultPrevented=!0};var xr=function(){if(!or.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{or.addEventListener("test",ur,t),or.removeEventListener("test",ur,t)}catch(n){}return e}();function Sr(e){return/^[\s\xa0]*$/.test(e)}var Er=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function _r(e,t){return e<t?-1:e>t?1:0}function Ir(){var e=or.navigator;return e&&(e=e.userAgent)?e:""}function Tr(e){return-1!=Ir().indexOf(e)}function Cr(e){return Cr[" "](e),e}function Nr(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}Cr[" "]=ur;var Dr,Ar=Tr("Opera"),Pr=Tr("Trident")||Tr("MSIE"),Or=Tr("Edge"),Rr=Or||Pr,Lr=Tr("Gecko")&&!(-1!=Ir().toLowerCase().indexOf("webkit")&&!Tr("Edge"))&&!(Tr("Trident")||Tr("MSIE"))&&!Tr("Edge"),Mr=-1!=Ir().toLowerCase().indexOf("webkit")&&!Tr("Edge");function Fr(){var e=or.document;return e?e.documentMode:void 0}e:{var jr="",Vr=function(){var e=Ir();return Lr?/rv:([^\);]+)(\)|;)/.exec(e):Or?/Edge\/([\d\.]+)/.exec(e):Pr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mr?/WebKit\/(\S+)/.exec(e):Ar?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vr&&(jr=Vr?Vr[1]:""),Pr){var zr=Fr();if(null!=zr&&zr>parseFloat(jr)){Dr=String(zr);break e}}Dr=jr}var Ur,Br={};if(or.document&&Pr){var qr=Fr();Ur=qr||(parseInt(Dr,10)||void 0)}else Ur=void 0;var Kr=Ur;function Gr(e,t){if(wr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lr){e:{try{Cr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Qr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gr.$.h.call(this)}}mr(Gr,wr);var Qr={2:"touch",3:"pen",4:"mouse"};Gr.prototype.h=function(){Gr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wr="closure_listenable_"+(1e6*Math.random()|0),Hr=0;function Xr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Hr,this.fa=this.ia=!1}function $r(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Yr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Jr(e){var t={};for(var n in e)t[n]=e[n];return t}var Zr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ei(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Zr.length;a++)n=Zr[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ti(e){this.src=e,this.g={},this.h=0}function ni(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=gr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($r(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ri(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}ti.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ri(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Xr(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var ii="closure_lm_"+(1e6*Math.random()|0),ai={};function oi(e,t,n,r,i){if(r&&r.once)return si(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)oi(e,t[a],n,r,i);return null}return n=vi(n),e&&e[Wr]?e.O(t,n,cr(r)?!!r.capture:!!r,i):ui(e,t,n,!1,r,i)}function ui(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=cr(i)?!!i.capture:!!i,u=di(e);if(u||(e[ii]=u=new ti(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=hi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)xr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(fi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function si(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)si(e,t[a],n,r,i);return null}return n=vi(n),e&&e[Wr]?e.P(t,n,cr(r)?!!r.capture:!!r,i):ui(e,t,n,!0,r,i)}function ci(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ci(e,t[a],n,r,i);else r=cr(r)?!!r.capture:!!r,n=vi(n),e&&e[Wr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ri(a=e.g[t],n,r,i))&&($r(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=di(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ri(t,n,r,i)),(n=-1<e?t[e]:null)&&li(n))}function li(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Wr])ni(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(fi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=di(t))?(ni(n,e),0==n.h&&(n.src=null,t[ii]=null)):$r(e)}}}function fi(e){return e in ai?ai[e]:ai[e]="on"+e}function hi(e,t){if(e.fa)e=!0;else{t=new Gr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&li(e),e=n.call(r,t)}return e}function di(e){return(e=e[ii])instanceof ti?e:null}var pi="__closure_events_fn_"+(1e9*Math.random()>>>0);function vi(e){return"function"===typeof e?e:(e[pi]||(e[pi]=function(t){return e.handleEvent(t)}),e[pi])}function mi(){yr.call(this),this.i=new ti(this),this.S=this,this.J=null}function yi(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new wr(t,e);else if(t instanceof wr)t.target=t.target||e;else{var i=t;ei(t=new wr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=gi(o,r,!0,t)&&i}if(i=gi(o=t.g=e,r,!0,t)&&i,i=gi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=gi(o=t.g=n[a],r,!1,t)&&i}function gi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&ni(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}mr(mi,yr),mi.prototype[Wr]=!0,mi.prototype.removeEventListener=function(e,t,n,r){ci(this,e,t,n,r)},mi.prototype.N=function(){if(mi.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$r(n[r]);delete t.g[e],t.h--}}this.J=null},mi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},mi.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var bi=or.JSON.stringify;function ki(){var e=Ci,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wi,xi=function(){function e(){y(this,e),this.h=this.g=null}return b(e,[{key:"add",value:function(e,t){var n=Si.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Si=new(function(){function e(t,n){y(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return b(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ei}),(function(e){return e.reset()})),Ei=function(){function e(){y(this,e),this.next=this.g=this.h=null}return b(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function _i(e){or.setTimeout((function(){throw e}),0)}function Ii(e,t){wi||function(){var e=or.Promise.resolve(void 0);wi=function(){e.then(Ni)}}(),Ti||(wi(),Ti=!0),Ci.add(e,t)}var Ti=!1,Ci=new xi;function Ni(){for(var e;e=ki();){try{e.h.call(e.g)}catch(n){_i(n)}var t=Si;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ti=!1}function Di(e,t){mi.call(this),this.h=e||1,this.g=t||or,this.j=pr(this.qb,this),this.l=Date.now()}function Ai(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Pi(e,t,n){if("function"===typeof e)n&&(e=pr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pr(e.handleEvent,e)}return 2147483647<Number(t)?-1:or.setTimeout(e,t||0)}function Oi(e){e.g=Pi((function(){e.g=null,e.i&&(e.i=!1,Oi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mr(Di,mi),(nr=Di.prototype).ga=!1,nr.T=null,nr.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yi(this,"tick"),this.ga&&(Ai(this),this.start()))}},nr.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nr.N=function(){Di.$.N.call(this),Ai(this),delete this.g};var Ri=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return b(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Oi(this)}},{key:"N",value:function(){tr(x(n.prototype),"N",this).call(this),this.g&&(or.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(yr);function Li(e){yr.call(this),this.h=e,this.g={}}mr(Li,yr);var Mi=[];function Fi(e,t,n,r){Array.isArray(n)||(n&&(Mi[0]=n.toString()),n=Mi);for(var i=0;i<n.length;i++){var a=oi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ji(e){Yr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&li(e)}),e),e.g={}}function Vi(){this.g=!0}function zi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return bi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Li.prototype.N=function(){Li.$.N.call(this),ji(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vi.prototype.Ea=function(){this.g=!1},Vi.prototype.info=function(){};var Ui={},Bi=null;function qi(){return Bi=Bi||new mi}function Ki(e){wr.call(this,Ui.Ta,e)}function Gi(e){var t=qi();yi(t,new Ki(t))}function Qi(e,t){wr.call(this,Ui.STAT_EVENT,e),this.stat=t}function Wi(e){var t=qi();yi(t,new Qi(t,e))}function Hi(e,t){wr.call(this,Ui.Ua,e),this.size=t}function Xi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return or.setTimeout((function(){e()}),t)}Ui.Ta="serverreachability",mr(Ki,wr),Ui.STAT_EVENT="statevent",mr(Qi,wr),Ui.Ua="timingevent",mr(Hi,wr);var $i={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yi={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ji(){}function Zi(e){return e.h||(e.h=e.i())}function ea(){}Ji.prototype.h=null;var ta,na={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ra(){wr.call(this,"d")}function ia(){wr.call(this,"c")}function aa(){}function oa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Li(this),this.P=sa,e=Rr?125:void 0,this.V=new Di(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new ua}function ua(){this.i=null,this.g="",this.h=!1}mr(ra,wr),mr(ia,wr),mr(aa,Ji),aa.prototype.g=function(){return new XMLHttpRequest},aa.prototype.i=function(){return{}},ta=new aa;var sa=45e3,ca={},la={};function fa(e,t,n){e.L=1,e.v=Da(_a(t)),e.s=n,e.S=!0,ha(e,null)}function ha(e,t){e.G=Date.now(),ma(e),e.A=_a(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),qa(n.i,"t",r),e.C=0,n=e.l.I,e.h=new ua,e.g=Go(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ri(pr(e.Pa,e,e.g),e.O)),Fi(e.U,e.g,"readystatechange",e.nb),t=e.I?Jr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Gi(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function da(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function pa(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=va(e,n))==la){4==t&&(e.o=4,Wi(14),i=!1),zi(e.j,e.m,null,"[Incomplete Response]");break}if(r==ca){e.o=4,Wi(15),zi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}zi(e.j,e.m,r,null),wa(e,r)}da(e)&&r!=la&&r!=ca&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fo(t),t.L=!0,Wi(11))):(zi(e.j,e.m,n,"[Invalid Chunked Response]"),ka(e),ba(e))}function va(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?la:(n=Number(t.substring(n,r)),isNaN(n)?ca:(r+=1)+n>t.length?la:(t=t.substr(r,n),e.C=r+n,t))}function ma(e){e.Y=Date.now()+e.P,ya(e,e.P)}function ya(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Xi(pr(e.lb,e),t)}function ga(e){e.B&&(or.clearTimeout(e.B),e.B=null)}function ba(e){0==e.l.H||e.J||zo(e.l,e)}function ka(e){ga(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,Ai(e.V),ji(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function wa(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ya(n.h,e)))if(!e.K&&Ya(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Vo(n),No(n)}Mo(n),Wi(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Xi(pr(n.ib,n),6e3));if(1>=$a(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else Bo(n,11)}else if((e.K||n.g==e)&&Vo(n),!Sr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ja(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Na(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=Ko(r,r.I?r.oa:null,r.Y),d.K){Za(r.h,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ga(p),ma(p)),r.g=d}else Lo(r);0<n.i.length&&Ao(n)}else"stop"!=a[0]&&"close"!=a[0]||Bo(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Bo(n,7):Co(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}Gi()}catch(a){}}function xa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(sr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(sr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(sr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(nr=oa.prototype).setTimeout=function(e){this.P=e},nr.nb=function(e){e=e.target;var t=this.M;t&&3==xo(e)?t.l():this.Pa(e)},nr.Pa=function(e){try{if(e==this.g)e:{var t=xo(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Rr||this.g&&(this.h.h||this.g.ja()||So(this.g)))){this.J||4!=t||7==n||Gi(),ga(this);var r=this.g.da();this.aa=r;t:if(da(this)){var i=So(this.g);e="";var a=i.length,o=4==xo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ka(this),ba(this);var u="";break t}this.h.i=new or.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sr(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Wi(12),ka(this),ba(this);break e}zi(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wa(this,r)}this.S?(pa(this,t,u),Rr&&this.i&&3==t&&(Fi(this.U,this.V,"tick",this.mb),this.V.start())):(zi(this.j,this.m,u,null),wa(this,u)),4==t&&ka(this),this.i&&!this.J&&(4==t?zo(this.l,this):(this.i=!1,ma(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),ka(this),ba(this)}}}catch(t){}},nr.mb=function(){if(this.g){var e=xo(this.g),t=this.g.ja();this.C<t.length&&(ga(this),pa(this,e,t),this.i&&4!=e&&ma(this))}},nr.cancel=function(){this.J=!0,ka(this)},nr.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Gi(),Wi(17)),ka(this),this.o=2,ba(this)):ya(this,this.Y-e)};var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ea(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ea){this.h=void 0!==t?t:e.h,Ia(this,e.j),this.s=e.s,this.g=e.g,Ta(this,e.m),this.l=e.l,t=e.i;var n=new Va;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ca(this,n),this.o=e.o}else e&&(n=String(e).match(Sa))?(this.h=!!t,Ia(this,n[1]||"",!0),this.s=Aa(n[2]||""),this.g=Aa(n[3]||"",!0),Ta(this,n[4]),this.l=Aa(n[5]||"",!0),Ca(this,n[6]||"",!0),this.o=Aa(n[7]||"")):(this.h=!!t,this.i=new Va(null,this.h))}function _a(e){return new Ea(e)}function Ia(e,t,n){e.j=n?Aa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ta(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ca(e,t,n){t instanceof Va?(e.i=t,function(e,t){t&&!e.j&&(za(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ua(this,t),qa(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Pa(t,Fa)),e.i=new Va(t,e.h))}function Na(e,t,n){e.i.set(t,n)}function Da(e){return Na(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Aa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pa(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ea.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pa(t,Ra,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pa(t,Ra,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pa(n,"/"==n.charAt(0)?Ma:La,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pa(n,ja)),e.join("")};var Ra=/[#\/\?@]/g,La=/[#\?:]/g,Ma=/[#\?]/g,Fa=/[#\?@]/g,ja=/#/g;function Va(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function za(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ua(e,t){za(e),t=Ka(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ba(e,t){return za(e),t=Ka(e,t),e.g.has(t)}function qa(e,t,n){Ua(e,t),0<n.length&&(e.i=null,e.g.set(Ka(e,t),br(n)),e.h+=n.length)}function Ka(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(nr=Va.prototype).add=function(e,t){za(this),this.i=null,e=Ka(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},nr.forEach=function(e,t){za(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},nr.sa=function(){za(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},nr.Z=function(e){za(this);var t=[];if("string"===typeof e)Ba(this,e)&&(t=t.concat(this.g.get(Ka(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},nr.set=function(e,t){return za(this),this.i=null,Ba(this,e=Ka(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},nr.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},nr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Ga=b((function e(t,n){y(this,e),this.h=t,this.g=n}));function Qa(e){this.l=e||Ha,or.PerformanceNavigationTiming?e=0<(e=or.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(or.g&&or.g.Ka&&or.g.Ka()&&or.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wa,Ha=10;function Xa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $a(e){return e.h?1:e.g?e.g.size:0}function Ya(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ja(e,t){e.g?e.g.add(t):e.h=t}function Za(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return br(e.i)}function to(){}function no(){this.g=new to}function ro(e,t,n){var r=n||"";try{xa(e,(function(e,n){var i=e;cr(e)&&(i=bi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function io(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ao(e){this.l=e.fc||null,this.j=e.ob||!1}function oo(e,t){mi.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=uo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qa.prototype.cancel=function(){if(this.i=eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},to.prototype.stringify=function(e){return or.JSON.stringify(e,void 0)},to.prototype.parse=function(e){return or.JSON.parse(e,void 0)},mr(ao,Ji),ao.prototype.g=function(){return new oo(this.l,this.j)},ao.prototype.i=(Wa={},function(){return Wa}),mr(oo,mi);var uo=0;function so(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function co(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lo(e)}function lo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(nr=oo.prototype).open=function(e,t){if(this.readyState!=uo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lo(this)},nr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||or).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},nr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,co(this)),this.readyState=uo},nr.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof or.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;so(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},nr.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?co(this):lo(this),3==this.readyState&&so(this)}},nr.Za=function(e){this.g&&(this.response=this.responseText=e,co(this))},nr.Ya=function(e){this.g&&(this.response=e,co(this))},nr.ka=function(){this.g&&co(this)},nr.setRequestHeader=function(e,t){this.v.append(e,t)},nr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},nr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fo=or.JSON.parse;function ho(e){mi.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=po,this.L=this.M=!1}mr(ho,mi);var po="",vo=/^https?$/i,mo=["POST","PUT"];function yo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,go(e),ko(e)}function go(e){e.F||(e.F=!0,yi(e,"complete"),yi(e,"error"))}function bo(e){if(e.h&&"undefined"!=typeof ar&&(!e.C[1]||4!=xo(e)||2!=e.da()))if(e.v&&4==xo(e))Pi(e.La,0,e);else if(yi(e,"readystatechange"),4==xo(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Sa)[1]||null;if(!a&&or.self&&or.self.location){var o=or.self.location.protocol;a=o.substr(0,o.length-1)}i=!vo.test(a?a.toLowerCase():"")}t=i}if(t)yi(e,"complete"),yi(e,"success");else{e.m=6;try{var u=2<xo(e)?e.g.statusText:""}catch(Zk){u=""}e.j=u+" ["+e.da()+"]",go(e)}}finally{ko(e)}}}function ko(e,t){if(e.g){wo(e);var n=e.g,r=e.C[0]?ur:null;e.g=null,e.C=null,t||yi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function wo(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(or.clearTimeout(e.A),e.A=null)}function xo(e){return e.g?e.g.readyState:0}function So(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case po:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Cu){return null}}function Eo(e){var t="";return Yr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function _o(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Eo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Na(e,t,n))}function Io(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function To(e){this.Ga=0,this.i=[],this.j=new Vi,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Io("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Io("baseRetryDelayMs",5e3,e),this.hb=Io("retryDelaySeedMs",1e4,e),this.eb=Io("forwardChannelMaxRetries",2,e),this.xa=Io("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new Qa(e&&e.concurrentRequestLimit),this.Ja=new no,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function Co(e){if(Do(e),3==e.H){var t=e.W++,n=_a(e.G);Na(n,"SID",e.J),Na(n,"RID",t),Na(n,"TYPE","terminate"),Oo(e,n),(t=new oa(e,e.j,t,void 0)).L=2,t.v=Da(_a(n)),n=!1,or.navigator&&or.navigator.sendBeacon&&(n=or.navigator.sendBeacon(t.v.toString(),"")),!n&&or.Image&&((new Image).src=t.v,n=!0),n||(t.g=Go(t.l,null),t.g.ha(t.v)),t.G=Date.now(),ma(t)}qo(e)}function No(e){e.g&&(Fo(e),e.g.cancel(),e.g=null)}function Do(e){No(e),e.u&&(or.clearTimeout(e.u),e.u=null),Vo(e),e.h.cancel(),e.m&&("number"===typeof e.m&&or.clearTimeout(e.m),e.m=null)}function Ao(e){Xa(e.h)||e.m||(e.m=!0,Ii(e.Na,e),e.C=0)}function Po(e,t){var n;n=t?t.m:e.W++;var r=_a(e.G);Na(r,"SID",e.J),Na(r,"RID",n),Na(r,"AID",e.V),Oo(e,r),e.o&&e.s&&_o(r,e.o,e.s),n=new oa(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Ro(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ja(e.h,n),fa(n,r,t)}function Oo(e,t){e.ma&&Yr(e.ma,(function(e,n){Na(t,n,e)})),e.l&&xa({},(function(e,n){Na(t,n,e)}))}function Ro(e,t,n){n=Math.min(e.i.length,n);var r=e.l?pr(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ro(l,o,"req"+c+"_")}catch(Vu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function Lo(e){e.g||e.u||(e.ba=1,Ii(e.Ma,e),e.A=0)}function Mo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Xi(pr(e.Ma,e),Uo(e,e.A)),e.A++,!0)}function Fo(e){null!=e.B&&(or.clearTimeout(e.B),e.B=null)}function jo(e){e.g=new oa(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_a(e.wa);Na(t,"RID","rpc"),Na(t,"SID",e.J),Na(t,"CI",e.M?"0":"1"),Na(t,"AID",e.V),Na(t,"TYPE","xmlhttp"),Oo(e,t),e.o&&e.s&&_o(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=Da(_a(t)),n.s=null,n.S=!0,ha(n,e)}function Vo(e){null!=e.v&&(or.clearTimeout(e.v),e.v=null)}function zo(e,t){var n=null;if(e.g==t){Vo(e),Fo(e),e.g=null;var r=2}else{if(!Ya(e.h,t))return;n=t.F,Za(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;yi(r=qi(),new Hi(r,n)),Ao(e)}else Lo(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!($a(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Xi(pr(e.Na,e,t),Uo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mo(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Bo(e,5);break;case 4:Bo(e,10);break;case 3:Bo(e,6);break;default:Bo(e,2)}}function Uo(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function Bo(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=pr(e.pb,e);n||(n=new Ea("//www.google.com/images/cleardot.gif"),or.location&&"http"==or.location.protocol||Ia(n,"https"),Da(n)),function(e,t){var n=new Vi;if(or.Image){var r=new Image;r.onload=vr(io,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vr(io,n,r,"TestLoadImage: error",!1,t),r.onabort=vr(io,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vr(io,n,r,"TestLoadImage: timeout",!1,t),or.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wi(2);e.H=0,e.l&&e.l.za(t),qo(e),Do(e)}function qo(e){if(e.H=0,e.pa=[],e.l){var t=eo(e.h);0==t.length&&0==e.i.length||(kr(e.pa,t),kr(e.pa,e.i),e.h.i.length=0,br(e.i),e.i.length=0),e.l.ya()}}function Ko(e,t,n){var r=n instanceof Ea?_a(n):new Ea(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ta(r,r.m);else{var i=or.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Ea(null,void 0);r&&Ia(a,r),t&&(a.g=t),i&&Ta(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Na(r,n,t),Na(r,"VER",e.qa),Oo(e,r),r}function Go(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ho(new ao({ob:!0})):new ho(e.va)).Oa(e.I),t}function Qo(){}function Wo(){if(Pr&&!(10<=Number(Kr)))throw Error("Environmental error: no available transport.")}function Ho(e,t){mi.call(this),this.g=new To(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Sr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Sr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yo(this)}function Xo(e){ra.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $o(){ia.call(this),this.status=1}function Yo(e){this.g=e}function Jo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Zo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function eu(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(nr=ho.prototype).Oa=function(e){this.M=e},nr.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ta.g(),this.C=this.u?Zi(this.u):Zi(ta),this.g.onreadystatechange=pr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void yo(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=or.FormData&&e instanceof or.FormData,!(0<=gr(mo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=C(n);try{for(c.s();!(s=c.n()).done;){var l=p(s.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wo(this),0<this.B&&((this.L=function(e){return Pr&&Nr(Br,9,(function(){for(var e=0,t=Er(String(Dr)).split("."),n=Er("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_r(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_r(0==a[2].length,0==o[2].length)||_r(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pr(this.ua,this)):this.A=Pi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){yo(this,u)}},nr.ua=function(){"undefined"!=typeof ar&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yi(this,"timeout"),this.abort(8))},nr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,yi(this,"complete"),yi(this,"abort"),ko(this))},nr.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ko(this,!0)),ho.$.N.call(this)},nr.La=function(){this.s||(this.G||this.v||this.l?bo(this):this.kb())},nr.kb=function(){bo(this)},nr.da=function(){try{return 2<xo(this)?this.g.status:-1}catch(Wa){return-1}},nr.ja=function(){try{return this.g?this.g.responseText:""}catch(Wa){return""}},nr.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fo(t)}},nr.Ia=function(){return this.m},nr.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(nr=To.prototype).qa=8,nr.H=1,nr.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new oa(this,this.j,e,void 0),n=this.s;if(this.U&&(n?ei(n=Jr(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ro(this,t,r),Na(i=_a(this.G),"RID",e),Na(i,"CVER",22),this.F&&Na(i,"X-HTTP-Session-Id",this.F),Oo(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Eo(n)))+"&"+r:this.o&&_o(i,this.o,n)),Ja(this.h,t),this.bb&&Na(i,"TYPE","init"),this.P?(Na(i,"$req",r),Na(i,"SID","null"),t.ba=!0,fa(t,i,null)):fa(t,i,r),this.H=2}}else 3==this.H&&(e?Po(this,e):0==this.i.length||Xa(this.h)||Po(this))},nr.Ma=function(){if(this.u=null,jo(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Xi(pr(this.jb,this),e)}},nr.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Wi(10),No(this),jo(this))},nr.ib=function(){null!=this.v&&(this.v=null,No(this),Mo(this),Wi(19))},nr.pb=function(e){e?(this.j.info("Successfully pinged google.com"),Wi(2)):(this.j.info("Failed to ping google.com"),Wi(1))},(nr=Qo.prototype).Ba=function(){},nr.Aa=function(){},nr.za=function(){},nr.ya=function(){},nr.Va=function(){},Wo.prototype.g=function(e,t){return new Ho(e,t)},mr(Ho,mi),Ho.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;Wi(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Ko(e,null,e.Y),Ao(e)},Ho.prototype.close=function(){Co(this.g)},Ho.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=bi(e),e=n);t.i.push(new Ga(t.fb++,e)),3==t.H&&Ao(t)},Ho.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,Ho.$.N.call(this)},mr(Xo,ra),mr($o,ia),mr(Yo,Qo),Yo.prototype.Ba=function(){yi(this.g,"a")},Yo.prototype.Aa=function(e){yi(this.g,new Xo(e))},Yo.prototype.za=function(e){yi(this.g,new $o)},Yo.prototype.ya=function(){yi(this.g,"b")},mr(Jo,(function(){this.blockSize=-1})),Jo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Jo.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Zo(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Zo(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Zo(this,r),i=0;break}}this.h=i,this.i+=t},Jo.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var tu={};function nu(e){return-128<=e&&128>e?Nr(tu,e,(function(e){return new eu([0|e],0>e?-1:0)})):new eu([0|e],0>e?-1:0)}function ru(e){if(isNaN(e)||!isFinite(e))return au;if(0>e)return lu(ru(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=iu;return new eu(t,0)}var iu=4294967296,au=nu(0),ou=nu(1),uu=nu(16777216);function su(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function cu(e){return-1==e.h}function lu(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new eu(n,~e.h).add(ou)}function fu(e,t){return e.add(lu(t))}function hu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function du(e,t){this.g=e,this.h=t}function pu(e,t){if(su(t))throw Error("division by zero");if(su(e))return new du(au,au);if(cu(e))return t=pu(lu(e),t),new du(lu(t.g),lu(t.h));if(cu(t))return t=pu(e,lu(t)),new du(lu(t.g),t.h);if(30<e.g.length){if(cu(e)||cu(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ou,r=t;0>=r.X(e);)n=vu(n),r=vu(r);var i=mu(n,1),a=mu(r,1);for(r=mu(r,2),n=mu(n,2);!su(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=mu(r,1),n=mu(n,1)}return t=fu(e,i.R(t)),new du(i,t)}for(i=au;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=ru(n)).R(t);cu(o)||0<o.X(e);)o=(a=ru(n-=r)).R(t);su(a)&&(a=ou),i=i.add(a),e=fu(e,o)}return new du(i,e)}function vu(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new eu(n,e.h)}function mu(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new eu(i,e.h)}(nr=eu.prototype).ea=function(){if(cu(this))return-lu(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:iu+r)*t,t*=iu}return e},nr.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(su(this))return"0";if(cu(this))return"-"+lu(this).toString(e);for(var t=ru(Math.pow(e,6)),n=this,r="";;){var i=pu(n,t).g,a=((0<(n=fu(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(su(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},nr.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},nr.X=function(e){return cu(e=fu(this,e))?-1:su(e)?0:1},nr.abs=function(){return cu(this)?lu(this):this},nr.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new eu(n,-2147483648&n[n.length-1]?-1:0)},nr.R=function(e){if(su(this)||su(e))return au;if(cu(this))return cu(e)?lu(this).R(lu(e)):lu(lu(this).R(e));if(cu(e))return lu(this.R(lu(e)));if(0>this.X(uu)&&0>e.X(uu))return ru(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,hu(n,2*r+2*i),n[2*r+2*i+1]+=a*s,hu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,hu(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,hu(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new eu(n,0)},nr.gb=function(e){return pu(this,e).h},nr.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new eu(n,this.h&e.h)},nr.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new eu(n,this.h|e.h)},nr.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new eu(n,this.h^e.h)},Wo.prototype.createWebChannel=Wo.prototype.g,Ho.prototype.send=Ho.prototype.u,Ho.prototype.open=Ho.prototype.m,Ho.prototype.close=Ho.prototype.close,$i.NO_ERROR=0,$i.TIMEOUT=8,$i.HTTP_ERROR=6,Yi.COMPLETE="complete",ea.EventType=na,na.OPEN="a",na.CLOSE="b",na.ERROR="c",na.MESSAGE="d",mi.prototype.listen=mi.prototype.O,ho.prototype.listenOnce=ho.prototype.P,ho.prototype.getLastError=ho.prototype.Sa,ho.prototype.getLastErrorCode=ho.prototype.Ia,ho.prototype.getStatus=ho.prototype.da,ho.prototype.getResponseJson=ho.prototype.Wa,ho.prototype.getResponseText=ho.prototype.ja,ho.prototype.send=ho.prototype.ha,ho.prototype.setWithCredentials=ho.prototype.Oa,Jo.prototype.digest=Jo.prototype.l,Jo.prototype.reset=Jo.prototype.reset,Jo.prototype.update=Jo.prototype.j,eu.prototype.add=eu.prototype.add,eu.prototype.multiply=eu.prototype.R,eu.prototype.modulo=eu.prototype.gb,eu.prototype.compare=eu.prototype.X,eu.prototype.toNumber=eu.prototype.ea,eu.prototype.toString=eu.prototype.toString,eu.prototype.getBits=eu.prototype.D,eu.fromNumber=ru,eu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lu(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ru(Math.pow(n,8)),i=au,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=ru(Math.pow(n,o)),i=i.R(o).add(ru(u))):i=(i=i.R(r)).add(ru(u))}return i};var yu=ir.createWebChannelTransport=function(){return new Wo},gu=ir.getStatEventTarget=function(){return qi()},bu=ir.ErrorCode=$i,ku=ir.EventType=Yi,wu=ir.Event=Ui,xu=ir.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Su=ir.FetchXmlHttpFactory=ao,Eu=ir.WebChannel=ea,_u=ir.XhrIo=ho,Iu=ir.Md5=Jo,Tu=ir.Integer=eu,Cu="@firebase/firestore",Nu=function(){function e(t){y(this,e),this.uid=t}return b(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Nu.UNAUTHENTICATED=new Nu(null),Nu.GOOGLE_CREDENTIALS=new Nu("google-credentials-uid"),Nu.FIRST_PARTY=new Nu("first-party-uid"),Nu.MOCK_USER=new Nu("mock-user");var Du="9.21.0",Au=new Tt("@firebase/firestore");function Pu(){return Au.logLevel}function Ou(e){if(Au.logLevel<=kt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mu);Au.debug.apply(Au,["Firestore (".concat(Du,"): ").concat(e)].concat(m(i)))}}function Ru(e){if(Au.logLevel<=kt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mu);Au.error.apply(Au,["Firestore (".concat(Du,"): ").concat(e)].concat(m(i)))}}function Lu(e){if(Au.logLevel<=kt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Mu);Au.warn.apply(Au,["Firestore (".concat(Du,"): ").concat(e)].concat(m(i)))}}function Mu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Fu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Du,") INTERNAL ASSERTION FAILED: ")+e;throw Ru(t),new Error(t)}function ju(e,t){e||Fu()}function Vu(e,t){return e}var zu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Uu=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return b(n)}(rt),Bu=b((function e(){var t=this;y(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),qu=b((function e(t,n){y(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ku=function(){function e(){y(this,e)}return b(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Gu=function(){function e(t){y(this,e),this.token=t,this.changeListener=null}return b(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Qu=function(){function e(t){y(this,e),this.t=t,this.currentUser=Nu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return b(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Bu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Bu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ou("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ou("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ou("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ju("string"==typeof n.accessToken),new qu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ju(null===e||"string"==typeof e),new Nu(e)}}]),e}(),Wu=function(){function e(t,n,r){y(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Nu.FIRST_PARTY,this.g=new Map}return b(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Hu=function(){function e(t,n,r){y(this,e),this.h=t,this.l=n,this.m=r}return b(e,[{key:"getToken",value:function(){return Promise.resolve(new Wu(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Xu=b((function e(t){y(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),$u=function(){function e(t){y(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return b(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ou("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Ou("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ou("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Ou("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ju("string"==typeof t.token),e.T=t.token,new Xu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Yu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ju=function(){function e(){y(this,e)}return b(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Yu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Zu(e,t){return e<t?-1:e>t?1:0}function es(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ts(e){return e+"\0"}var ns=function(){function e(t,n){if(y(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Uu(zu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Uu(zu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Uu(zu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Uu(zu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return b(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Zu(this.nanoseconds,e.nanoseconds):Zu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),rs=function(){function e(t){y(this,e),this.timestamp=t}return b(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ns(0,0))}},{key:"max",value:function(){return new e(new ns(253402300799,999999999))}}]),e}(),is=function(){function e(t,n,r){y(this,e),void 0===n?n=0:n>t.length&&Fu(),void 0===r?r=t.length-n:r>t.length-n&&Fu(),this.segments=t,this.offset=n,this.len=r}return b(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),as=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Uu(zu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,m(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(is),os=/^[_a-zA-Z][_a-zA-Z0-9]*$/,us=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return os.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Uu(zu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Uu(zu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Uu(zu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Uu(zu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(is),ss=function(){function e(t){y(this,e),this.path=t}return b(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===as.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(as.fromString(t))}},{key:"fromName",value:function(t){return new e(as.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(as.emptyPath())}},{key:"comparator",value:function(e,t){return as.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new as(t.slice()))}}]),e}(),cs=b((function e(t,n,r,i){y(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ls(e){return e.fields.find((function(e){return 2===e.kind}))}function fs(e){return e.fields.filter((function(e){return 2!==e.kind}))}cs.UNKNOWN_ID=-1;var hs=b((function e(t,n){y(this,e),this.fieldPath=t,this.kind=n}));var ds=function(){function e(t,n){y(this,e),this.sequenceNumber=t,this.offset=n}return b(e,null,[{key:"empty",value:function(){return new e(0,ms.min())}}]),e}();function ps(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rs.fromTimestamp(1e9===r?new ns(n+1,0):new ns(n,r));return new ms(i,ss.empty(),t)}function vs(e){return new ms(e.readTime,e.key,-1)}var ms=function(){function e(t,n,r){y(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return b(e,null,[{key:"min",value:function(){return new e(rs.min(),ss.empty(),-1)}},{key:"max",value:function(){return new e(rs.max(),ss.empty(),-1)}}]),e}();function ys(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ss.comparator(e.documentKey,t.documentKey))?n:Zu(e.largestBatchId,t.largestBatchId)}var gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bs=function(){function e(){y(this,e),this.onCommittedListeners=[]}return b(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ks(e){return ws.apply(this,arguments)}function ws(){return ws=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===zu.FAILED_PRECONDITION&&t.message===gs){e.next=2;break}throw t;case 2:Ou("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ws.apply(this,arguments)}var xs=function(){function e(t){var n=this;y(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return b(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Fu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ss=function(){function e(t,n){var r=this;y(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Bu,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Is(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=As(e.target.error);r.R.reject(new Is(t,n))}}return b(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Ou("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Cs(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Is(n,t)}}}]),e}(),Es=function(){function e(t,n,r){y(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(et())&&Ru("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return b(e,[{key:"O",value:function(){var e=vt(dt().mark((function e(t){var n=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ou("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Is(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Uu(zu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Uu(zu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Is(t,n))},i.onupgradeneeded=function(e){Ou("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.$(t,i.transaction,e.oldVersion,n.version).next((function(){Ou("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=vt(dt().mark((function e(t,n,r,i){var a,o,u,s,c=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=dt().mark((function e(){var n,u,s,l;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Ss.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),xs.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Ou("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ou("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!nt())return!1;if(e.C())return!0;var t=et(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/CodeNames-game",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),_s=function(){function e(t){y(this,e),this.L=t,this.q=!1,this.U=null}return b(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Ns(this.L.delete())}}]),e}(),Is=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,zu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return b(n)}(Uu);function Ts(e){return"IndexedDbTransactionError"===e.name}var Cs=function(){function e(t){y(this,e),this.store=t}return b(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ou("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ou("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ns(n)}},{key:"add",value:function(e){return Ou("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ns(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ou("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ou("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))}},{key:"count",value:function(){return Ou("SimpleDb","COUNT",this.store.name),Ns(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new xs((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new xs((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Ou("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new xs((function(n,r){t.onerror=function(e){var t=As(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new xs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new _s(i),o=t(i.primaryKey,i.value,a);if(o instanceof xs){var u=o.catch((function(e){return a.done(),xs.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return xs.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ns(e){return new xs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=As(e.target.error);n(t)}}))}var Ds=!1;function As(e){var t=Es.S(et());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Uu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ds||(Ds=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ps=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return b(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Ou("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Ou,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ts(e.t4)){e.next=17;break}Ou("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ks(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Os=function(){function e(t,n){y(this,e),this.localStore=t,this.persistence=n}return b(e,[{key:"nt",value:function(){var e=vt(dt().mark((function e(){var t,n=this,r=arguments;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return xs.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Ou("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Ou("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=vs(t);ys(r,n)>0&&(n=r)})),new ms(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Rs=function(){function e(t,n){var r=this;y(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return b(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Ls(e){return null==e}function Ms(e){return 0===e&&1/e==-1/0}function Fs(e){return"number"==typeof e&&Number.isInteger(e)&&!Ms(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function js(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zs(t)),t=Vs(e.get(n),t);return zs(t)}function Vs(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function zs(e){return e+"\x01\x01"}function Us(e){var t=e.length;if(ju(t>=2),2===t)return ju("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),as.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Fu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Fu()}a=o+2}return new as(r)}Rs.ct=-1;var Bs=["userId","batchId"];function qs(e,t){return[e,js(t)]}function Ks(e,t,n){return[e,js(t),n]}var Gs={},Qs=["prefixPath","collectionGroup","readTime","documentId"],Ws=["prefixPath","collectionGroup","documentId"],Hs=["collectionGroup","readTime","prefixPath","documentId"],Xs=["canonicalId","targetId"],$s=["targetId","path"],Ys=["path","targetId"],Js=["collectionId","parent"],Zs=["indexId","uid"],ec=["uid","sequenceNumber"],tc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nc=["indexId","uid","orderedDocumentKey"],rc=["userId","collectionPath","documentId"],ic=["userId","collectionPath","largestBatchId"],ac=["userId","collectionGroup","largestBatchId"],oc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),uc=[].concat(m(oc),["documentOverlays"]),sc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cc=sc,lc=[].concat(cc,["indexConfiguration","indexState","indexEntries"]),fc=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return b(n)}(bs);function hc(e,t){var n=Vu(e);return Es.M(n.at,t)}function dc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function vc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var mc=function(){function e(t,n){y(this,e),this.comparator=t,this.root=n||gc.EMPTY}return b(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,gc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,gc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new yc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new yc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new yc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new yc(this.root,e,this.comparator,!0)}}]),e}(),yc=function(){function e(t,n,r,i){y(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return b(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),gc=function(){function e(t,n,r,i,a){y(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return b(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Fu();if(this.right.isRed())throw Fu();var e=this.left.check();if(e!==this.right.check())throw Fu();return e+(this.isRed()?0:1)}}]),e}();gc.EMPTY=null,gc.RED=!0,gc.BLACK=!1,gc.EMPTY=new(function(){function e(){y(this,e),this.size=0}return b(e,[{key:"key",get:function(){throw Fu()}},{key:"value",get:function(){throw Fu()}},{key:"color",get:function(){throw Fu()}},{key:"left",get:function(){throw Fu()}},{key:"right",get:function(){throw Fu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new gc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bc=function(){function e(t){y(this,e),this.comparator=t,this.data=new mc(this.comparator)}return b(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new kc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new kc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),kc=function(){function e(t){y(this,e),this.iter=t}return b(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function wc(e){return e.hasNext()?e.getNext():void 0}var xc=function(){function e(t){y(this,e),this.fields=t,t.sort(us.comparator)}return b(e,[{key:"unionWith",value:function(t){var n,r=new bc(us.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=C(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return es(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Sc=function(e){w(n,e);var t=_(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return b(n)}(T(Error));var Ec=function(e){function t(e){y(this,t),this.binaryString=e}return b(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Zu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sc("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Ec.EMPTY_BYTE_STRING=new Ec("");var _c=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(e){if(ju(!!e),"string"==typeof e){var t=0,n=_c.exec(e);if(ju(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Tc(e.seconds),nanos:Tc(e.nanos)}}function Tc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Cc(e){return"string"==typeof e?Ec.fromBase64String(e):Ec.fromUint8Array(e)}function Nc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dc(e){var t=e.mapValue.fields.__previous_value__;return Nc(t)?Dc(t):t}function Ac(e){var t=Ic(e.mapValue.fields.__local_write_time__.timestampValue);return new ns(t.seconds,t.nanos)}var Pc=b((function e(t,n,r,i,a,o,u,s){y(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Oc=function(){function e(t,n){y(this,e),this.projectId=t,this.database=n||"(default)"}return b(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lc={nullValue:"NULL_VALUE"};function Mc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nc(e)?4:$c(e)?9007199254740991:10:Fu()}function Fc(e,t){if(e===t)return!0;var n=Mc(e);if(n!==Mc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ac(e).isEqual(Ac(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ic(e.timestampValue),r=Ic(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Cc(e.bytesValue).isEqual(Cc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Tc(e.geoPointValue.latitude)===Tc(t.geoPointValue.latitude)&&Tc(e.geoPointValue.longitude)===Tc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Tc(e.integerValue)===Tc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Tc(e.doubleValue),r=Tc(t.doubleValue);return n===r?Ms(n)===Ms(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return es(e.arrayValue.values||[],t.arrayValue.values||[],Fc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(dc(n)!==dc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fc(n[i],r[i])))return!1;return!0}(e,t);default:return Fu()}}function jc(e,t){return void 0!==(e.values||[]).find((function(e){return Fc(e,t)}))}function Vc(e,t){if(e===t)return 0;var n=Mc(e),r=Mc(t);if(n!==r)return Zu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Zu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Tc(e.integerValue||e.doubleValue),r=Tc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zc(e.timestampValue,t.timestampValue);case 4:return zc(Ac(e),Ac(t));case 5:return Zu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Cc(e),r=Cc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Zu(n[i],r[i]);if(0!==a)return a}return Zu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Zu(Tc(e.latitude),Tc(t.latitude));return 0!==n?n:Zu(Tc(e.longitude),Tc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Vc(n[i],r[i]);if(a)return a}return Zu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rc.mapValue&&t===Rc.mapValue)return 0;if(e===Rc.mapValue)return 1;if(t===Rc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Zu(r[o],a[o]);if(0!==u)return u;var s=Vc(n[r[o]],i[a[o]]);if(0!==s)return s}return Zu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Fu()}}function zc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Zu(e,t);var n=Ic(e),r=Ic(t),i=Zu(n.seconds,r.seconds);return 0!==i?i:Zu(n.nanos,r.nanos)}function Uc(e){return Bc(e)}function Bc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ic(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Cc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ss.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Bc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Bc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Fu();var t,n}function qc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Kc(e){return!!e&&"integerValue"in e}function Gc(e){return!!e&&"arrayValue"in e}function Qc(e){return!!e&&"nullValue"in e}function Wc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hc(e){return!!e&&"mapValue"in e}function Xc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return pc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Xc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Xc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function $c(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yc(e){return"nullValue"in e?Lc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?qc(Oc.empty(),ss.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Fu()}function Jc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?qc(Oc.empty(),ss.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Rc:Fu()}function Zc(e,t){var n=Vc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function el(e,t){var n=Vc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var tl=function(){function e(t){y(this,e),this.value=t}return b(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xc(t)}},{key:"setAll",value:function(e){var t=this,n=us.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Xc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Fc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){pc(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Xc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function nl(e){var t=[];return pc(e.fields,(function(e,n){var r=new us([e]);if(Hc(n)){var i=nl(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new xc(t)}var rl=function(){function e(t,n,r,i,a,o,u){y(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return b(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(rs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=tl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=tl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=rs.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,rs.min(),rs.min(),rs.min(),tl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,rs.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,rs.min(),rs.min(),tl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,rs.min(),rs.min(),tl.empty(),2)}}]),e}(),il=b((function e(t,n){y(this,e),this.position=t,this.inclusive=n}));function al(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ss.comparator(ss.fromName(o.referenceValue),n.key):Vc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ol(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Fc(e.position[n],t.position[n]))return!1;return!0}var ul=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";y(this,e),this.field=t,this.dir=n}));function sl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var cl=b((function e(){y(this,e)})),ll=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Vc(t,this.value)):null!==t&&Mc(this.value)===Mc(t)&&this.matchesComparison(Vc(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Fu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new kl(e,t,r):"array-contains"===t?new El(e,r):"in"===t?new _l(e,r):"not-in"===t?new Il(e,r):"array-contains-any"===t?new Tl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new wl(e,n):new xl(e,n)}}]),n}(cl),fl=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return b(n,[{key:"matches",value:function(e){return hl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=C(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(cl);function hl(e){return"and"===e.op}function dl(e){return"or"===e.op}function pl(e){return vl(e)&&hl(e)}function vl(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function ml(e){if(e instanceof ll)return e.field.canonicalString()+e.op.toString()+Uc(e.value);if(pl(e))return e.filters.map((function(e){return ml(e)})).join(",");var t=e.filters.map((function(e){return ml(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function yl(e,t){return e instanceof ll?function(e,t){return t instanceof ll&&e.op===t.op&&e.field.isEqual(t.field)&&Fc(e.value,t.value)}(e,t):e instanceof fl?function(e,t){return t instanceof fl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&yl(n,t.filters[r])}),!0)}(e,t):void Fu()}function gl(e,t){var n=e.filters.concat(t);return fl.create(n,e.op)}function bl(e){return e instanceof ll?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Uc(e.value))}(e):e instanceof fl?function(e){return e.op.toString()+" {"+e.getFilters().map(bl).join(" ,")+"}"}(e):"Filter"}var kl=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).key=ss.fromName(i.referenceValue),a}return b(n,[{key:"matches",value:function(e){var t=ss.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(ll),wl=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"in",r)).keys=Sl("in",r),i}return b(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ll),xl=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"not-in",r)).keys=Sl("not-in",r),i}return b(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ll);function Sl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ss.fromName(e.referenceValue)}))}var El=function(e){w(n,e);var t=_(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains",r)}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Gc(t)&&jc(t.arrayValue,this.value)}}]),n}(ll),_l=function(e){w(n,e);var t=_(n);function n(e,r){return y(this,n),t.call(this,e,"in",r)}return b(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&jc(this.value.arrayValue,t)}}]),n}(ll),Il=function(e){w(n,e);var t=_(n);function n(e,r){return y(this,n),t.call(this,e,"not-in",r)}return b(n,[{key:"matches",value:function(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!jc(this.value.arrayValue,t)}}]),n}(ll),Tl=function(e){w(n,e);var t=_(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains-any",r)}return b(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Gc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return jc(t.value.arrayValue,e)}))}}]),n}(ll),Cl=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;y(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Nl(e){return new Cl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Dl(e){var t=Vu(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return ml(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ls(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Uc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Uc(e)})).join(",")),t.ft=n}return t.ft}function Al(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!sl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!yl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ol(e.startAt,t.startAt)&&ol(e.endAt,t.endAt)}function Pl(e){return ss.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ol(e,t){return e.filters.filter((function(e){return e instanceof ll&&e.field.isEqual(t)}))}function Rl(e,t,n){var r,i=Lc,a=!0,o=C(Ol(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Lc,c=!0;switch(u.op){case"<":case"<=":s=Yc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Lc}Zc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Zc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ll(e,t,n){var r,i=Rc,a=!0,o=C(Ol(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Rc,c=!0;switch(u.op){case">=":case">":s=Jc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Rc}el({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];el({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Ml=b((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;y(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function Fl(e,t,n,r,i,a,o,u){return new Ml(e,t,n,r,i,a,o,u)}function jl(e){return new Ml(e)}function Vl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ul(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Bl(e){return null!==e.collectionGroup}function ql(e){var t=Vu(e);if(null===t.dt){t.dt=[];var n=Ul(t),r=zl(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new ul(n)),t.dt.push(new ul(us.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new ul(us.keyField(),s))}}}return t.dt}function Kl(e){var t=Vu(e);if(!t._t)if("F"===t.limitType)t._t=Nl(t.path,t.collectionGroup,ql(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(ql(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ul(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new il(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new il(t.startAt.position,t.startAt.inclusive):null;t._t=Nl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function Gl(e,t){t.getFirstInequalityField(),Ul(e);var n=e.filters.concat([t]);return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ql(e,t,n){return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wl(e,t){return Al(Kl(e),Kl(t))&&e.limitType===t.limitType}function Hl(e){return"".concat(Dl(Kl(e)),"|lt:").concat(e.limitType)}function Xl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return bl(e)})).join(", "),"]")),Ls(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Uc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Uc(e)})).join(",")),"Target(".concat(t,")")}(Kl(e)),"; limitType=").concat(e.limitType,")")}function $l(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ss.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(ql(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=al(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ql(e),t))&&!(e.endAt&&!function(e,t,n){var r=al(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ql(e),t))}(e,t)}function Yl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jl(e){return function(t,n){var r,i=!1,a=C(ql(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Zl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Zl(e,t,n){var r=e.field.isKeyField()?ss.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vc(r,i):Fu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Fu()}}var ef=function(){function e(t,n){y(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return b(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=p(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){pc(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=p(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return vc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),tf=new mc(ss.comparator);function nf(){return tf}var rf=new mc(ss.comparator);function af(){for(var e=rf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function of(e){var t=rf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function uf(){return cf()}function sf(){return cf()}function cf(){return new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var lf=new mc(ss.comparator),ff=new bc(ss.comparator);function hf(){for(var e=ff,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var df=new bc(Zu);function pf(){return df}function vf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ms(t)?"-0":t}}function mf(e){return{integerValue:""+e}}function yf(e,t){return Fs(t)?mf(t):vf(e,t)}var gf=b((function e(){y(this,e),this._=void 0}));function bf(e,t,n){return e instanceof xf?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nc(t)&&(t=Dc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Sf?Ef(e,t):e instanceof _f?If(e,t):function(e,t){var n=wf(e,t),r=Cf(n)+Cf(e.wt);return Kc(n)&&Kc(e.wt)?mf(r):vf(e.serializer,r)}(e,t)}function kf(e,t,n){return e instanceof Sf?Ef(e,t):e instanceof _f?If(e,t):n}function wf(e,t){return e instanceof Tf?Kc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var xf=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n)}(gf),Sf=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return b(n)}(gf);function Ef(e,t){var n,r=Nf(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Fc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var _f=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return b(n)}(gf);function If(e,t){var n,r=Nf(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Fc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Tf=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).serializer=e,i.wt=r,i}return b(n)}(gf);function Cf(e){return Tc(e.integerValue||e.doubleValue)}function Nf(e){return Gc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Df=b((function e(t,n){y(this,e),this.field=t,this.transform=n}));var Af=b((function e(t,n){y(this,e),this.version=t,this.transformResults=n})),Pf=function(){function e(t,n){y(this,e),this.updateTime=t,this.exists=n}return b(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Of(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Rf=b((function e(){y(this,e)}));function Lf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Wf(e.key,Pf.none()):new zf(e.key,e.data,Pf.none());var n,r=e.data,i=tl.empty(),a=new bc(us.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Uf(e.key,i,new xc(a.toArray()),Pf.none())}function Mf(e,t,n){e instanceof zf?function(e,t,n){var r=e.value.clone(),i=qf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Uf?function(e,t,n){if(Of(e.precondition,t)){var r=qf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ff(e,t,n,r){return e instanceof zf?function(e,t,n,r){if(!Of(e.precondition,t))return n;var i=e.value.clone(),a=Kf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Uf?function(e,t,n,r){if(!Of(e.precondition,t))return n;var i=Kf(e.fieldTransforms,r,t),a=t.data;return a.setAll(Bf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Of(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jf(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=wf(a.transform,o||null);null!=u&&(null===r&&(r=tl.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Vf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&es(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Sf&&t instanceof Sf||e instanceof _f&&t instanceof _f?es(e.elements,t.elements,Fc):e instanceof Tf&&t instanceof Tf?Fc(e.wt,t.wt):e instanceof xf&&t instanceof xf}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var zf=function(e){w(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return y(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Uf=function(e){w(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return y(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return b(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Rf);function Bf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function qf(e,t,n){var r=new Map;ju(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,kf(o,u,n[i]))}return r}function Kf(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,bf(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Gf,Qf,Wf=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Hf=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return b(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Xf=function(){function e(t,n,r,i){y(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return b(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Mf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Ff(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Ff(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=sf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Lf(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(rs.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),hf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&es(this.mutations,e.mutations,(function(e,t){return Vf(e,t)}))&&es(this.baseMutations,e.baseMutations,(function(e,t){return Vf(e,t)}))}}]),e}(),$f=function(){function e(t,n,r,i){y(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return b(e,null,[{key:"from",value:function(t,n,r){ju(t.mutations.length===r.length);for(var i=lf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Yf=function(){function e(t,n){y(this,e),this.largestBatchId=t,this.mutation=n}return b(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Jf=b((function e(t,n){y(this,e),this.count=t,this.unchangedNames=n}));function Zf(e){switch(e){default:return Fu();case zu.CANCELLED:case zu.UNKNOWN:case zu.DEADLINE_EXCEEDED:case zu.RESOURCE_EXHAUSTED:case zu.INTERNAL:case zu.UNAVAILABLE:case zu.UNAUTHENTICATED:return!1;case zu.INVALID_ARGUMENT:case zu.NOT_FOUND:case zu.ALREADY_EXISTS:case zu.PERMISSION_DENIED:case zu.FAILED_PRECONDITION:case zu.ABORTED:case zu.OUT_OF_RANGE:case zu.UNIMPLEMENTED:case zu.DATA_LOSS:return!0}}function eh(e){if(void 0===e)return Ru("GRPC error has no .code"),zu.UNKNOWN;switch(e){case Gf.OK:return zu.OK;case Gf.CANCELLED:return zu.CANCELLED;case Gf.UNKNOWN:return zu.UNKNOWN;case Gf.DEADLINE_EXCEEDED:return zu.DEADLINE_EXCEEDED;case Gf.RESOURCE_EXHAUSTED:return zu.RESOURCE_EXHAUSTED;case Gf.INTERNAL:return zu.INTERNAL;case Gf.UNAVAILABLE:return zu.UNAVAILABLE;case Gf.UNAUTHENTICATED:return zu.UNAUTHENTICATED;case Gf.INVALID_ARGUMENT:return zu.INVALID_ARGUMENT;case Gf.NOT_FOUND:return zu.NOT_FOUND;case Gf.ALREADY_EXISTS:return zu.ALREADY_EXISTS;case Gf.PERMISSION_DENIED:return zu.PERMISSION_DENIED;case Gf.FAILED_PRECONDITION:return zu.FAILED_PRECONDITION;case Gf.ABORTED:return zu.ABORTED;case Gf.OUT_OF_RANGE:return zu.OUT_OF_RANGE;case Gf.UNIMPLEMENTED:return zu.UNIMPLEMENTED;case Gf.DATA_LOSS:return zu.DATA_LOSS;default:return Fu()}}(Qf=Gf||(Gf={}))[Qf.OK=0]="OK",Qf[Qf.CANCELLED=1]="CANCELLED",Qf[Qf.UNKNOWN=2]="UNKNOWN",Qf[Qf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qf[Qf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qf[Qf.NOT_FOUND=5]="NOT_FOUND",Qf[Qf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qf[Qf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qf[Qf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qf[Qf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qf[Qf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qf[Qf.ABORTED=10]="ABORTED",Qf[Qf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qf[Qf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qf[Qf.INTERNAL=13]="INTERNAL",Qf[Qf.UNAVAILABLE=14]="UNAVAILABLE",Qf[Qf.DATA_LOSS=15]="DATA_LOSS";var th=function(){function e(){y(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return b(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return nh}},{key:"getOrCreateInstance",value:function(){return null===nh&&(nh=new e),nh}}]),e}(),nh=null;function rh(){return new TextEncoder}var ih=new Tu([4294967295,4294967295],0);function ah(e){var t=rh().encode(e),n=new Iu;return n.update(t),new Uint8Array(n.digest())}function oh(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Tu([n,r],0),new Tu([i,a],0)]}var uh=function(){function e(t,n,r){if(y(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sh("Invalid padding: ".concat(n));if(r<0)throw new sh("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new sh("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new sh("Invalid padding when bitmap length is 0: ".concat(n));this.yt=8*t.length-n,this.It=Tu.fromNumber(this.yt)}return b(e,[{key:"Tt",value:function(e,t,n){var r=e.add(t.multiply(Tu.fromNumber(n)));return 1===r.compare(ih)&&(r=new Tu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}},{key:"Et",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"At",value:function(e){if(0===this.yt)return!1;for(var t=p(oh(ah(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);if(!this.Et(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.yt)for(var t=p(oh(ah(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),sh=function(e){w(n,e);var t=_(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return b(n)}(T(Error)),ch=function(){function e(t,n,r,i,a){y(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return b(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,lh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(rs.min(),i,new mc(Zu),nf(),hf())}}]),e}(),lh=function(){function e(t,n,r,i,a){y(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return b(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,hf(),hf(),hf())}}]),e}(),fh=b((function e(t,n,r,i){y(this,e),this.vt=t,this.removedTargetIds=n,this.key=r,this.Pt=i})),hh=b((function e(t,n){y(this,e),this.targetId=t,this.bt=n})),dh=b((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ec.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;y(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),ph=function(){function e(){y(this,e),this.Vt=0,this.St=yh(),this.Dt=Ec.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}return b(e,[{key:"current",get:function(){return this.Ct}},{key:"resumeToken",get:function(){return this.Dt}},{key:"Nt",get:function(){return 0!==this.Vt}},{key:"kt",get:function(){return this.xt}},{key:"Mt",value:function(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}},{key:"Ot",value:function(){var e=hf(),t=hf(),n=hf();return this.St.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Fu()}})),new lh(this.Dt,this.Ct,e,t,n)}},{key:"$t",value:function(){this.xt=!1,this.St=yh()}},{key:"Ft",value:function(e,t){this.xt=!0,this.St=this.St.insert(e,t)}},{key:"Bt",value:function(e){this.xt=!0,this.St=this.St.remove(e)}},{key:"Lt",value:function(){this.Vt+=1}},{key:"qt",value:function(){this.Vt-=1}},{key:"Ut",value:function(){this.xt=!0,this.Ct=!0}}]),e}(),vh=function(){function e(t){y(this,e),this.Kt=t,this.Gt=new Map,this.Qt=nf(),this.jt=mh(),this.zt=new mc(Zu)}return b(e,[{key:"Wt",value:function(e){var t,n=C(e.vt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Pt&&e.Pt.isFoundDocument()?this.Ht(r,e.Pt):this.Jt(r,e.key,e.Pt)}}catch(u){n.e(u)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Jt(o,e.key,e.Pt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Yt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Xt(n);switch(e.state){case 0:t.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||t.removeTarget(n);break;case 3:t.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:t.Zt(n)&&(t.te(n),r.Mt(e.resumeToken));break;default:Fu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((function(e,r){n.Zt(r)&&t(r)}))}},{key:"ee",value:function(e){var t,n=e.targetId,r=e.bt.count,i=this.ne(n);if(i){var a=i.target;if(Pl(a))if(0===r){var o=new ss(a.path);this.Jt(n,o,rl.newNoDocument(o,rs.min()))}else ju(1===r);else{var u=this.se(n);if(u!==r){var s=this.ie(e,u);if(0!==s){this.te(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,c)}null===(t=th.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.bt))}}}}},{key:"ie",value:function(e,t){var n=e.bt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Cc(c).toUint8Array()}catch(e){if(e instanceof Sc)return Lu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new uh(a,f,d)}catch(e){return Lu(e instanceof sh?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.yt?1:i!==t-this.re(e.targetId,o)?2:0}},{key:"re",value:function(e,t){var n=this,r=this.Kt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Kt.oe(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.At(o)||(n.Jt(e,r,null),i++)})),i}},{key:"ue",value:function(e){var t=this,n=new Map;this.Gt.forEach((function(r,i){var a=t.ne(i);if(a){if(r.current&&Pl(a.target)){var o=new ss(a.target.path);null!==t.Qt.get(o)||t.ce(i,o)||t.Jt(i,o,rl.newNoDocument(o,e))}r.kt&&(n.set(i,r.Ot()),r.$t())}}));var r=hf();this.jt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ne(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qt.forEach((function(t,n){return n.setReadTime(e)}));var i=new ch(e,n,this.zt,this.Qt,r);return this.Qt=nf(),this.jt=mh(),this.zt=new mc(Zu),i}},{key:"Ht",value:function(e,t){if(this.Zt(e)){var n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}}},{key:"Jt",value:function(e,t,n){if(this.Zt(e)){var r=this.Xt(e);this.ce(e,t)?r.Ft(t,1):r.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Gt.delete(e)}},{key:"se",value:function(e){var t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Lt",value:function(e){this.Xt(e).Lt()}},{key:"Xt",value:function(e){var t=this.Gt.get(e);return t||(t=new ph,this.Gt.set(e,t)),t}},{key:"ae",value:function(e){var t=this.jt.get(e);return t||(t=new bc(Zu),this.jt=this.jt.insert(e,t)),t}},{key:"Zt",value:function(e){var t=null!==this.ne(e);return t||Ou("WatchChangeAggregator","Detected inactive target",e),t}},{key:"ne",value:function(e){var t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}},{key:"te",value:function(e){var t=this;this.Gt.set(e,new ph),this.Kt.getRemoteKeysForTarget(e).forEach((function(n){t.Jt(e,n,null)}))}},{key:"ce",value:function(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}]),e}();function mh(){return new mc(ss.comparator)}function yh(){return new mc(ss.comparator)}var gh={asc:"ASCENDING",desc:"DESCENDING"},bh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kh={and:"AND",or:"OR"},wh=b((function e(t,n){y(this,e),this.databaseId=t,this.useProto3Json=n}));function xh(e,t){return e.useProto3Json||Ls(t)?t:{value:t}}function Sh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Eh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function _h(e,t){return Sh(e,t.toTimestamp())}function Ih(e){return ju(!!e),rs.fromTimestamp(function(e){var t=Ic(e);return new ns(t.seconds,t.nanos)}(e))}function Th(e,t){return function(e){return new as(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Ch(e){var t=as.fromString(e);return ju(Yh(t)),t}function Nh(e,t){return Th(e.databaseId,t.path)}function Dh(e,t){var n=Ch(t);if(n.get(1)!==e.databaseId.projectId)throw new Uu(zu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Uu(zu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ss(Rh(n))}function Ah(e,t){return Th(e.databaseId,t)}function Ph(e){var t=Ch(e);return 4===t.length?as.emptyPath():Rh(t)}function Oh(e){return new as(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rh(e){return ju(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Lh(e,t,n){return{name:Nh(e,t),fields:n.value.mapValue.fields}}function Mh(e,t,n){var r=Dh(e,t.name),i=Ih(t.updateTime),a=t.createTime?Ih(t.createTime):rs.min(),o=new tl({mapValue:{fields:t.fields}}),u=rl.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Fh(e,t){return"found"in t?function(e,t){ju(!!t.found),t.found.name,t.found.updateTime;var n=Dh(e,t.found.name),r=Ih(t.found.updateTime),i=t.found.createTime?Ih(t.found.createTime):rs.min(),a=new tl({mapValue:{fields:t.found.fields}});return rl.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){ju(!!t.missing),ju(!!t.readTime);var n=Dh(e,t.missing),r=Ih(t.readTime);return rl.newNoDocument(n,r)}(e,t):Fu()}function jh(e,t){var n;if(t instanceof zf)n={update:Lh(e,t.key,t.value)};else if(t instanceof Wf)n={delete:Nh(e,t.key)};else if(t instanceof Uf)n={update:Lh(e,t.key,t.data),updateMask:$h(t.fieldMask)};else{if(!(t instanceof Hf))return Fu();n={verify:Nh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof xf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _f)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tf)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw Fu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:_h(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Fu()}(e,t.precondition)),n}function Vh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Pf.updateTime(Ih(e.updateTime)):void 0!==e.exists?Pf.exists(e.exists):Pf.none()}(t.currentDocument):Pf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ju("REQUEST_TIME"===t.setToServerValue),n=new xf;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Sf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new _f(i)}else"increment"in t?n=new Tf(e,t.increment):Fu();var a=us.fromServerFormat(t.fieldPath);return new Df(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Dh(e,t.update.name),a=new tl({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new xc(t.map((function(e){return us.fromServerFormat(e)})))}(t.updateMask);return new Uf(i,a,o,n,r)}return new zf(i,a,n,r)}if(t.delete){var u=Dh(e,t.delete);return new Wf(u,n)}if(t.verify){var s=Dh(e,t.verify);return new Hf(s,n)}return Fu()}function zh(e,t){return{documents:[Ah(e,t.path)]}}function Uh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ah(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ah(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Xh(fl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Wh(e.field),direction:Kh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=xh(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Bh(e){var t=Ph(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ju(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=qh(e);return t instanceof fl&&pl(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ul(Hh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Ls(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new il(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new il(n,t)}(n.endAt)),Fl(t,i,u,o,s,"F",c,l)}function qh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Hh(e.unaryFilter.field);return ll.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Hh(e.unaryFilter.field);return ll.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hh(e.unaryFilter.field);return ll.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hh(e.unaryFilter.field);return ll.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Fu()}}(e):void 0!==e.fieldFilter?function(e){return ll.create(Hh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fl.create(e.compositeFilter.filters.map((function(e){return qh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Fu()}}(e.compositeFilter.op))}(e):Fu()}function Kh(e){return gh[e]}function Gh(e){return bh[e]}function Qh(e){return kh[e]}function Wh(e){return{fieldPath:e.canonicalString()}}function Hh(e){return us.fromServerFormat(e.fieldPath)}function Xh(e){return e instanceof ll?function(e){if("=="===e.op){if(Wc(e.value))return{unaryFilter:{field:Wh(e.field),op:"IS_NAN"}};if(Qc(e.value))return{unaryFilter:{field:Wh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Wc(e.value))return{unaryFilter:{field:Wh(e.field),op:"IS_NOT_NAN"}};if(Qc(e.value))return{unaryFilter:{field:Wh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wh(e.field),op:Gh(e.op),value:e.value}}}(e):e instanceof fl?function(e){var t=e.getFilters().map((function(e){return Xh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Qh(e.op),filters:t}}}(e):Fu()}function $h(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Yh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Jh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rs.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rs.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ec.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;y(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return b(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Zh=b((function e(t){y(this,e),this.le=t}));function ed(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:td(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Nh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Sh(e,t.version.toTimestamp()),createTime:Sh(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:nd(t.version)};else{if(!t.isUnknownDocument())return Fu();r.unknownDocument={path:n.path.toArray(),version:nd(t.version)}}return r}function td(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function nd(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function rd(e){var t=new ns(e.seconds,e.nanoseconds);return rs.fromTimestamp(t)}function id(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Vh(e.le,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Vh(e.le,t)})),u=ns.fromMillis(t.localWriteTimeMs);return new Xf(t.batchId,u,n,o)}function ad(e){var t,n,r=rd(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?rd(e.lastLimboFreeSnapshotVersion):rs.min();return void 0!==e.query.documents?(ju(1===(n=e.query).documents.length),t=Kl(jl(Ph(n.documents[0])))):t=function(e){return Kl(Bh(e))}(e.query),new Jh(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Ec.fromBase64String(e.resumeToken))}function od(e,t){var n,r=nd(t.snapshotVersion),i=nd(t.lastLimboFreeSnapshotVersion);n=Pl(t.target)?zh(e.le,t.target):Uh(e.le,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Dl(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ud(e){var t=Bh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ql(t,t.limit,"L"):t}function sd(e,t){return new Yf(t.largestBatchId,Vh(e.le,t.overlayMutation))}function cd(e,t){var n=t.path.lastSegment();return[e,js(t.path.popLast()),n]}function ld(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:nd(r.readTime),documentKey:js(r.documentKey.path),largestBatchId:r.largestBatchId}}var fd=function(){function e(){y(this,e)}return b(e,[{key:"getBundleMetadata",value:function(e,t){return hd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:rd(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hd(e).put({bundleId:(n=t).id,createTime:nd(Ih(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return dd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ud(t.bundledQuery),readTime:rd(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return dd(e).put(function(e){return{name:e.name,readTime:nd(Ih(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hd(e){return hc(e,"bundles")}function dd(e){return hc(e,"namedQueries")}var pd=function(){function e(t,n){y(this,e),this.serializer=t,this.userId=n}return b(e,[{key:"getOverlay",value:function(e,t){var n=this;return vd(e).get(cd(this.userId,t)).next((function(e){return e?sd(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=uf();return xs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Yf(t,a);i.push(r.de(e,o))})),xs.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(js(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(vd(e).J("collectionPathOverlayIndex",i))})),xs.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=uf(),a=js(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return vd(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=sd(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=uf(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vd(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=sd(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"de",value:function(e,t){return vd(e).put(function(e,t,n){var r=p(cd(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:jh(e.le,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"fe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function vd(e){return hc(e,"documentOverlays")}var md=function(){function e(){y(this,e)}return b(e,[{key:"_e",value:function(e,t){this.we(e,t),t.me()}},{key:"we",value:function(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(Tc(e.integerValue));else if("doubleValue"in e){var n=Tc(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),Ms(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe("".concat(r.seconds||"")),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(Cc(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ge(t,45),t.ye(i.latitude||0),t.ye(i.longitude||0)}else"mapValue"in e?$c(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):Fu()}},{key:"Ie",value:function(e,t){this.ge(t,25),this.Pe(e,t)}},{key:"Pe",value:function(e,t){t.pe(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ge(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Ie(a,t),this.we(n[a],t)}}},{key:"ve",value:function(e,t){var n=e.values||[];this.ge(t,50);var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.we(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"Ae",value:function(e,t){var n=this;this.ge(t,37),ss.fromName(e).path.forEach((function(e){n.ge(t,60),n.Pe(e,t)}))}},{key:"ge",value:function(e,t){e.ye(t)}},{key:"Te",value:function(e){e.ye(2)}}]),e}();function yd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function gd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=yd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}md.be=new md;var bd=function(){function e(){y(this,e),this.buffer=new Uint8Array(1024),this.position=0}return b(e,[{key:"Ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Se(n.value),n=t.next();this.De()}},{key:"Ce",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xe(n.value),n=t.next();this.Ne()}},{key:"ke",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{var a=r.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.De()}},{key:"Me",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{var a=r.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ne()}},{key:"Oe",value:function(e){var t=this.$e(e),n=gd(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Be",value:function(e){var t=this.$e(e),n=gd(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Le",value:function(){this.qe(255),this.qe(255)}},{key:"Ue",value:function(){this.Ke(255),this.Ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ge",value:function(){return this.buffer.slice(0,this.position)}},{key:"$e",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Se",value:function(e){var t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}},{key:"xe",value:function(e){var t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}},{key:"De",value:function(){this.qe(0),this.qe(1)}},{key:"Ne",value:function(){this.Ke(0),this.Ke(1)}},{key:"qe",value:function(e){this.Fe(1),this.buffer[this.position++]=e}},{key:"Ke",value:function(e){this.Fe(1),this.buffer[this.position++]=~e}},{key:"Fe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),kd=function(){function e(t){y(this,e),this.Qe=t}return b(e,[{key:"Ee",value:function(e){this.Qe.Ve(e)}},{key:"pe",value:function(e){this.Qe.ke(e)}},{key:"ye",value:function(e){this.Qe.Oe(e)}},{key:"me",value:function(){this.Qe.Le()}}]),e}(),wd=function(){function e(t){y(this,e),this.Qe=t}return b(e,[{key:"Ee",value:function(e){this.Qe.Ce(e)}},{key:"pe",value:function(e){this.Qe.Me(e)}},{key:"ye",value:function(e){this.Qe.Be(e)}},{key:"me",value:function(){this.Qe.Ue()}}]),e}(),xd=function(){function e(){y(this,e),this.Qe=new bd,this.je=new kd(this.Qe),this.ze=new wd(this.Qe)}return b(e,[{key:"seed",value:function(e){this.Qe.seed(e)}},{key:"We",value:function(e){return 0===e?this.je:this.ze}},{key:"Ge",value:function(){return this.Qe.Ge()}},{key:"reset",value:function(){this.Qe.reset()}}]),e}(),Sd=function(){function e(t,n,r,i){y(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return b(e,[{key:"He",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ed(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=_d(e.arrayValue,t.arrayValue))?n:0!==(n=_d(e.directionalValue,t.directionalValue))?n:ss.comparator(e.documentKey,t.documentKey)}function _d(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Id=function(){function e(t){y(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Je=t.orderBy,this.Ye=[];var n,r=C(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xe=i:this.Ye.push(i)}}catch(a){r.e(a)}finally{r.f()}}return b(e,[{key:"Ze",value:function(e){ju(e.collectionGroup===this.collectionId);var t=ls(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=fs(e),r=0,i=0;r<n.length&&this.tn(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Xe){var a=n[r];if(!this.en(this.Xe,a)||!this.nn(this.Je[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Je.length||!this.nn(this.Je[i++],o))return!1}return!0}},{key:"tn",value:function(e){var t,n=C(this.Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.en(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"en",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"nn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function Td(e){var t,n;if(ju(e instanceof ll||e instanceof fl),e instanceof ll){if(e instanceof _l){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return ll.create(e.field,"==",t)})))||[];return fl.create(r,"or")}return e}var i=e.filters.map((function(e){return Td(e)}));return fl.create(i,e.op)}function Cd(e){if(0===e.getFilters().length)return[];var t=Pd(Td(e));return ju(Ad(t)),Nd(t)||Dd(t)?[t]:t.getFilters()}function Nd(e){return e instanceof ll}function Dd(e){return e instanceof fl&&pl(e)}function Ad(e){return Nd(e)||Dd(e)||function(e){if(e instanceof fl&&dl(e)){var t,n=C(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Nd(r)&&!Dd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Pd(e){if(ju(e instanceof ll||e instanceof fl),e instanceof ll)return e;if(1===e.filters.length)return Pd(e.filters[0]);var t=e.filters.map((function(e){return Pd(e)})),n=fl.create(t,e.op);return Ad(n=Ld(n))?n:(ju(n instanceof fl),ju(hl(n)),ju(n.filters.length>1),n.filters.reduce((function(e,t){return Od(e,t)})))}function Od(e,t){var n;return ju(e instanceof ll||e instanceof fl),ju(t instanceof ll||t instanceof fl),n=e instanceof ll?t instanceof ll?function(e,t){return fl.create([e,t],"and")}(e,t):Rd(e,t):t instanceof ll?Rd(t,e):function(e,t){if(ju(e.filters.length>0&&t.filters.length>0),hl(e)&&hl(t))return gl(e,t.getFilters());var n=dl(e)?e:t,r=dl(e)?t:e,i=n.filters.map((function(e){return Od(e,r)}));return fl.create(i,"or")}(e,t),Ld(n)}function Rd(e,t){if(hl(t))return gl(t,e.getFilters());var n=t.filters.map((function(t){return Od(e,t)}));return fl.create(n,"or")}function Ld(e){if(ju(e instanceof ll||e instanceof fl),e instanceof ll)return e;var t=e.getFilters();if(1===t.length)return Ld(t[0]);if(vl(e))return e;var n=t.map((function(e){return Ld(e)})),r=[];return n.forEach((function(t){t instanceof ll?r.push(t):t instanceof fl&&(t.op===e.op?r.push.apply(r,m(t.filters)):r.push(t))})),1===r.length?r[0]:fl.create(r,e.op)}var Md=function(){function e(){y(this,e),this.sn=new Fd}return b(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),xs.resolve()}},{key:"getCollectionParents",value:function(e,t){return xs.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return xs.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return xs.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return xs.resolve(null)}},{key:"getIndexType",value:function(e,t){return xs.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return xs.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return xs.resolve(null)}},{key:"getMinOffset",value:function(e,t){return xs.resolve(ms.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return xs.resolve(ms.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return xs.resolve()}},{key:"updateIndexEntries",value:function(e,t){return xs.resolve()}}]),e}(),Fd=function(){function e(){y(this,e),this.index={}}return b(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bc(as.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bc(as.comparator)).toArray()}}]),e}(),jd=new Uint8Array(0),Vd=function(){function e(t,n){y(this,e),this.user=t,this.databaseId=n,this.rn=new Fd,this.on=new ef((function(e){return Dl(e)}),(function(e,t){return Al(e,t)})),this.uid=t.uid||""}return b(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.rn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.rn.add(t)}));var a={collectionId:r,parent:js(i)};return zd(e).put(a)}return xs.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ts(t),""],!1,!0);return zd(e).j(r).next((function(e){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Us(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Bd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=qd(e);return a.next((function(e){o.put(ld(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Bd(e),r=qd(e),i=Ud(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Ud(e),i=!0,a=new Map;return xs.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=hf(),o=[];return xs.forEach(a,(function(i,a){var u;Ou("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Dl(t)));var s=function(e,t){var n=ls(t);if(void 0===n)return null;var r,i=C(Ol(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=C(fs(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=C(Ol(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=C(fs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Rl(e,o.fieldPath,e.startAt):Ll(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new il(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=C(fs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ll(e,o.fieldPath,e.endAt):Rl(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new il(r,i)}(a,i),h=n.an(i,a,l),d=n.an(i,a,f),p=n.hn(i,a,c),v=n.ln(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return xs.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=ss.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return xs.resolve(null)}))}},{key:"un",value:function(e){var t=this.on.get(e);return t||(t=0===e.filters.length?[e]:Cd(fl.create(e.filters,"and")).map((function(t){return Nl(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.on.set(e,t),t)}},{key:"ln",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.fn(t[h/c]):jd,f=u.dn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),p=o.map((function(t){return u.dn(e,s,t,!0)}));l.push.apply(l,m(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"dn",value:function(e,t,n,r){var i=new Sd(e,ss.empty(),t,n);return r?i:i.He()}},{key:"_n",value:function(e,t,n,r){var i=new Sd(e,ss.empty(),t,n);return r?i.He():i}},{key:"cn",value:function(e,t){var n=new Id(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ze(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return xs.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new bc(us.comparator),r=!1,i=C(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=C(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=C(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"wn",value:function(e,t){var n,r=new xd,i=C(fs(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.We(a.kind);md.be._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ge()}},{key:"fn",value:function(e){var t=new xd;return md.be._e(e,t.We(0)),t.Ge()}},{key:"mn",value:function(e,t){var n=new xd;return md.be._e(qc(this.databaseId,t),n.We(function(e){var t=fs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new xd);var i,a=0,o=C(fs(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=C(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.gn(t,s.fieldPath)&&Gc(c))r=this.yn(r,s,c);else{var h=f.We(s.kind);md.be._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.pn(r)}},{key:"an",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ge();return t}},{key:"yn",value:function(e,t,n){var r,i=m(e),a=[],o=C(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=C(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new xd;f.seed(l.Ge()),md.be._e(s,f.We(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"gn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ll&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Bd(e),i=qd(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return xs.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new ds(t.sequenceNumber,new ms(rd(t.readTime),new ss(Us(t.documentKey)),t.largestBatchId)):ds.empty(),r=e.fields.map((function(e){var t=p(e,2),n=t[0],r=t[1];return new hs(us.fromServerFormat(n),r)}));return new cs(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Zu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Bd(e),a=qd(e);return this.In(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return xs.forEach(t,(function(t){return a.put(ld(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return xs.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?xs.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),xs.forEach(a,(function(r){return n.Tn(e,t,r).next((function(t){var a=n.En(i,r);return t.isEqual(a)?xs.resolve():n.An(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return Ud(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return Ud(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"Tn",value:function(e,t,n){var r=Ud(e),i=new bc(Ed);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Sd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"En",value:function(e,t){var n=new bc(Ed),r=this.wn(t,e);if(null==r)return n;var i=ls(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Gc(a)){var o,u=C(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Sd(t.indexId,e.key,this.fn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Sd(t.indexId,e.key,jd,r));return n}},{key:"An",value:function(e,t,n,r,i){var a=this;Ou("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=wc(a),s=wc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=wc(o)):l?(i(u),u=wc(a)):(u=wc(a),s=wc(o))}}(r,i,Ed,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),xs.waitFor(o)}},{key:"In",value:function(e){var t=1;return qd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ed(e,t)})).filter((function(e,t,n){return!t||0!==Ed(e,n[t-1])}));var r=[];r.push(e);var i,a=C(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ed(o,e),s=Ed(o,t);if(0===u)r[0]=e.He();else if(u>0&&s<0)r.push(o),r.push(o.He());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,jd,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,jd,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Pn",value:function(e,t){return Ed(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Kd)}},{key:"getMinOffset",value:function(e,t){var n=this;return xs.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||Fu()}))})).next(Kd)}}]),e}();function zd(e){return hc(e,"collectionParents")}function Ud(e){return hc(e,"indexEntries")}function Bd(e){return hc(e,"indexConfiguration")}function qd(e){return hc(e,"indexState")}function Kd(e){ju(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ys(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ms(t.readTime,t.documentKey,n)}var Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qd=function(){function e(t,n,r){y(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return b(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Wd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ju(1===u)})));var c,l=[],f=C(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ks(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return xs.waitFor(a).next((function(){return l}))}function Hd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Fu();t=e.noDocument}return JSON.stringify(t).length}Qd.DEFAULT_COLLECTION_PERCENTILE=10,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qd.DEFAULT=new Qd(41943040,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qd.DISABLED=new Qd(-1,0,0);var Xd=function(){function e(t,n,r,i){y(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return b(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Jd(e),o=Yd(e);return o.add({}).next((function(u){ju("number"==typeof u);var s,c=new Xf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return jh(e.le,t)})),i=n.mutations.map((function(t){return jh(e.le,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new bc((function(e,t){return Zu(e.canonicalString(),t.canonicalString())})),d=C(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ks(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Gs))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),xs.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Yd(e).get(t).next((function(e){return e?(ju(e.userId===n.userId),id(n.serializer,e)):null}))}},{key:"Vn",value:function(e,t){var n=this;return this.bn[t]?xs.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Yd(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ju(t.batchId>=r),a=id(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yd(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yd(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return id(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=qs(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Jd(e).X({range:i},(function(r,i,o){var u=p(r,3),s=u[0],c=u[1],l=u[2],f=Us(c);if(s===n.userId&&t.path.isEqual(f))return Yd(e).get(l).next((function(e){if(!e)throw Fu();ju(e.userId===n.userId),a.push(id(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bc(Zu),i=[];return t.forEach((function(t){var a=qs(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Jd(e).X({range:o},(function(e,i,a){var o=p(e,3),u=o[0],s=o[1],c=o[2],l=Us(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),xs.waitFor(i).next((function(){return n.Sn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=qs(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new bc(Zu);return Jd(e).X({range:o},(function(e,t,a){var o=p(e,3),s=o[0],c=o[1],l=o[2],f=Us(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Sn(e,u)}))}},{key:"Sn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Yd(e).get(t).next((function(e){if(null===e)throw Fu();ju(e.userId===n.userId),r.push(id(n.serializer,e))})))})),xs.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Wd(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Dn(t.batchId)})),xs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Dn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return xs.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Jd(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Us(e[1]);i.push(a)}else r.done()})).next((function(){ju(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return $d(e,this.userId,t)}},{key:"Cn",value:function(e){var t=this;return Zd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"fe",value:function(t,n,r,i){return ju(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function $d(e,t,n){var r=qs(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Jd(e).X({range:a,Y:!0},(function(e,n,r){var a=p(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Yd(e){return hc(e,"mutations")}function Jd(e){return hc(e,"documentMutations")}function Zd(e){return hc(e,"mutationQueues")}var ep=function(){function e(t){y(this,e),this.xn=t}return b(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"Nn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),tp=function(){function e(t,n){y(this,e),this.referenceDelegate=t,this.serializer=n}return b(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Mn(e).next((function(n){var r=new ep(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Mn(e).next((function(e){return rs.fromTimestamp(new ns(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Mn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Mn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.$n(e,t).next((function(){return n.Mn(e).next((function(r){return r.targetCount+=1,n.Fn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.$n(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return np(e).delete(t.targetId)})).next((function(){return n.Mn(e)})).next((function(t){return ju(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return np(e).X((function(o,u){var s=ad(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return xs.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return np(e).X((function(e,n){var r=ad(n);t(r)}))}},{key:"Mn",value:function(e){return rp(e).get("targetGlobalKey").next((function(e){return ju(null!==e),e}))}},{key:"On",value:function(e,t){return rp(e).put("targetGlobalKey",t)}},{key:"$n",value:function(e,t){return np(e).put(od(this.serializer,t))}},{key:"Fn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Mn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Dl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return np(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ad(n);Al(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ip(e);return t.forEach((function(t){var o=js(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),xs.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ip(e);return xs.forEach(t,(function(t){var a=js(t.path);return xs.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ip(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ip(e),i=hf();return r.X({range:n,Y:!0},(function(e,t,n){var r=Us(e[1]),a=new ss(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=js(t.path),r=IDBKeyRange.bound([n],[ts(n)],!1,!0),i=0;return ip(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=p(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"he",value:function(e,t){return np(e).get(t).next((function(e){return e?ad(e):null}))}}]),e}();function np(e){return hc(e,"targets")}function rp(e){return hc(e,"targetGlobal")}function ip(e){return hc(e,"targetDocuments")}function ap(e,t){var n=p(e,2),r=n[0],i=n[1],a=p(t,2),o=a[0],u=a[1],s=Zu(r,o);return 0===s?Zu(i,u):s}var op=function(){function e(t){y(this,e),this.Bn=t,this.buffer=new bc(ap),this.Ln=0}return b(e,[{key:"qn",value:function(){return++this.Ln}},{key:"Un",value:function(e){var t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ap(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),up=function(){function e(t,n,r){y(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Kn=null}return b(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}},{key:"started",get:function(){return null!==this.Kn}},{key:"Gn",value:function(e){var t=this;Ou("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Kn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ts(e.t0)){e.next=12;break}Ou("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ks(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),sp=function(){function e(t,n){y(this,e),this.Qn=t,this.params=n}return b(e,[{key:"calculateTargetCount",value:function(e,t){return this.Qn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return xs.resolve(Rs.ct);var r=new op(t);return this.Qn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.Qn.zn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Qn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Qn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ou("LruGarbageCollector","Garbage collection skipped; disabled"),xs.resolve(Gd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ou("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Gd):n.Wn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Qn.getCacheSize(e)}},{key:"Wn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ou("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Pu()<=kt.DEBUG&&Ou("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),xs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function cp(e,t){return new sp(e,t)}var lp=function(){function e(t,n){y(this,e),this.db=t,this.garbageCollector=cp(this,n)}return b(e,[{key:"jn",value:function(e){var t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Hn",value:function(e){var t=0;return this.zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"zn",value:function(e,t){return this.Jn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return fp(e,n)}},{key:"removeReference",value:function(e,t,n){return fp(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fp(e,t)}},{key:"Yn",value:function(e,t){return function(e,t){var n=!1;return Zd(e).Z((function(r){return $d(e,r,t).next((function(e){return e&&(n=!0),xs.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Jn(e,(function(o,u){if(u<=t){var s=n.Yn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,rs.min()),ip(e).delete([0,js(o.path)])}))}));i.push(s)}})).next((function(){return xs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fp(e,t)}},{key:"Jn",value:function(e,t){var n,r=ip(e),i=Rs.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=p(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Rs.ct&&t(new ss(Us(n)),i),i=s,n=u):i=Rs.ct})).next((function(){i!==Rs.ct&&t(new ss(Us(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fp(e,t){return ip(e).put(function(e,t){return{targetId:0,path:js(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hp=function(){function e(){y(this,e),this.changes=new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return b(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,rl.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?xs.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dp=function(){function e(t){y(this,e),this.serializer=t}return b(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return yp(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return yp(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],td(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=rl.newInvalidDocument(t);return yp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(function(e,i){r=n.Zn(t,i)})).next((function(){return r}))}},{key:"ts",value:function(e,t){var n=this,r={size:0,document:rl.newInvalidDocument(t)};return yp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gp(t))},(function(e,i){r={document:n.Zn(t,i),size:Hd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=nf();return this.es(e,t,(function(e,t){var i=n.Zn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ns",value:function(e,t){var n=this,r=nf(),i=new mc(ss.comparator);return this.es(e,t,(function(e,t){var a=n.Zn(e,t);r=r.insert(e,a),i=i.insert(e,Hd(t))})).next((function(){return{documents:r,ss:i}}))}},{key:"es",value:function(e,t,n){if(t.isEmpty())return xs.resolve();var r=new bc(kp);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(gp(r.first()),gp(r.last())),a=r.getIterator(),o=a.getNext();return yp(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ss.fromSegments([].concat(m(t.prefixPath),[t.collectionGroup,t.documentId]));o&&kp(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(gp(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),td(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yp(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=nf(),o=C(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Zn(ss.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&($l(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=nf(),o=bp(t,n),u=bp(t,ms.max());return yp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Zn(ss.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new vp(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return mp(e).get("remoteDocumentGlobalKey").next((function(e){return ju(!!e),e}))}},{key:"Xn",value:function(e,t){return mp(e).put("remoteDocumentGlobalKey",t)}},{key:"Zn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Mh(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ss.fromSegments(t.noDocument.path),i=rd(t.noDocument.readTime);n=rl.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Fu();var a=ss.fromSegments(t.unknownDocument.path),o=rd(t.unknownDocument.version);n=rl.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new ns(e[0],e[1]);return rs.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(rs.min()))return n}return rl.newInvalidDocument(e)}}]),e}();function pp(e){return new dp(e)}var vp=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).rs=e,i.trackRemovals=r,i.os=new ef((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return b(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new bc((function(e,t){return Zu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.os.get(a);if(n.push(t.rs.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=ed(t.rs.serializer,o);i=i.add(a.path.popLast());var c=Hd(s);r+=c-u.size,n.push(t.rs.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=ed(t.rs.serializer,o.convertToNoDocument(rs.min()));n.push(t.rs.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.rs.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.rs.updateMetadata(e,r)),xs.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.rs.ts(e,t).next((function(e){return n.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.rs.ns(e,t).next((function(e){var t=e.documents;return e.ss.forEach((function(e,r){n.os.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hp);function mp(e){return hc(e,"remoteDocumentGlobal")}function yp(e){return hc(e,"remoteDocumentsV14")}function gp(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function bp(e,t){var n=t.documentKey.path.toArray();return[e,td(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kp(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Zu(n[a],r[a]))return i;return(i=Zu(n.length,r.length))||((i=Zu(n[n.length-2],r[r.length-2]))||Zu(n[n.length-1],r[r.length-1]))}var wp=b((function e(t,n){y(this,e),this.overlayedDocument=t,this.mutatedFields=n})),xp=function(){function e(t,n,r,i){y(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return b(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Ff(r.mutation,e,xc.empty(),ns.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,hf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hf(),i=uf();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=af();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=uf();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,hf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=nf(),a=cf(),o=cf();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Uf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Ff(o.mutation,t,o.mutation.getFieldMask(),ns.now())):a.set(t.key,xc.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new wp(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=cf(),i=new mc((function(e,t){return e-t})),a=hf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||xc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||hf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=sf();c.forEach((function(e){if(!a.has(e)){var n=Lf(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return xs.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ss.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):xs.resolve(uf()),u=-1,s=a;return o.next((function(t){return xs.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?xs.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,hf())})).next((function(e){return{batchId:u,changes:of(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ss(t)).next((function(e){var t=af();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=af();return this.indexManager.getCollectionParents(e,i).next((function(o){return xs.forEach(o,(function(o){var u=function(e,t){return new Ml(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,rl.newInvalidDocument(r)))}));var n=af();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Ff(a.mutation,i,xc.empty(),ns.now()),$l(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Sp=function(){function e(t){y(this,e),this.serializer=t,this.us=new Map,this.cs=new Map}return b(e,[{key:"getBundleMetadata",value:function(e,t){return xs.resolve(this.us.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:Ih(n.createTime)}),xs.resolve()}},{key:"getNamedQuery",value:function(e,t){return xs.resolve(this.cs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:ud(e.bundledQuery),readTime:Ih(e.readTime)}}(t)),xs.resolve()}}]),e}(),Ep=function(){function e(){y(this,e),this.overlays=new mc(ss.comparator),this.hs=new Map}return b(e,[{key:"getOverlay",value:function(e,t){return xs.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=uf();return xs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.de(e,t,i)})),xs.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hs.delete(n)),xs.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=uf(),i=t.length+1,a=new ss(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return xs.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new mc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=uf(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=uf(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return xs.resolve(s)}},{key:"de",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Yf(t,n));var a=this.hs.get(t);void 0===a&&(a=hf(),this.hs.set(t,a)),this.hs.set(t,a.add(n.key))}}]),e}(),_p=function(){function e(){y(this,e),this.ls=new bc(Ip.fs),this.ds=new bc(Ip._s)}return b(e,[{key:"isEmpty",value:function(){return this.ls.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ip(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}},{key:"ws",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.gs(new Ip(e,t))}},{key:"ys",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ps",value:function(e){var t=this,n=new ss(new as([])),r=new Ip(n,e),i=new Ip(n,e+1),a=[];return this.ds.forEachInRange([r,i],(function(e){t.gs(e),a.push(e.key)})),a}},{key:"Is",value:function(){var e=this;this.ls.forEach((function(t){return e.gs(t)}))}},{key:"gs",value:function(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}},{key:"Ts",value:function(e){var t=new ss(new as([])),n=new Ip(t,e),r=new Ip(t,e+1),i=hf();return this.ds.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ip(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ip=function(){function e(t,n){y(this,e),this.key=t,this.Es=n}return b(e,null,[{key:"fs",value:function(e,t){return ss.comparator(e.key,t.key)||Zu(e.Es,t.Es)}},{key:"_s",value:function(e,t){return Zu(e.Es,t.Es)||ss.comparator(e.key,t.key)}}]),e}(),Tp=function(){function e(t,n){y(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new bc(Ip.fs)}return b(e,[{key:"checkEmpty",value:function(e){return xs.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Xf(i,t,n,r);this.mutationQueue.push(a);var o,u=C(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new Ip(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return xs.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return xs.resolve(this.vs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ps(n),i=r<0?0:r;return xs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return xs.resolve(0===this.mutationQueue.length?-1:this.As-1)}},{key:"getAllMutationBatches",value:function(e){return xs.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ip(t,0),i=new Ip(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.vs(e.Es);a.push(t)})),xs.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bc(Zu);return t.forEach((function(e){var t=new Ip(e,0),i=new Ip(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.Es)}))})),xs.resolve(this.bs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ss.isDocumentKey(i)||(i=i.child(""));var a=new Ip(new ss(i),0),o=new bc(Zu);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Es)),!0)}),a),xs.resolve(this.bs(o))}},{key:"bs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.vs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ju(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return xs.forEach(t.mutations,(function(i){var a=new Ip(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ip(t,0),r=this.Rs.firstAfterOrEqual(n);return xs.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,xs.resolve()}},{key:"Vs",value:function(e,t){return this.Ps(e)}},{key:"Ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"vs",value:function(e){var t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Cp=function(){function e(t){y(this,e),this.Ss=t,this.docs=new mc(ss.comparator),this.size=0}return b(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return xs.resolve(n?n.document.mutableCopy():rl.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=nf();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():rl.newInvalidDocument(e))})),xs.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=nf(),a=t.path,o=new ss(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ys(vs(l),n)<=0||(r.has(l.key)||$l(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return xs.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Fu()}},{key:"Ds",value:function(e,t){return xs.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Np(this)}},{key:"getSize",value:function(e){return xs.resolve(this.size)}}]),e}(),Np=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).rs=e,r}return b(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.rs.addEntry(e,i)):t.rs.removeEntry(r)})),xs.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.rs.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.rs.getEntries(e,t)}}]),n}(hp),Dp=function(){function e(t){y(this,e),this.persistence=t,this.Cs=new ef((function(e){return Dl(e)}),Al),this.lastRemoteSnapshotVersion=rs.min(),this.highestTargetId=0,this.xs=0,this.Ns=new _p,this.targetCount=0,this.ks=ep.Nn()}return b(e,[{key:"forEachTarget",value:function(e,t){return this.Cs.forEach((function(e,n){return t(n)})),xs.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return xs.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return xs.resolve(this.xs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ks.next(),xs.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),xs.resolve()}},{key:"$n",value:function(e){this.Cs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ks=new ep(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.$n(t),this.targetCount+=1,xs.resolve()}},{key:"updateTargetData",value:function(e,t){return this.$n(t),xs.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,xs.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),xs.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return xs.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cs.get(t)||null;return xs.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ns.ws(t,n),xs.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ns.ys(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),xs.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ns.ps(t),xs.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ns.Ts(t);return xs.resolve(n)}},{key:"containsKey",value:function(e,t){return xs.resolve(this.Ns.containsKey(t))}}]),e}(),Ap=function(){function e(t,n){var r=this;y(this,e),this.Ms={},this.overlays={},this.Os=new Rs(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new Dp(this),this.indexManager=new Md,this.remoteDocumentCache=new Cp((function(e){return r.referenceDelegate.Bs(e)})),this.serializer=new Zh(n),this.Ls=new Sp(this.serializer)}return b(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.$s=!1,Promise.resolve()}},{key:"started",get:function(){return this.$s}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Ep,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ms[e.toKey()];return n||(n=new Tp(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;Ou("MemoryPersistence","Starting transaction:",e);var i=new Pp(this.Os.next());return this.referenceDelegate.qs(),n(i).next((function(e){return r.referenceDelegate.Us(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ks",value:function(e,t){return xs.or(Object.values(this.Ms).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Pp=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return b(n)}(bs),Op=function(){function e(t){y(this,e),this.persistence=t,this.Gs=new _p,this.Qs=null}return b(e,[{key:"zs",get:function(){if(this.Qs)return this.Qs;throw Fu()}},{key:"addReference",value:function(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),xs.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),xs.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zs.add(t.toString()),xs.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gs.ps(t.targetId).forEach((function(e){return n.zs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qs",value:function(){this.Qs=new Set}},{key:"Us",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xs.forEach(this.zs,(function(r){var i=ss.fromPath(r);return t.Ws(e,i).next((function(e){e||n.removeEntry(i,rs.min())}))})).next((function(){return t.Qs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ws(e,t).next((function(e){e?n.zs.delete(t.toString()):n.zs.add(t.toString())}))}},{key:"Bs",value:function(e){return 0}},{key:"Ws",value:function(e,t){var n=this;return xs.or([function(){return xs.resolve(n.Gs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ks(e,t)}])}}],[{key:"js",value:function(t){return new e(t)}}]),e}(),Rp=function(){function e(t){y(this,e),this.serializer=t}return b(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Ss("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Lp(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=xs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Lp(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rs.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return xs.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Js(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ys(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:rc});t.createIndex("collectionPathOverlayIndex",ic,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ac,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Qs});t.createIndex("documentKeyIndex",Ws),t.createIndex("collectionGroupIndex",Hs)}(e)})).next((function(){return i.ei(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ni(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Zs}).createIndex("sequenceNumberIndex",ec,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:tc}).createIndex("documentKeyIndex",nc,{unique:!1})}(e)}))),o}},{key:"Ys",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Hd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Js",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return xs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return xs.forEach(r,(function(r){ju(r.userId===n.userId);var i=id(t.serializer,r);return Wd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new as(n),o=function(e){return[0,js(e)]}(a);r.push(t.get(o).next((function(n){return n?xs.resolve():function(n){return t.put({targetId:0,path:js(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return xs.waitFor(r)}))}))}},{key:"Zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Js});var n=t.store("collectionParents"),r=new Fd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:js(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new as(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=p(e,3),r=(n[0],n[1]),a=(n[2],Us(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=ad(r),a=od(t.serializer,i);return n.put(a)}))}},{key:"ei",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ss(as.fromString(i.document.name).popFirst(5)):i.noDocument?ss.fromSegments(i.noDocument.path):i.unknownDocument?ss.fromSegments(i.unknownDocument.path):Fu()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return xs.waitFor(r)}))}},{key:"ni",value:function(e,t){var n=this,r=t.store("mutations"),i=pp(this.serializer),a=new Ap(Op.js,this.serializer.le);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:hf();id(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),xs.forEach(r,(function(e,r){var o=new Nu(r),u=pd.fe(n.serializer,o),s=a.getIndexManager(o),c=Xd.fe(o,n.serializer,s,a.referenceDelegate);return new xp(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new fc(t,Rs.ct),e).next()}))}))}}]),e}();function Lp(e){e.createObjectStore("targetDocuments",{keyPath:$s}).createIndex("documentTargetsIndex",Ys,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xs,{unique:!0}),e.createObjectStore("targetGlobal")}var Mp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fp=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(y(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.ii=c,this.ri=l,this.oi=f,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=function(e){return Promise.resolve()},!e.D())throw new Uu(zu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lp(this,i),this.fi=n+"main",this.serializer=new Zh(s),this.di=new Es(this.fi,this.oi,new Rp(this.serializer)),this.Fs=new tp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pp(this.serializer),this.Ls=new fd,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&Ru("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return b(e,[{key:"start",value:function(){var e=this;return this.wi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Uu(zu.FAILED_PRECONDITION,Mp);return e.mi(),e.gi(),e.yi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Fs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Rs(t,e.ii)})).then((function(){e.$s=!0})).catch((function(t){return e.di&&e.di.close(),Promise.reject(t)}))}},{key:"pi",value:function(e){var t=this;return this.li=function(){var n=vt(dt().mark((function n(r){return dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.di.B(function(){var t=vt(dt().mark((function t(n){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.wi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"wi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Vp(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ii(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.li(!1)})))}))})).next((function(){return e.Ti(t)})).next((function(n){return e.isPrimary&&!n?e.Ei(t).next((function(){return!1})):!!n&&e.Ai(t).next((function(){return!0}))}))})).catch((function(t){if(Ts(t))return Ou("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ou("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.li(t)})),e.isPrimary=t}))}},{key:"Ii",value:function(e){var t=this;return jp(e).get("owner").next((function(e){return xs.resolve(t.Ri(e))}))}},{key:"vi",value:function(e){return Vp(e).delete(this.clientId)}},{key:"Pi",value:function(){var e=vt(dt().mark((function e(){var t,n,r,i,a=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=hc(e,"clientMetadata");return t.j().next((function(e){var n=a.Vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return xs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=C(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Si(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yi",value:function(){var e=this;this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.wi().then((function(){return e.Pi()})).then((function(){return e.yi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ti",value:function(e){var t=this;return this.ri?xs.resolve(!0):jp(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Di(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Uu(zu.FAILED_PRECONDITION,Mp);return!1}}return!(!t.networkEnabled||!t.inForeground)||Vp(e).j().next((function(e){return void 0===t.Vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ou("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=vt(dt().mark((function e(){var t=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),e.next=7,this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new fc(e,Rs.ct);return t.Ei(n).next((function(){return t.vi(n)}))}));case 7:this.di.close(),this.ki();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Di(e.clientId)}))}},{key:"Mi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Vp(t).j().next((function(t){return e.Vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.$s}},{key:"getMutationQueue",value:function(e,t){return Xd.fe(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Vd(e,this.serializer.le.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return pd.fe(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;Ou("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.oi)?lc:14===i?cc:13===i?sc:12===i?uc:11===i?oc:void Fu();return this.di.runTransaction(e,o,u,(function(i){return a=new fc(i,r.Os?r.Os.next():Rs.ct),"readwrite-primary"===t?r.Ii(a).next((function(e){return!!e||r.Ti(a)})).next((function(t){if(!t)throw Ru("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.li(!1)})),new Uu(zu.FAILED_PRECONDITION,gs);return n(a)})).next((function(e){return r.Ai(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return jp(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Di(e.ownerId)&&!t.Ri(e)&&!(t.ri||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Uu(zu.FAILED_PRECONDITION,Mp)}))}},{key:"Ai",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jp(e).put("owner",t)}},{key:"Ei",value:function(e){var t=this,n=jp(e);return n.get("owner").next((function(e){return t.Ri(e)?(Ou("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):xs.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ru("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"mi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.wi()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Ci();var e=/(?:Version|Mobile)\/1[456]/;tt()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Ni",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Di",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return Ou("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ru("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ci",value:function(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(Zk){Ru("Failed to set zombie client id.",Zk)}}},{key:"ki",value:function(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(Zk){}}},{key:"Si",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Es.D()}}]),e}();function jp(e){return hc(e,"owner")}function Vp(e){return hc(e,"clientMetadata")}function zp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Up=function(){function e(t,n,r,i){y(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Fi=i}return b(e,null,[{key:"Bi",value:function(t,n){var r,i=hf(),a=hf(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Bp=function(){function e(){y(this,e),this.Li=!1}return b(e,[{key:"initialize",value:function(e,t){this.qi=e,this.indexManager=t,this.Li=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Ki(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(Vl(t))return xs.resolve(null);var r=Kl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ql(t,null,"F"),r=Kl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=hf.apply(void 0,m(i));return n.qi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Qi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,Ql(t,null,"F")):n.zi(e,o,t,r)}))}))})))}))}},{key:"Ki",value:function(e,t,n,r){var i=this;return Vl(t)||r.isEqual(rs.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((function(a){var o=i.Qi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(Pu()<=kt.DEBUG&&Ou("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xl(t)),i.zi(e,o,t,ps(r,-1)))}))}},{key:"Qi",value:function(e,t){var n=new bc(Jl(e));return t.forEach((function(t,r){$l(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return Pu()<=kt.DEBUG&&Ou("QueryEngine","Using full collection scan to execute query:",Xl(t)),this.qi.getDocumentsMatchingQuery(e,t,ms.min())}},{key:"zi",value:function(e,t,n,r){return this.qi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),qp=function(){function e(t,n,r,i){y(this,e),this.persistence=t,this.Wi=n,this.serializer=i,this.Hi=new mc(Zu),this.Ji=new ef((function(e){return Dl(e)}),Al),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(r)}return b(e,[{key:"Zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xp(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Hi)}))}}]),e}();function Kp(e,t,n,r){return new qp(e,t,n,r)}function Gp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=vt(dt().mark((function e(t,n){var r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=hf(),s=C(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=C(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=C(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{tr:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Wp(e,t){var n=Vu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=xs.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ju(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=hf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Hp(e){var t=Vu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Fs.getLastRemoteSnapshotVersion(e)}))}function Xp(e,t){var n=Vu(e),r=t.snapshotVersion,i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Ec.EMPTY_BYTE_STRING,rs.min()).withLastLimboFreeSnapshotVersion(rs.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Fs.updateTargetData(e,c))}}));var u=nf(),s=hf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push($p(e,a,t.documentUpdates).next((function(e){u=e.er,s=e.nr}))),!r.isEqual(rs.min())){var c=n.Fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return xs.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Hi=i,e}))}function $p(e,t,n){var r=hf(),i=hf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=nf();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(rs.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Ou("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{er:r,nr:i}}))}function Yp(e,t){var n=Vu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Jp(e,t){var n=Vu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Fs.getTargetData(e,t).next((function(i){return i?(r=i,xs.resolve(r)):n.Fs.allocateTargetId(e).next((function(i){return r=new Jh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Hi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}function Zp(e,t,n){return ev.apply(this,arguments)}function ev(){return ev=vt(dt().mark((function e(t,n,r){var i,a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vu(t),a=i.Hi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ts(e.t1)){e.next=12;break}throw e.t1;case 12:Ou("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Hi=i.Hi.remove(n),i.Ji.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),ev.apply(this,arguments)}function tv(e,t,n){var r=Vu(e),i=rs.min(),a=hf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Vu(e),i=r.Ji.get(n);return void 0!==i?xs.resolve(r.Hi.get(i)):r.Fs.getTargetData(t,n)}(r,e,Kl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Wi.getDocumentsMatchingQuery(e,t,n?i:rs.min(),n?a:hf())})).next((function(e){return iv(r,Yl(t),e),{documents:e,sr:a}}))}))}function nv(e,t){var n=Vu(e),r=Vu(n.Fs),i=n.Hi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.he(e,t).next((function(e){return e?e.target:null}))}))}function rv(e,t){var n=Vu(e),r=n.Yi.get(t)||rs.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,ps(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return iv(n,t,e),e}))}function iv(e,t,n){var r=e.Yi.get(t)||rs.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Yi.set(t,r)}function av(e,t,n,r){return ov.apply(this,arguments)}function ov(){return ov=vt(dt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Vu(t),o=hf(),u=nf(),s=C(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.ir(l.metadata.name),l.document&&(o=o.add(f)),(h=n.rr(l)).setReadTime(n.ur(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Jp(a,function(e){return Kl(jl(as.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return $p(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr)})).next((function(){return t.er}))}))})));case 9:case"end":return e.stop()}}),e)}))),ov.apply(this,arguments)}function uv(e,t){return sv.apply(this,arguments)}function sv(){return sv=vt(dt().mark((function e(t,n){var r,i,a,o=arguments;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:hf(),e.next=3,Jp(t,Kl(ud(n.bundledQuery)));case 3:return i=e.sent,a=Vu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Ih(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ls.saveNamedQuery(e,n);var o=i.withResumeToken(Ec.EMPTY_BYTE_STRING,t);return a.Hi=a.Hi.insert(o.targetId,o),a.Fs.updateTargetData(e,o).next((function(){return a.Fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ls.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),sv.apply(this,arguments)}function cv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function lv(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function fv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hv=function(){function e(t,n,r,i){y(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return b(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Uu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ru("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),dv=function(){function e(t,n,r){y(this,e),this.targetId=t,this.state=n,this.error=r}return b(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Uu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ru("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),pv=function(){function e(t,n){y(this,e),this.clientId=t,this.activeTargetIds=n}return b(e,null,[{key:"cr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=pf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Fs(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ru("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),vv=function(){function e(t,n){y(this,e),this.clientId=t,this.onlineState=n}return b(e,null,[{key:"cr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ru("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),mv=function(){function e(){y(this,e),this.activeTargetIds=pf()}return b(e,[{key:"hr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ar",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yv=function(){function e(t,n,r,i,a){y(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new mc(Zu),this.started=!1,this.gr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=cv(this.persistenceKey,this.dr),this.pr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new mv),this.Ir=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Tr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Er=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ar=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return b(e,[{key:"start",value:function(){var e=vt(dt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Mi();case 2:t=e.sent,n=C(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.dr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(cv(this.persistenceKey,i)))&&(o=pv.cr(i,a))&&(this.mr=this.mr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.vr(),(u=this.storage.getItem(this.Ar))&&(s=this.Pr(u))&&this.br(s),c=C(this.gr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.wr(f)}catch(d){c.e(d)}finally{c.f()}this.gr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.pr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Vr(this.mr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.mr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Sr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Sr(e,t,n),this.Dr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(fv(this.persistenceKey,e));if(n){var r=dv.cr(e,n);r&&(t=r.state)}}return this.Cr.hr(e),this.vr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Cr.lr(e),this.vr()}},{key:"isLocalQueryTarget",value:function(e){return this.Cr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(fv(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Nr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Dr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.kr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Mr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ou("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ou("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ou("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"wr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ou("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void Ru("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(vt(dt().mark((function e(){var r,i,a,o,u,s,c;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ir.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.$r(r,null));case 6:if(!(i=t.Fr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$r(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Tr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Br(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Lr(a));case 16:e.next=41;break;case 18:if(!t.Er.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.qr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ur(o));case 23:e.next=41;break;case 25:if(n.key!==t.Ar){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.br(u));case 30:e.next=41;break;case 32:if(n.key!==t.pr){e.next=37;break}s=function(e){var t=Rs.ct;if(null!=e)try{var n=JSON.parse(e);ju("number"==typeof n),t=n}catch(e){Ru("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Rs.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Gr(e)})));case 41:e.next=44;break;case 43:t.gr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Cr",get:function(){return this.mr.get(this.dr)}},{key:"vr",value:function(){this.setItem(this.yr,this.Cr.ar())}},{key:"Sr",value:function(e,t,n){var r=new hv(this.currentUser,e,t,n),i=lv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ar())}},{key:"Dr",value:function(e){var t=lv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"kr",value:function(e){var t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}},{key:"Nr",value:function(e,t,n){var r=fv(this.persistenceKey,e),i=new dv(e,t,n);this.setItem(r,i.ar())}},{key:"Mr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Ir.exec(e);return t?t[1]:null}},{key:"Fr",value:function(e,t){var n=this.Or(e);return pv.cr(n,t)}},{key:"Br",value:function(e,t){var n=this.Tr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hv.cr(new Nu(i),r,t)}},{key:"qr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]);return dv.cr(r,t)}},{key:"Pr",value:function(e){return vv.cr(e)}},{key:"Kr",value:function(e){return JSON.parse(e)}},{key:"Lr",value:function(){var e=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Qr(t.batchId,t.state,t.error));case 2:Ou("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ur",value:function(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}},{key:"$r",value:function(e,t){var n=this,r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.zr(o,u).then((function(){n.mr=r}))}},{key:"br",value:function(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Vr",value:function(e){var t=pf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),gv=function(){function e(){y(this,e),this.Wr=new mv,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return b(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Hr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Wr.lr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Hr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Wr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Wr=new mv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),bv=function(){function e(){y(this,e)}return b(e,[{key:"Jr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),kv=function(){function e(){var t=this;y(this,e),this.Yr=function(){return t.Xr()},this.Zr=function(){return t.eo()},this.no=[],this.so()}return b(e,[{key:"Jr",value:function(e){this.no.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}},{key:"so",value:function(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}},{key:"Xr",value:function(){Ou("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"eo",value:function(){Ou("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),wv=null;function xv(){return null===wv?wv=268435456+Math.round(2147483648*Math.random()):wv++,"0x"+wv.toString(16)}var Sv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ev=function(){function e(t){y(this,e),this.io=t.io,this.ro=t.ro}return b(e,[{key:"oo",value:function(e){this.uo=e}},{key:"co",value:function(e){this.ao=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this.ro()}},{key:"send",value:function(e){this.io(e)}},{key:"lo",value:function(){this.uo()}},{key:"fo",value:function(e){this.ao(e)}},{key:"_o",value:function(e){this.ho(e)}}]),e}(),_v="WebChannelConnection",Iv=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return b(n,[{key:"Eo",value:function(e,t,n,r){var i=xv();return new Promise((function(a,o){var u=new _u;u.setWithCredentials(!0),u.listenOnce(ku.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case bu.NO_ERROR:var t=u.getResponseJson();Ou(_v,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case bu.TIMEOUT:Ou(_v,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Uu(zu.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:var n=u.getStatus();if(Ou(_v,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(zu).indexOf(t)>=0?t:zu.UNKNOWN}(s.status);o(new Uu(c,s.message))}else o(new Uu(zu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Uu(zu.UNAVAILABLE,"Connection failed."));break;default:Fu()}}finally{Ou(_v,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Ou(_v,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=xv(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yu(),o=gu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Su({})),this.To(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Ou(_v,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Ev({io:function(t){f?Ou(_v,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Ou(_v,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Ou(_v,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ro:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Eu.EventType.OPEN,(function(){f||Ou(_v,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Eu.EventType.CLOSE,(function(){f||(f=!0,Ou(_v,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.fo())})),d(c,Eu.EventType.ERROR,(function(t){f||(f=!0,Lu(_v,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.fo(new Uu(zu.UNAVAILABLE,"The operation could not be completed")))})),d(c,Eu.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];ju(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Ou(_v,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Gf[e];if(void 0!==t)return eh(t)}(u),l=o.message;void 0===s&&(s=zu.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.fo(new Uu(s,l)),c.close()}else Ou(_v,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h._o(i)}})),d(o,wu.STAT_EVENT,(function(t){t.stat===xu.PROXY?Ou(_v,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===xu.NOPROXY&&Ou(_v,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.lo()}),0),h}}]),n}(function(){function e(t){y(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.wo=n+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return b(e,[{key:"yo",get:function(){return!1}},{key:"po",value:function(e,t,n,r,i){var a=xv(),o=this.Io(e,t);Ou("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.To(u,r,i),this.Eo(e,o,u,n).then((function(t){return Ou("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Lu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Ao",value:function(e,t,n,r,i,a){return this.po(e,t,n,r,i)}},{key:"To",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Du,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Io",value:function(e,t){var n=Sv[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}}]),e}());function Tv(){return"undefined"!=typeof window?window:null}function Cv(){return"undefined"!=typeof document?document:null}function Nv(e){return new wh(e,!0)}var Dv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;y(this,e),this.si=t,this.timerId=n,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}return b(e,[{key:"reset",value:function(){this.Vo=0}},{key:"Co",value:function(){this.Vo=this.bo}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,n-r);i>0&&Ou("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.So=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Do=Date.now(),e()})),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}},{key:"ko",value:function(){null!==this.So&&(this.So.skipDelay(),this.So=null)}},{key:"cancel",value:function(){null!==this.So&&(this.So.cancel(),this.So=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Vo}}]),e}(),Av=function(){function e(t,n,r,i,a,o,u,s){y(this,e),this.si=t,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new Dv(t,n)}return b(e,[{key:"qo",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Ko()}},{key:"stop",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.qo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Lo.reset()}},{key:"Qo",value:function(){var e=this;this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(function(){return e.jo()})))}},{key:"zo",value:function(e){this.Wo(),this.stream.send(e)}},{key:"jo",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"close",value:function(){var e=vt(dt().mark((function e(t,n){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():n&&n.code===zu.RESOURCE_EXHAUSTED?(Ru(n.toString()),Ru("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===zu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=p(t,2),i=r[0],a=r[1];e.$o===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new Uu(zu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Zo(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((function(){r((function(){return n.state=2,n.Bo=n.si.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener.oo()}))})),this.stream.co((function(e){r((function(){return n.Zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Ko",value:function(){var e=this;this.state=5,this.Lo.xo(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Zo",value:function(e){return Ou("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Yo",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.$o===e?n():(Ou("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Pv=function(e){w(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return b(n,[{key:"tu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.Lo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Fu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ju(void 0===t||"string"==typeof t),Ec.fromBase64String(t||"")):(ju(void 0===t||t instanceof Uint8Array),Ec.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?zu.UNKNOWN:eh(e.code);return new Uu(t,e.message||"")}(o);n=new dh(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Dh(e,s.document.name),l=Ih(s.document.updateTime),f=s.document.createTime?Ih(s.document.createTime):rs.min(),h=new tl({mapValue:{fields:s.document.fields}}),d=rl.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new fh(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Dh(e,m.document),g=m.readTime?Ih(m.readTime):rs.min(),b=rl.newNoDocument(y,g),k=m.removedTargetIds||[];n=new fh([],k,b.key,b)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Dh(e,w.document),S=w.removedTargetIds||[];n=new fh([],S,x,null)}else{if(!("filter"in t))return Fu();t.filter;var E=t.filter;E.targetId;var _=E.count,I=void 0===_?0:_,T=E.unchangedNames,C=new Jf(I,T),N=E.targetId;n=new hh(N,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rs.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?rs.min():t.readTime?Ih(t.readTime):rs.min()}(e);return this.listener.eu(t,n)}},{key:"nu",value:function(e){var t={};t.database=Oh(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Pl(r)?{documents:zh(e,r)}:{query:Uh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Eh(e,t.resumeToken);var i=xh(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(rs.min())>0){n.readTime=Sh(e,t.snapshotVersion.toTimestamp());var a=xh(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.zo(t)}},{key:"su",value:function(e){var t={};t.database=Oh(this.serializer),t.removeTarget=e,this.zo(t)}}]),n}(Av),Ov=function(e){w(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.iu=!1,s}return b(n,[{key:"ru",get:function(){return this.iu}},{key:"start",value:function(){this.iu=!1,this.lastStreamToken=void 0,tr(x(n.prototype),"start",this).call(this)}},{key:"Jo",value:function(){this.iu&&this.ou([])}},{key:"tu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(ju(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();var t=function(e,t){return e&&e.length>0?(ju(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Ih(e.updateTime):Ih(t);return n.isEqual(rs.min())&&(n=Ih(t)),new Af(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Ih(e.commitTime);return this.listener.uu(n,t)}return ju(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}},{key:"au",value:function(){var e={};e.database=Oh(this.serializer),this.zo(e)}},{key:"ou",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return jh(t.serializer,e)}))};this.zo(n)}}]),n}(Av),Rv=function(e){w(n,e);var t=_(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.hu=!1,o}return b(n,[{key:"lu",value:function(){if(this.hu)throw new Uu(zu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"po",value:function(e,t,n){var r=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=p(i,2),o=a[0],u=a[1];return r.connection.po(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Uu(zu.UNKNOWN,e.toString())}))}},{key:"Ao",value:function(e,t,n,r){var i=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=p(a,2),u=o[0],s=o[1];return i.connection.Ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Uu(zu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.hu=!0}}]),n}(function(){return b((function e(){y(this,e)}))}());var Lv=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}return b(e,[{key:"mu",value:function(){var e=this;0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.yu("Backend didn't respond within 10 seconds."),e.gu("Offline"),Promise.resolve()})))}},{key:"pu",value:function(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.gu("Offline")))}},{key:"set",value:function(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}},{key:"gu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"yu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.wu?(Ru(t),this.wu=!1):Ou("OnlineStateTracker",t)}},{key:"Iu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),Mv=b((function e(t,n,r,i,a){var o=this;y(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr((function(e){r.enqueueAndForget(vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Wv(o),!e.t0){e.next=5;break}return Ou("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vu(t)).Au.add(4),e.next=4,Vv(n);case 4:return n.Pu.set("Unknown"),n.Au.delete(4),e.next=8,Fv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Pu=new Lv(r,i)}));function Fv(e){return jv.apply(this,arguments)}function jv(){return jv=vt(dt().mark((function e(t){var n,r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Wv(t)){e.next=18;break}n=C(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),jv.apply(this,arguments)}function Vv(e){return zv.apply(this,arguments)}function zv(){return zv=vt(dt().mark((function e(t){var n,r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),zv.apply(this,arguments)}function Uv(e,t){var n=Vu(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),Qv(n)?Gv(n):xm(n).Uo()&&qv(n,t))}function Bv(e,t){var n=Vu(e),r=xm(n);n.Eu.delete(t),r.Uo()&&Kv(n,t),0===n.Eu.size&&(r.Uo()?r.Qo():Wv(n)&&n.Pu.set("Unknown"))}function qv(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rs.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xm(e).nu(t)}function Kv(e,t){e.bu.Lt(t),xm(e).su(t)}function Gv(e){e.bu=new vh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},he:function(t){return e.Eu.get(t)||null},oe:function(){return e.datastore.serializer.databaseId}}),xm(e).start(),e.Pu.mu()}function Qv(e){return Wv(e)&&!xm(e).qo()&&e.Eu.size>0}function Wv(e){return 0===Vu(e).Au.size}function Hv(e){e.bu=void 0}function Xv(e){return $v.apply(this,arguments)}function $v(){return $v=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Eu.forEach((function(e,n){qv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Yv(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=vt(dt().mark((function e(t,n){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Hv(t),Qv(t)?(t.Pu.pu(n),Gv(t)):t.Pu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e,t,n){return em.apply(this,arguments)}function em(){return em=vt(dt().mark((function e(t,n,r){var i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Pu.set("Online"),!(n instanceof dh&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=vt(dt().mark((function e(t,n){var r,i,a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Eu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Eu.delete(o),t.bu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ou("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,tm(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof fh?t.bu.Wt(n):n instanceof hh?t.bu.ee(n):t.bu.Yt(n),r.isEqual(rs.min())){e.next=29;break}return e.prev=14,e.next=17,Hp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.bu.ue(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Eu.get(r);i&&e.Eu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Eu.get(t);if(r){e.Eu.set(t,r.withResumeToken(Ec.EMPTY_BYTE_STRING,r.snapshotVersion)),Kv(e,t);var i=new Jh(r.target,t,n,r.sequenceNumber);qv(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ou("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,tm(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),em.apply(this,arguments)}function tm(e,t,n){return nm.apply(this,arguments)}function nm(){return nm=vt(dt().mark((function e(t,n,r){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ts(n)){e.next=2;break}throw n;case 2:return t.Au.add(1),e.next=5,Vv(t);case 5:t.Pu.set("Offline"),r||(r=function(){return Hp(t.localStore)}),t.asyncQueue.enqueueRetryable(vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ou("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Au.delete(1),e.next=6,Fv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),nm.apply(this,arguments)}function rm(e,t){return t().catch((function(n){return tm(e,n,t)}))}function im(e){return am.apply(this,arguments)}function am(){return am=vt(dt().mark((function e(t){var n,r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Vu(t),r=Sm(n),i=n.Tu.length>0?n.Tu[n.Tu.length-1].batchId:-1;case 2:if(!om(n)){e.next=19;break}return e.prev=3,e.next=6,Yp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Tu.length&&r.Qo(),e.abrupt("break",19);case 10:i=a.batchId,um(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,tm(n,e.t0);case 17:e.next=2;break;case 19:sm(n)&&cm(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),am.apply(this,arguments)}function om(e){return Wv(e)&&e.Tu.length<10}function um(e,t){e.Tu.push(t);var n=Sm(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function sm(e){return Wv(e)&&!Sm(e).qo()&&e.Tu.length>0}function cm(e){Sm(e).start()}function lm(e){return fm.apply(this,arguments)}function fm(){return fm=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sm(t).au();case 1:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e){return dm.apply(this,arguments)}function dm(){return dm=vt(dt().mark((function e(t){var n,r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sm(t),r=C(t.Tu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.ou(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e,t,n){return vm.apply(this,arguments)}function vm(){return vm=vt(dt().mark((function e(t,n,r){var i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Tu.shift(),a=$f.from(i,n,r),e.next=3,rm(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,im(t);case 5:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function mm(e,t){return ym.apply(this,arguments)}function ym(){return ym=vt(dt().mark((function e(t,n){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Sm(t).ru,!e.t0){e.next=4;break}return e.next=4,function(){var e=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Zf(i=n.code)||i===zu.ABORTED){e.next=7;break}return r=t.Tu.shift(),Sm(t).Go(),e.next=5,rm(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,im(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:sm(t)&&cm(t);case 5:case"end":return e.stop()}}),e)}))),ym.apply(this,arguments)}function gm(e,t){return bm.apply(this,arguments)}function bm(){return bm=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Vu(t)).asyncQueue.verifyOperationInProgress(),Ou("RemoteStore","RemoteStore received new credentials"),i=Wv(r),r.Au.add(3),e.next=6,Vv(r);case 6:return i&&r.Pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Au.delete(3),e.next=12,Fv(r);case 12:case"end":return e.stop()}}),e)}))),bm.apply(this,arguments)}function km(e,t){return wm.apply(this,arguments)}function wm(){return wm=vt(dt().mark((function e(t,n){var r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vu(t),!n){e.next=7;break}return r.Au.delete(2),e.next=5,Fv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Au.add(2),e.next=12,Vv(r);case 12:r.Pu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function xm(e){return e.Vu||(e.Vu=function(e,t,n){var r=Vu(e);return r.lu(),new Pv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Xv.bind(null,e),co:Yv.bind(null,e),eu:Zv.bind(null,e)}),e.Ru.push(function(){var t=vt(dt().mark((function t(n){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Vu.Go(),Qv(e)?Gv(e):e.Pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Vu.stop();case 6:Hv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Vu}function Sm(e){return e.Su||(e.Su=function(e,t,n){var r=Vu(e);return r.lu(),new Ov(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:lm.bind(null,e),co:mm.bind(null,e),cu:hm.bind(null,e),uu:pm.bind(null,e)}),e.Ru.push(function(){var t=vt(dt().mark((function t(n){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Su.Go(),t.next=4,im(e);case 4:t.next=9;break;case 6:return t.next=8,e.Su.stop();case 8:e.Tu.length>0&&(Ou("RemoteStore","Stopping write stream with ".concat(e.Tu.length," pending writes")),e.Tu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}var Em=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return b(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Uu(zu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function _m(e,t){if(Ru("AsyncQueue","".concat(t,": ").concat(e)),Ts(e))return new Uu(zu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Im=function(){function e(t){y(this,e),this.comparator=t?function(e,n){return t(e,n)||ss.comparator(e.key,n.key)}:function(e,t){return ss.comparator(e.key,t.key)},this.keyedMap=af(),this.sortedSet=new mc(this.comparator)}return b(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Tm=function(){function e(){y(this,e),this.Du=new mc(ss.comparator)}return b(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):Fu():this.Du=this.Du.insert(t,e)}},{key:"Cu",value:function(){var e=[];return this.Du.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Cm=function(){function e(t,n,r,i,a,o,u,s,c){y(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return b(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,Im.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Nm=b((function e(){y(this,e),this.xu=void 0,this.listeners=[]})),Dm=b((function e(){y(this,e),this.queries=new ef((function(e){return Hl(e)}),Wl),this.onlineState="Unknown",this.Nu=new Set}));function Am(e,t){return Pm.apply(this,arguments)}function Pm(){return Pm=vt(dt().mark((function e(t,n){var r,i,a,o,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Nm),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.xu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=_m(e.t0,"Initialization of query '".concat(Xl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ku(r.onlineState),o.xu&&n.Mu(o.xu)&&Fm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Pm.apply(this,arguments)}function Om(e,t){return Rm.apply(this,arguments)}function Rm(){return Rm=vt(dt().mark((function e(t,n){var r,i,a,o,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Rm.apply(this,arguments)}function Lm(e,t){var n,r=Vu(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=C(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Mu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.xu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Fm(r)}function Mm(e,t,n){var r=Vu(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Fm(e){e.Nu.forEach((function(e){e.next()}))}var jm=function(){function e(t,n,r){y(this,e),this.query=t,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}return b(e,[{key:"Mu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Cm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),a=!0):this.Lu(e,this.onlineState)&&(this.qu(e),a=!0),this.Fu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"ku",value:function(e){this.onlineState=e;var t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}},{key:"Lu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Bu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qu",value:function(e){e=Cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}]),e}(),Vm=function(){function e(t,n){y(this,e),this.Ku=t,this.byteLength=n}return b(e,[{key:"Gu",value:function(){return"metadata"in this.Ku}}]),e}(),zm=function(){function e(t){y(this,e),this.serializer=t}return b(e,[{key:"ir",value:function(e){return Dh(this.serializer,e)}},{key:"rr",value:function(e){return e.metadata.exists?Mh(this.serializer,e.document,!1):rl.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}},{key:"ur",value:function(e){return Ih(e)}}]),e}(),Um=function(){function e(t,n,r){y(this,e),this.Qu=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Bm(t)}return b(e,[{key:"ju",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;var n=as.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"zu",value:function(e){var t,n=new Map,r=new zm(this.serializer),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.ir(a.metadata.name),s=C(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||hf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=vt(dt().mark((function e(){var t,n,r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,av(this.localStore,new zm(this.serializer),this.documents,this.Qu.id);case 2:t=e.sent,n=this.zu(this.documents),r=C(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,uv(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var qm=b((function e(t){y(this,e),this.key=t})),Km=b((function e(t){y(this,e),this.key=t})),Gm=function(){function e(t,n){y(this,e),this.query=t,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=hf(),this.mutatedKeys=hf(),this.Zu=Jl(t),this.tc=new Im(this.Zu)}return b(e,[{key:"ec",get:function(){return this.Ju}},{key:"nc",value:function(e,t){var n=this,r=t?t.sc:new Tm,i=t?t.tc:this.tc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=$l(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ic(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Zu(f,s)>0||c&&n.Zu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{tc:o,sc:r,ji:u,mutatedKeys:a}}},{key:"ic",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;var a=e.sc.Cu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fu()}};return n(e)-n(t)}(e.type,t.type)||r.Zu(e.doc,t.doc)})),this.rc(n);var o=t?this.oc():[],u=0===this.Xu.size&&this.current?1:0,s=u!==this.Yu;return this.Yu=u,0!==a.length||s?{snapshot:new Cm(this.query,e.tc,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}},{key:"ku",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new Tm,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}},{key:"cc",value:function(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}},{key:"rc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ju=t.Ju.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ju=t.Ju.delete(e)})),this.current=e.current)}},{key:"oc",value:function(){var e=this;if(!this.current)return[];var t=this.Xu;this.Xu=hf(),this.tc.forEach((function(t){e.cc(t.key)&&(e.Xu=e.Xu.add(t.key))}));var n=[];return t.forEach((function(t){e.Xu.has(t)||n.push(new Km(t))})),this.Xu.forEach((function(e){t.has(e)||n.push(new qm(e))})),n}},{key:"ac",value:function(e){this.Ju=e.sr,this.Xu=hf();var t=this.nc(e.documents);return this.applyChanges(t,!0)}},{key:"hc",value:function(){return Cm.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}]),e}(),Qm=b((function e(t,n,r){y(this,e),this.query=t,this.targetId=n,this.view=r})),Wm=b((function e(t){y(this,e),this.key=t,this.lc=!1})),Hm=function(){function e(t,n,r,i,a,o){y(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new ef((function(e){return Hl(e)}),Wl),this._c=new Map,this.wc=new Set,this.mc=new mc(ss.comparator),this.gc=new Map,this.yc=new _p,this.Ic={},this.Tc=new Map,this.Ec=ep.kn(),this.onlineState="Unknown",this.Ac=void 0}return b(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ac}}]),e}();function Xm(e,t){return $m.apply(this,arguments)}function $m(){return $m=vt(dt().mark((function e(t,n){var r,i,a,o,u,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=By(t),!(o=r.dc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.hc(),e.next=15;break;case 6:return e.next=8,Jp(r.localStore,Kl(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Ym(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&Uv(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}function Ym(e,t,n,r,i){return Jm.apply(this,arguments)}function Jm(){return Jm=vt(dt().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=vt(dt().mark((function e(t,n,r,i){var a,o,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.nc(r),e.t0=a.ji,!e.t0){e.next=6;break}return e.next=5,tv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.nc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(gy(t,n.targetId,u.uc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,tv(t.localStore,n,!0);case 3:return o=e.sent,u=new Gm(n,o.sr),s=u.nc(o.documents),c=lh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),gy(t,r,l.uc),f=new Qm(n,r,u),e.abrupt("return",(t.dc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Jm.apply(this,arguments)}function Zm(e,t){return ey.apply(this,arguments)}function ey(){return ey=vt(dt().mark((function e(t,n){var r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Vu(t),i=r.dc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Wl(e,n)}))),void r.dc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Zp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Bv(r.remoteStore,i.targetId),my(r,i.targetId)})).catch(ks);case 9:e.next=14;break;case 11:return my(r,i.targetId),e.next=14,Zp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e,t,n){return ny.apply(this,arguments)}function ny(){return ny=vt(dt().mark((function e(t,n,r){var i,a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Vu(e),a=ns.now(),o=t.reduce((function(e,t){return e.add(t.key)}),hf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=nf(),s=hf();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=C(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=jf(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Uf(c.key,l,nl(l.value.mapValue),Pf.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:of(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ic[e.currentUser.toKey()];r||(r=new mc(Zu)),r=r.insert(t,n),e.Ic[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,wy(i,a.changes);case 9:return e.next=11,im(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=_m(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ny.apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return iy=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),e.prev=1,e.next=4,Xp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.gc.get(t);n&&(ju(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.lc=!0:e.modifiedDocuments.size>0?ju(n.lc):e.removedDocuments.size>0&&(ju(n.lc),n.lc=!1))})),e.next=8,wy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ks(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),iy.apply(this,arguments)}function ay(e,t,n){var r=Vu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.dc.forEach((function(e,n){var r=n.view.ku(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Vu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ku(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Fm(n)}(r.eventManager,t),i.length&&r.fc.eu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function oy(e,t,n){return uy.apply(this,arguments)}function uy(){return uy=vt(dt().mark((function e(t,n,r){var i,a,o,u,s,c;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Vu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.gc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new mc(ss.comparator)).insert(o,rl.newNoDocument(o,rs.min())),s=hf().add(o),c=new ch(rs.min(),new Map,new mc(Zu),u,s),e.next=9,ry(i,c);case 9:i.mc=i.mc.remove(o),i.gc.delete(n),ky(i),e.next=16;break;case 14:return e.next=16,Zp(i.localStore,n,!1).then((function(){return my(i,n,r)})).catch(ks);case 16:case"end":return e.stop()}}),e)}))),uy.apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=vt(dt().mark((function e(t,n){var r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),i=n.batch.batchId,e.prev=1,e.next=4,Wp(r.localStore,n);case 4:return a=e.sent,vy(r,i,null),py(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,wy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ks(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),cy.apply(this,arguments)}function ly(e,t,n){return fy.apply(this,arguments)}function fy(){return fy=vt(dt().mark((function e(t,n,r){var i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vu(t),e.prev=1,e.next=4,function(e,t){var n=Vu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ju(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,vy(i,n,r),py(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,wy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ks(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),fy.apply(this,arguments)}function hy(e,t){return dy.apply(this,arguments)}function dy(){return dy=vt(dt().mark((function e(t,n){var r,i,a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wv((r=Vu(t)).remoteStore)||Ou("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Vu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Tc.get(i)||[]).push(n),r.Tc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=_m(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),dy.apply(this,arguments)}function py(e,t){(e.Tc.get(t)||[]).forEach((function(e){e.resolve()})),e.Tc.delete(t)}function vy(e,t,n){var r=Vu(e),i=r.Ic[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ic[r.currentUser.toKey()]=i}}function my(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.dc.delete(a),n&&e.fc.vc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((function(t){e.yc.containsKey(t)||yy(e,t)}))}function yy(e,t){e.wc.delete(t.path.canonicalString());var n=e.mc.get(t);null!==n&&(Bv(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),ky(e))}function gy(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof qm?(e.yc.addReference(a.key,t),by(e,a)):a instanceof Km?(Ou("SyncEngine","Document no longer in limbo: "+a.key),e.yc.removeReference(a.key,t),e.yc.containsKey(a.key)||yy(e,a.key)):Fu()}}catch(o){i.e(o)}finally{i.f()}}function by(e,t){var n=t.key,r=n.path.canonicalString();e.mc.get(n)||e.wc.has(r)||(Ou("SyncEngine","New document in limbo: "+n),e.wc.add(r),ky(e))}function ky(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){var t=e.wc.values().next().value;e.wc.delete(t);var n=new ss(as.fromString(t)),r=e.Ec.next();e.gc.set(r,new Wm(n)),e.mc=e.mc.insert(n,r),Uv(e.remoteStore,new Jh(Kl(jl(n.path)),r,"TargetPurposeLimboResolution",Rs.ct))}}function wy(e,t,n){return xy.apply(this,arguments)}function xy(){return xy=vt(dt().mark((function e(t,n,r){var i,a,o,u;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Vu(t),a=[],o=[],u=[],e.t0=i.dc.isEmpty(),e.t0){e.next=9;break}return i.dc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Up.Bi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fc.eu(a),e.next=9,function(){var e=vt(dt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return xs.forEach(n,(function(t){return xs.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return xs.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ts(e.t0)){e.next=10;break}throw e.t0;case 10:Ou("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Hi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Hi=r.Hi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}function Sy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Vu(t)).currentUser.isEqual(n)){e.next=11;break}return Ou("SyncEngine","User change. New user:",n.toKey()),e.next=5,Gp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Tc.forEach((function(e){e.forEach((function(e){e.reject(new Uu(zu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Tc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,wy(r,i.tr);case 11:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function _y(e,t){var n=Vu(e),r=n.gc.get(t);if(r&&r.lc)return hf().add(r.key);var i=hf(),a=n._c.get(t);if(!a)return i;var o,u=C(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.dc.get(s);i=i.unionWith(c.view.ec)}}catch(l){u.e(l)}finally{u.f()}return i}function Iy(e,t){return Ty.apply(this,arguments)}function Ty(){return Ty=vt(dt().mark((function e(t,n){var r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),e.next=3,tv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ac(i),e.abrupt("return",(r.isPrimaryClient&&gy(r,n.targetId,a.uc),a));case 6:case"end":return e.stop()}}),e)}))),Ty.apply(this,arguments)}function Cy(e,t){return Ny.apply(this,arguments)}function Ny(){return Ny=vt(dt().mark((function e(t,n){var r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),e.abrupt("return",rv(r.localStore,n).then((function(e){return wy(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Dy(e,t,n,r){return Ay.apply(this,arguments)}function Ay(){return Ay=vt(dt().mark((function e(t,n,r,i){var a,o;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vu(t),e.next=3,function(e,t){var n=Vu(e),r=Vu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):xs.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,im(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(vy(a,n,i||null),py(a,n),function(e,t){Vu(Vu(e).mutationQueue).Dn(t)}(a.localStore,n)):Fu();case 11:return e.next=13,wy(a,o);case 13:e.next=16;break;case 15:Ou("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Ay.apply(this,arguments)}function Py(e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=vt(dt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(By(r=Vu(t)),qy(r),!0!==n||!0===r.Ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ry(r,i.toArray());case 5:return a=e.sent,r.Ac=!0,e.next=9,km(r.remoteStore,!0);case 9:o=C(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Uv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ac){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return my(r,t),Zp(r.localStore,t,!0)})),Bv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Ry(r,c);case 21:return function(e){var t=Vu(e);t.gc.forEach((function(e,n){Bv(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new mc(ss.comparator)}(r),r.Ac=!1,e.next=25,km(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Oy.apply(this,arguments)}function Ry(e,t,n){return Ly.apply(this,arguments)}function Ly(){return Ly=vt(dt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Vu(t),a=[],o=[],u=C(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,Jp(i.localStore,Kl(f[0]));case 11:l=e.sent,h=C(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.dc.get(p),e.next=20,Iy(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,nv(i.localStore,c);case 36:return y=e.sent,e.next=39,Jp(i.localStore,y);case 39:return l=e.sent,e.next=42,Ym(i,My(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fc.eu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Ly.apply(this,arguments)}function My(e){return Fl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Fy(e){var t=Vu(e);return Vu(Vu(t.localStore).persistence).Mi()}function jy(e,t,n,r){return Vy.apply(this,arguments)}function Vy(){return Vy=vt(dt().mark((function e(t,n,r,i){var a,o,u,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Vu(t)).Ac){e.next=3;break}return e.abrupt("return",void Ou("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,rv(a.localStore,Yl(o[0]));case 10:return u=e.sent,s=ch.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Ec.EMPTY_BYTE_STRING),e.next=14,wy(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Zp(a.localStore,n,!0);case 17:return my(a,n,i),e.abrupt("break",20);case 19:Fu();case 20:case"end":return e.stop()}}),e)}))),Vy.apply(this,arguments)}function zy(e,t,n){return Uy.apply(this,arguments)}function Uy(){return Uy=vt(dt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=By(t)).Ac){e.next=45;break}a=C(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return Ou("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,nv(i.localStore,u);case 12:return s=e.sent,e.next=15,Jp(i.localStore,s);case 15:return c=e.sent,e.next=18,Ym(i,My(s),c.targetId,!1,c.resumeToken);case 18:Uv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=C(r),e.prev=30,h=dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Zp(i.localStore,t,!1).then((function(){Bv(i.remoteStore,t),my(i,t)})).catch(ks);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Uy.apply(this,arguments)}function By(e){var t=Vu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ry.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_y.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oy.bind(null,t),t.fc.eu=Lm.bind(null,t.eventManager),t.fc.vc=Mm.bind(null,t.eventManager),t}function qy(e){var t=Vu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ly.bind(null,t),t}function Ky(e,t,n){var r=Vu(e);(function(){var e=vt(dt().mark((function e(t,n,r){var i,a,o,u,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Vu(e),r=Ih(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ls.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Bm(i)),a=new Um(i,t.localStore,n.serializer),e.next=15,n.Pc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ju(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Pc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,wy(t,s.Hu,void 0);case 31:return e.next=33,function(e,t){var n=Vu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ls.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Wu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Lu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Gy=function(){function e(){y(this,e),this.synchronizeTabs=!1}return b(e,[{key:"initialize",value:function(){var e=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=Nv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Kp(this.persistence,new Bp,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Ap(Op.js,this.serializer)}},{key:"createSharedClientState",value:function(e){return new gv}},{key:"terminate",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Qy=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).bc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return b(n,[{key:"initialize",value:function(){var e=vt(dt().mark((function e(t){var r=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(x(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.bc.initialize(this,t);case 4:return e.next=6,qy(this.bc.syncEngine);case 6:return e.next=8,im(this.bc.remoteStore);case 8:return e.next=10,this.persistence.pi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Kp(this.persistence,new Bp,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new up(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Os(t,this.persistence);return new Ps(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Qd.withCacheSize(this.cacheSizeBytes):Qd.DEFAULT;return new Fp(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tv(),Cv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new gv}}]),n}(Gy),Wy=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r,!1)).bc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return b(n,[{key:"initialize",value:function(){var e=vt(dt().mark((function e(t){var r,i=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tr(x(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.bc.syncEngine,e.t0=this.sharedClientState instanceof yv,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Qr:Dy.bind(null,r),jr:jy.bind(null,r),zr:zy.bind(null,r),Mi:Fy.bind(null,r),Gr:Cy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.pi(function(){var e=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Py(i.bc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=Tv();if(!yv.D(t))throw new Uu(zu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=zp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Qy),Hy=function(){function e(){y(this,e)}return b(e,[{key:"initialize",value:function(){var e=vt(dt().mark((function e(t,n){var r=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ay(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Sy.bind(null,this.syncEngine),e.next=12,km(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Dm}},{key:"createDatastore",value:function(e){var t,n=Nv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Iv(t));return function(e,t,n,r){return new Rv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ay(o.syncEngine,e,0)},a=kv.D()?new kv:new bv,new Mv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Hm(e,t,n,r,i,a);return o&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vu(t),Ou("RemoteStore","RemoteStore shutting down."),n.Au.add(5),e.next=5,Vv(n);case 5:n.vu.shutdown(),n.Pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Xy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return vt(dt().mark((function r(){var i;return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var $y=function(){function e(t){y(this,e),this.observer=t,this.muted=!1}return b(e,[{key:"next",value:function(e){this.observer.next&&this.Vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Vc(this.observer.error,e):Ru("Uncaught Error in snapshot listener:",e.toString())}},{key:"Sc",value:function(){this.muted=!0}},{key:"Vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Yy=function(){function e(t,n){var r=this;y(this,e),this.Dc=t,this.serializer=n,this.metadata=new Bu,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((function(e){e&&e.Gu()?r.metadata.resolve(e.Ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ku))))}),(function(e){return r.metadata.reject(e)}))}return b(e,[{key:"close",value:function(){return this.Dc.cancel()}},{key:"getMetadata",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pc",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){var e=vt(dt().mark((function e(){var t,n,r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Nc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Cc.decode(t),r=Number(n),isNaN(r)&&this.kc("length string (".concat(n,") is not valid number")),e.next=9,this.Mc(r);case 9:return i=e.sent,e.abrupt("return",new Vm(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Nc",value:function(){var e=vt(dt().mark((function e(){var t,n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.kc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mc",value:function(){var e=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.kc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Cc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kc",value:function(e){throw this.Dc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=vt(dt().mark((function e(){var t,n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Jy=function(){function e(t){y(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return b(e,[{key:"lookup",value:function(){var e=vt(dt().mark((function e(t){var n,r=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Uu(zu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=vt(dt().mark((function e(t,n){var r,i,a,o,u,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),i=Oh(r.serializer)+"/documents",a={documents:n.map((function(e){return Nh(r.serializer,e)}))},e.next=5,r.Ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Fh(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ju(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Wf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=vt(dt().mark((function e(){var t,n=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ss.fromPath(t);n.mutations.push(new Hf(r,n.precondition(r)))})),e.next=7,function(){var e=vt(dt().mark((function e(t,n){var r,i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vu(t),i=Oh(r.serializer)+"/documents",a={writes:n.map((function(e){return jh(r.serializer,e)}))},e.next=3,r.po("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Fu();t=rs.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Uu(zu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rs.min())?Pf.exists(!1):Pf.updateTime(t):Pf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rs.min()))throw new Uu(zu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pf.updateTime(t)}return Pf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Zy=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new Dv(this.asyncQueue,"transaction_retry")}return b(e,[{key:"run",value:function(){this.Fc-=1,this.Bc()}},{key:"Bc",value:function(){var e=this;this.Lo.xo(vt(dt().mark((function t(){var n,r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Jy(e.datastore),(r=e.Lc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.qc(t)}))}))})).catch((function(t){e.qc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Lc",value:function(e){try{var t=this.updateFunction(e);return!Ls(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"qc",value:function(e){var t=this;this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Bc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Uc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zf(t)}return!1}}]),e}(),eg=function(){function e(t,n,r,i){var a=this;y(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nu.UNAUTHENTICATED,this.clientId=Ju.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ou("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ou("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return b(e,[{key:"getConfiguration",value:function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Uu(zu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Bu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(vt(dt().mark((function n(){var r;return dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=_m(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function tg(e,t){return ng.apply(this,arguments)}function ng(){return ng=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ou("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Gp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e,t){return ig.apply(this,arguments)}function ig(){return ig=vt(dt().mark((function e(t,n){var r,i;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,og(t);case 3:return r=e.sent,Ou("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return gm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return gm(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ig.apply(this,arguments)}function ag(e){return"FirebaseError"===e.name?e.code===zu.FAILED_PRECONDITION||e.code===zu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function og(e){return ug.apply(this,arguments)}function ug(){return ug=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Ou("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,tg(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),ag(n=e.t0)){e.next=13;break}throw n;case 13:return Lu("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,tg(t,new Gy);case 16:e.next=21;break;case 18:return Ou("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,tg(t,new Gy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),ug.apply(this,arguments)}function sg(e){return cg.apply(this,arguments)}function cg(){return cg=vt(dt().mark((function e(t){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Ou("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,rg(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Ou("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,rg(t,new Hy);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),cg.apply(this,arguments)}function lg(e){return og(e).then((function(e){return e.persistence}))}function fg(e){return og(e).then((function(e){return e.localStore}))}function hg(e){return sg(e).then((function(e){return e.remoteStore}))}function dg(e){return sg(e).then((function(e){return e.syncEngine}))}function pg(e){return sg(e).then((function(e){return e.datastore}))}function vg(e){return mg.apply(this,arguments)}function mg(){return mg=vt(dt().mark((function e(t){var n,r;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sg(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Xm.bind(null,n.syncEngine),r.onUnlisten=Zm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mg.apply(this,arguments)}function yg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function i(){return dt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $y({next:function(a){t.enqueueAndForget((function(){return Om(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Uu(zu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Uu(zu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new jm(jl(n.path),a,{includeMetadataChanges:!0,Uu:!0});return Am(e,o)},i.next=3,vg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function gg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function i(){return dt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $y({next:function(n){t.enqueueAndForget((function(){return Om(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Uu(zu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new jm(n,a,{includeMetadataChanges:!0,Uu:!0});return Am(e,o)},i.next=3,vg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var bg=new Map;function kg(e,t,n){if(!n)throw new Uu(zu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wg(e,t,n,r){if(!0===t&&!0===r)throw new Uu(zu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xg(e){if(!ss.isDocumentKey(e))throw new Uu(zu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sg(e){if(ss.isDocumentKey(e))throw new Uu(zu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Fu()}function _g(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Uu(zu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Eg(e);throw new Uu(zu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ig(e,t){if(t<=0)throw new Uu(zu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Tg=function(){function e(t){var n;if(y(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Uu(zu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Uu(zu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}wg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}return b(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Cg=function(){function e(t,n,r,i){y(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1}return b(e,[{key:"app",get:function(){if(!this._app)throw new Uu(zu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Uu(zu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ku;switch(e.type){case"firstParty":return new Hu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Uu(zu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=bg.get(e);t&&(Ou("ComponentProvider","Removing Datastore"),bg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Ng(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=_g(e,Cg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Lu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Nu.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[We(JSON.stringify({alg:"none",type:"JWT"})),We(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Uu(zu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nu(s)}e._authCredentials=new Gu(new qu(o,u))}}var Dg=function(){function e(t,n,r){y(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return b(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Pg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Ag=function(){function e(t,n,r){y(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return b(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Pg=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,jl(i)))._path=i,a.type="collection",a}return b(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Dg(this.firestore,null,new ss(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Ag);function Og(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ht(e),kg("collection","path",t),e instanceof Cg){var a=as.fromString.apply(as,[t].concat(r));return Sg(a),new Pg(e,null,a)}if(!(e instanceof Dg||e instanceof Pg))throw new Uu(zu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(as.fromString.apply(as,[t].concat(r)));return Sg(o),new Pg(e.firestore,null,o)}function Rg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ht(e),1===arguments.length&&(t=Ju.A()),kg("doc","path",t),e instanceof Cg){var a=as.fromString.apply(as,[t].concat(r));return xg(a),new Dg(e,null,new ss(a))}if(!(e instanceof Dg||e instanceof Pg))throw new Uu(zu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(as.fromString.apply(as,[t].concat(r)));return xg(o),new Dg(e.firestore,e instanceof Pg?e.converter:null,new ss(o))}function Lg(e,t){return e=ht(e),t=ht(t),(e instanceof Dg||e instanceof Pg)&&(t instanceof Dg||t instanceof Pg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Mg(e,t){return e=ht(e),t=ht(t),e instanceof Ag&&t instanceof Ag&&e.firestore===t.firestore&&Wl(e._query,t._query)&&e.converter===t.converter}var Fg=function(){function e(){var t=this;y(this,e),this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new Dv(this,"async_queue_retry"),this.Yc=function(){var e=Cv();e&&Ou("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Lo.ko()};var n=Cv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Yc)}return b(e,[{key:"isShuttingDown",get:function(){return this.Qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xc(),this.Zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;var t=Cv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xc(),this.Qc)return new Promise((function(){}));var n=new Bu;return this.Zc((function(){return t.Qc&&t.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Gc.push(e),t.ta()}))}},{key:"ta",value:function(){var e=vt(dt().mark((function e(){var t=this;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Gc.length){e.next=14;break}return e.prev=1,e.next=4,this.Gc[0]();case 4:this.Gc.shift(),this.Lo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ts(e.t0)){e.next=12;break}throw e.t0;case 12:Ou("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Gc.length>0&&this.Lo.xo((function(){return t.ta()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=this,n=this.Kc.then((function(){return t.Wc=!0,e().catch((function(e){t.zc=e,t.Wc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ru("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Wc=!1,e}))}));return this.Kc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);var i=Em.createAndSchedule(this,e,t,n,(function(e){return r.ea(e)}));return this.jc.push(i),i}},{key:"Xc",value:function(){this.zc&&Fu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"na",value:function(){var e=vt(dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Kc,e.next=3,t;case 3:if(t!==this.Kc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){var t,n=C(this.jc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ia",value:function(e){var t=this;return this.na().then((function(){t.jc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.jc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.na()}))}},{key:"ra",value:function(e){this.Jc.push(e)}},{key:"ea",value:function(e){var t=this.jc.indexOf(e);this.jc.splice(t,1)}}]),e}();function jg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=C(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Vg=function(){function e(){y(this,e),this._progressObserver={},this._taskCompletionResolver=new Bu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return b(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),zg=function(e){w(n,e);var t=_(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Fg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return b(n,[{key:"_terminate",value:function(){return this._firestoreClient||Bg(this),this._firestoreClient.terminate()}}]),n}(Cg);function Ug(e){return e._firestoreClient||Bg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Pc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new eg(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function qg(e,t,n){var r=new Bu;return e.asyncQueue.enqueue(vt(dt().mark((function i(){var a;return dt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,tg(e,n);case 3:return i.next=5,rg(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),ag(a=i.t0)){i.next=13;break}throw a;case 13:Lu("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Kg(e){return function(e){return e.asyncQueue.enqueue(vt(dt().mark((function t(){var n,r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lg(e);case 2:return n=t.sent,t.next=5,hg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Vu(e);return t.Au.delete(0),Fv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ug(e=_g(e,zg)))}function Gg(e){return function(e){return e.asyncQueue.enqueue(vt(dt().mark((function t(){var n,r;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lg(e);case 2:return n=t.sent,t.next=5,hg(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Vu(t)).Au.add(0),e.next=4,Vv(n);case 4:n.Pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ug(e=_g(e,zg)))}function Qg(e,t){var n=Ug(e=_g(e,zg)),r=new Vg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Yy(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xy(e,t);if(e instanceof ArrayBuffer)return Xy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?rh().encode(e):e),t)}(n,Nv(t));e.asyncQueue.enqueueAndForget(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ky,t.next=3,dg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Wg(e,t){return function(e,t){return e.asyncQueue.enqueue(vt(dt().mark((function n(){return dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Vu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ls.getNamedQuery(e,t)}))},n.next=3,fg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ug(e=_g(e,zg)),t).then((function(t){return t?new Ag(e,null,t.query):null}))}function Hg(e){if(e._initialized||e._terminated)throw new Uu(zu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Xg=function(){function e(t){y(this,e),this._byteString=t}return b(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Ec.fromBase64String(t))}catch(t){throw new Uu(zu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Ec.fromUint8Array(t))}}]),e}(),$g=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Uu(zu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(n)}return b(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Yg=b((function e(t){y(this,e),this._methodName=t})),Jg=function(){function e(t,n){if(y(this,e),!isFinite(t)||t<-90||t>90)throw new Uu(zu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Uu(zu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return b(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Zu(this._lat,e._lat)||Zu(this._long,e._long)}}]),e}(),Zg=/^__.*__$/,eb=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return b(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms):new zf(e,this.data,t,this.fieldTransforms)}}]),e}(),tb=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return b(e,[{key:"toMutation",value:function(e,t){return new Uf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function nb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fu()}}var rb=function(){function e(t,n,r,i,a,o){y(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return b(e,[{key:"path",get:function(){return this.settings.path}},{key:"ua",get:function(){return this.settings.ua}},{key:"ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"aa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.la(e),r}},{key:"fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.oa(),r}},{key:"da",value:function(e){return this.ca({path:void 0,ha:!0})}},{key:"_a",value:function(e){return Sb(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"oa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.la(this.path.get(e))}},{key:"la",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(nb(this.ua)&&Zg.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),ib=function(){function e(t,n,r){y(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Nv(t)}return b(e,[{key:"ga",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rb({ua:e,methodName:t,ma:n,path:us.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function ab(e){var t=e._freezeSettings(),n=Nv(e._databaseId);return new ib(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ob(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ga(a.merge||a.mergeFields?2:0,t,n,i);bb("Data must be an object, but it was:",o,r);var u,s,c=yb(r,o);if(a.merge)u=new xc(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=C(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=kb(t,l.value,n);if(!o.contains(d))throw new Uu(zu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Eb(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new xc(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new eb(new tl(c),u,s)}var ub=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ua)throw 1===e.ua?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Yg);function sb(e,t,n){return new rb({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var cb=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"_toFieldTransform",value:function(e){return new Df(e.path,new xf)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Yg),lb=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ya=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=sb(this,e,!0),n=this.ya.map((function(e){return mb(e,t)})),r=new Sf(n);return new Df(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yg),fb=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ya=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=sb(this,e,!0),n=this.ya.map((function(e){return mb(e,t)})),r=new _f(n);return new Df(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yg),hb=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).pa=r,i}return b(n,[{key:"_toFieldTransform",value:function(e){var t=new Tf(e.serializer,yf(e.serializer,this.pa));return new Df(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Yg);function db(e,t,n,r){var i=e.ga(1,t,n);bb("Data must be an object, but it was:",i,r);var a=[],o=tl.empty();pc(r,(function(e,r){var u=xb(t,e,n);r=ht(r);var s=i.fa(u);if(r instanceof ub)a.push(u);else{var c=mb(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new xc(a);return new tb(o,u,i.fieldTransforms)}function pb(e,t,n,r,i,a){var o=e.ga(1,t,n),u=[kb(t,r,n)],s=[i];if(a.length%2!=0)throw new Uu(zu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(kb(t,a[c])),s.push(a[c+1]);for(var l=[],f=tl.empty(),h=u.length-1;h>=0;--h)if(!Eb(l,u[h])){var d=u[h],p=s[h];p=ht(p);var v=o.fa(d);if(p instanceof ub)l.push(d);else{var m=mb(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new xc(l);return new tb(f,y,o.fieldTransforms)}function vb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mb(n,e.ga(r?4:3,t))}function mb(e,t){if(gb(e=ht(e)))return bb("Unsupported field value:",t,e),yb(e,t);if(e instanceof Yg)return function(e,t){if(!nb(t.ua))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=mb(n.value,t.da(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ht(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ns.fromDate(e);return{timestampValue:Sh(t.serializer,n)}}if(e instanceof ns){var r=new ns(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sh(t.serializer,r)}}if(e instanceof Jg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Xg)return{bytesValue:Eh(t.serializer,e._byteString)};if(e instanceof Dg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Th(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Eg(e)))}(e,t)}function yb(e,t){var n={};return vc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pc(e,(function(e,r){var i=mb(r,t.aa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ns||e instanceof Jg||e instanceof Xg||e instanceof Dg||e instanceof Yg)}function bb(e,t,n){if(!gb(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Eg(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function kb(e,t,n){if((t=ht(t))instanceof $g)return t._internalPath;if("string"==typeof t)return xb(e,t);throw Sb("Field path arguments must be of type string or ",e,!1,void 0,n)}var wb=new RegExp("[~\\*/\\[\\]]");function xb(e,t,n){if(t.search(wb)>=0)throw Sb("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I($g,m(t.split(".")))._internalPath}catch(r){throw Sb("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sb(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Uu(zu.INVALID_ARGUMENT,u+e+s)}function Eb(e,t){return e.some((function(e){return e.isEqual(t)}))}var _b=function(){function e(t,n,r,i,a){y(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return b(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Dg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Ib(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Tb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Ib=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(){return tr(x(n.prototype),"data",this).call(this)}}]),n}(_b);function Tb(e,t){return"string"==typeof t?xb(e,t):t instanceof $g?t._internalPath:t._delegate._internalPath}function Cb(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Uu(zu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nb=b((function e(){y(this,e)})),Db=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n)}(Nb);function Ab(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof Nb&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Ob})).length,n=e.filter((function(e){return e instanceof Pb})).length;if(t>1||t>0&&n>0)throw new Uu(zu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=C(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Pb=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return b(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Gb(e._query,t),new Ag(e.firestore,e.converter,Gl(e._query,t))}},{key:"_parse",value:function(e){var t=ab(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Uu(zu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Kb(o,a);var s,c=[],l=C(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(qb(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=qb(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Kb(o,a),u=vb(n,"where",o,"in"===a||"not-in"===a);return ll.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Db);var Ob=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return b(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=C(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Gb(r,a),r=Gl(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Ag(e.firestore,e.converter,Gl(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Nb);var Rb=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return b(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ul(t,n);return function(e,t){if(null===zl(e)){var n=Ul(e);null!==n&&Qb(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Ag(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ml(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Db);var Lb=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return b(n,[{key:"_apply",value:function(e){return new Ag(e.firestore,e.converter,Ql(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Db);var Mb=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return b(n,[{key:"_apply",value:function(e){var t=Bb(e,this.type,this._docOrFields,this._inclusive);return new Ag(e.firestore,e.converter,function(e,t){return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Db);function Fb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mb._create("startAt",t,!0)}function jb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mb._create("startAfter",t,!1)}var Vb=function(e){w(n,e);var t=_(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return b(n,[{key:"_apply",value:function(e){var t=Bb(e,this.type,this._docOrFields,this._inclusive);return new Ag(e.firestore,e.converter,function(e,t){return new Ml(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Db);function zb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vb._create("endBefore",t,!1)}function Ub(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vb._create("endAt",t,!0)}function Bb(e,t,n,r){if(n[0]=ht(n[0]),n[0]instanceof _b)return function(e,t,n,r,i){if(!r)throw new Uu(zu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=C(ql(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(qc(t,r.key));else{var c=r.data.field(s.field);if(Nc(c))throw new Uu(zu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new il(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=ab(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Uu(zu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Bl(e)&&-1!==c.indexOf("/"))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(as.fromString(c));if(!ss.isDocumentKey(l))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ss(l);u.push(qc(t,f))}else{var h=vb(n,r,c);u.push(h)}}return new il(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function qb(e,t,n){if("string"==typeof(n=ht(n))){if(""===n)throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bl(t)&&-1!==n.indexOf("/"))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(as.fromString(n));if(!ss.isDocumentKey(r))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qc(e,new ss(r))}if(n instanceof Dg)return qc(e,n._key);throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Eg(n),"."))}function Kb(e,t){if(!Array.isArray(e)||0===e.length)throw new Uu(zu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Gb(e,t){if(t.isInequality()){var n=Ul(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=zl(e);null!==i&&Qb(e,r,i)}var a=function(e,t){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var i,a=C(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Uu(zu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Uu(zu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Qb(e,t,n){if(!n.isEqual(t))throw new Uu(zu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Wb=function(){function e(){y(this,e)}return b(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Fu()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return pc(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Jg(Tc(e.latitude),Tc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Dc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ic(e);return new ns(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=as.fromString(e);ju(Yh(n));var r=new Oc(n.get(1),n.get(3)),i=new ss(n.popFirst(5));return r.isEqual(t)||Ru("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Hb(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Xb=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new Xg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dg(this.firestore,null,t)}}]),n}(Wb);var $b=function(){function e(t,n){y(this,e),this.hasPendingWrites=t,this.fromCache=n}return b(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Yb=function(e){w(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return b(n,[{key:"exists",value:function(){return tr(x(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Jb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Tb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(_b),Jb=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tr(x(n.prototype),"data",this).call(this,e)}}]),n}(Yb),Zb=function(){function e(t,n,r,i){y(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new $b(i.hasPendingWrites,i.fromCache),this.query=r}return b(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Jb(n._firestore,n._userDataWriter,r.key,r,new $b(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Uu(zu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Jb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $b(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Jb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $b(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ek(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function ek(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fu()}}function tk(e,t){return e instanceof Yb&&t instanceof Yb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Zb&&t instanceof Zb&&e._firestore===t._firestore&&Mg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var nk=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new Xg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dg(this.firestore,null,t)}}]),n}(Wb);function rk(e){e=_g(e,Dg);var t=_g(e.firestore,zg),n=Ug(t),r=new nk(t);return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function r(){return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=vt(dt().mark((function e(t,n,r){var i,a;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Vu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Uu(zu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=_m(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Yb(t,r,e._key,n,new $b(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function ik(e){e=_g(e,Ag);var t=_g(e.firestore,zg),n=Ug(t),r=new nk(t);return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function r(){return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=vt(dt().mark((function e(t,n,r){var i,a,o,u,s;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tv(t,n,!0);case 3:i=e.sent,a=new Gm(n,i.sr),o=a.nc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=_m(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Zb(t,r,e,n)}))}function ak(e,t,n){e=_g(e,Dg);var r=_g(e.firestore,zg),i=Hb(e.converter,t,n);return ck(r,[ob(ab(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Pf.none())])}function ok(e,t,n){e=_g(e,Dg);for(var r=_g(e.firestore,zg),i=ab(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ck(r,[("string"==typeof(t=ht(t))||t instanceof $g?pb(i,"updateDoc",e._key,t,n,o):db(i,"updateDoc",e._key,t)).toMutation(e._key,Pf.exists(!0))])}function uk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ht(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||jg(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(jg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Dg)l=_g(e.firestore,zg),f=jl(e._key.path),c={next:function(t){n[s]&&n[s](lk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=_g(e,Ag);l=_g(p.firestore,zg),f=p._query;var v=new nk(l);c={next:function(e){n[s]&&n[s](new Zb(l,v,p,e))},error:n[s+1],complete:n[s+2]},Cb(e._query)}return function(e,t,n,r){var i=new $y(r),a=new jm(t,i,n);return e.asyncQueue.enqueueAndForget(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Am,t.next=3,vg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Sc(),e.asyncQueue.enqueueAndForget(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Om,t.next=3,vg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ug(l),f,h,c)}function sk(e,t){return function(e,t){var n=new $y(t);return e.asyncQueue.enqueueAndForget(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vu(e).Nu.add(t),t.next()},t.next=3,vg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Sc(),e.asyncQueue.enqueueAndForget(vt(dt().mark((function t(){return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Vu(e).Nu.delete(t)},t.next=3,vg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ug(e=_g(e,zg)),jg(t)?t:{next:t})}function ck(e,t){return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function r(){return dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ty,r.next=3,dg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ug(e),t)}function lk(e,t,n){var r=n.docs.get(t._key),i=new nk(e);return new Yb(e,i,t._key,r,new $b(n.hasPendingWrites,n.fromCache),t.converter)}var fk={maxAttempts:5},hk=function(){function e(t,n){y(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ab(t)}return b(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=dk(e,this._firestore),i=Hb(r.converter,t,n),a=ob(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Pf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ht(t))||t instanceof $g?pb(this._dataReader,"WriteBatch.update",i._key,t,n,o):db(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Pf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=dk(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(t._key,Pf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Uu(zu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function dk(e,t){if((e=ht(e)).firestore!==t)throw new Uu(zu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var pk=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r))._firestore=e,i}return b(n,[{key:"get",value:function(e){var t=this,r=dk(e,this._firestore),i=new nk(this._firestore);return tr(x(n.prototype),"get",this).call(this,e).then((function(e){return new Yb(t._firestore,i,r._key,e._document,new $b(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){y(this,e),this._firestore=t,this._transaction=n,this._dataReader=ab(t)}return b(e,[{key:"get",value:function(e){var t=this,n=dk(e,this._firestore),r=new Xb(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Fu();var i=e[0];if(i.isFoundDocument())return new _b(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new _b(t._firestore,r,n._key,null,n.converter);throw Fu()}))}},{key:"set",value:function(e,t,n){var r=dk(e,this._firestore),i=Hb(r.converter,t,n),a=ob(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=dk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ht(t))||t instanceof $g?pb(this._dataReader,"Transaction.update",i._key,t,n,o):db(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=dk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function vk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lb("arrayUnion",t)}function mk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fb("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Du=e}(fn),rn(new mt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new zg(new Qu(e.getProvider("auth-internal")),new $u(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Uu(zu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oc(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),yn(Cu,"3.11.0",e),yn(Cu,"3.11.0","esm2017")}();function yk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Uu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function gk(){if("undefined"===typeof Uint8Array)throw new Uu("unimplemented","Uint8Arrays are not available in this environment.")}function bk(){if("undefined"==typeof atob)throw new Uu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var kk=function(){function e(t){y(this,e),this._delegate=t}return b(e,[{key:"toBase64",value:function(){return bk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return gk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return bk(),new e(Xg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return gk(),new e(Xg.fromUint8Array(t))}}]),e}();function wk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var xk=function(){function e(){y(this,e)}return b(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Hg(e=_g(e,zg));var n=Ug(e);if(n._uninitializedComponentsProvider)throw new Uu(zu.FAILED_PRECONDITION,"SDK cache is already specified.");Lu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Hy;return qg(n,i,new Qy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Hg(e=_g(e,zg));var t=Ug(e);if(t._uninitializedComponentsProvider)throw new Uu(zu.FAILED_PRECONDITION,"SDK cache is already specified.");Lu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Hy;return qg(t,r,new Wy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Uu(zu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Bu;return e._queue.enqueueAndForgetEvenWhileRestricted(vt(dt().mark((function n(){return dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=vt(dt().mark((function e(t){var n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Es.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Es.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(zp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Sk=function(){function e(t,n,r){var i=this;y(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Oc||(this._appCompat=t)}return b(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Lu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ng(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Kg(this._delegate)}},{key:"disableNetwork",value:function(){return Gg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function n(){return dt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=hy,n.next=3,dg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ug(e=_g(e,zg)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return sk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Uu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Fk(this,Og(this._delegate,e))}catch(t){throw Nk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Ck(this,Rg(this._delegate,e))}catch(t){throw Nk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Rk(this,function(e,t){if(e=_g(e,Cg),kg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Uu(zu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ag(e,null,function(e){return new Ml(as.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Nk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=_g(e,zg);var r=Object.assign(Object.assign({},fk),n);return function(e){if(e.maxAttempts<1)throw new Uu(zu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Bu;return e.asyncQueue.enqueueAndForget(vt(dt().mark((function i(){var a;return dt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,pg(e);case 2:a=i.sent,new Zy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ug(e),(function(n){return t(new pk(e,n))}),r)}(this._delegate,(function(n){return e(new _k(t,n))}))}},{key:"batch",value:function(){var e=this;return Ug(this._delegate),new Ik(new hk(this._delegate,(function(t){return ck(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Qg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Wg(this._delegate,e).then((function(e){return e?new Rk(t,e):null}))}}]),e}(),Ek=function(e){w(n,e);var t=_(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return b(n,[{key:"convertBytes",value:function(e){return new kk(new Xg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Ck.forKey(t,this.firestore,null)}}]),n}(Wb);var _k=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Ek(t)}return b(e,[{key:"get",value:function(e){var t=this,n=jk(e);return this._delegate.get(n).then((function(e){return new Pk(t._firestore,new Yb(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=jk(e);return n?(yk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jk(e);return this._delegate.delete(t),this}}]),e}(),Ik=function(){function e(t){y(this,e),this._delegate=t}return b(e,[{key:"set",value:function(e,t,n){var r=jk(e);return n?(yk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=jk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=jk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Tk=function(){function e(t,n,r){y(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return b(e,[{key:"fromFirestore",value:function(e,t){var n=new Jb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ok(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Ek(t),n),i.set(n,a)),a}}]),e}();Tk.INSTANCES=new WeakMap;var Ck=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ek(t)}return b(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Fk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Fk(this.firestore,Og(this._delegate,e))}catch(t){throw Nk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ht(e))instanceof Dg&&Lg(this._delegate,e)}},{key:"set",value:function(e,t){t=yk("DocumentReference.set",t);try{return t?ak(this._delegate,e,t):ak(this._delegate,e)}catch(n){throw Nk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ok(this._delegate,e):ok.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Nk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return ck(_g(e.firestore,zg),[new Wf(e._key,Pf.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Dk(n),a=Ak(n,(function(t){return new Pk(e.firestore,new Yb(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_g(e,Dg);var t=_g(e.firestore,zg);return yg(Ug(t),e._key,{source:"server"}).then((function(n){return lk(t,e,n)}))}(this._delegate):function(e){e=_g(e,Dg);var t=_g(e.firestore,zg);return yg(Ug(t),e._key).then((function(n){return lk(t,e,n)}))}(this._delegate),t.then((function(e){return new Pk(n.firestore,new Yb(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Tk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Uu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Dg(n._delegate,r,new ss(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Dg(n._delegate,r,t))}}]),e}();function Nk(e,t,n){return e.message=e.message.replace(t,n),e}function Dk(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!wk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Ak(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=wk(e[0])?e[0]:wk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pk=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"ref",get:function(){return new Ck(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return tk(this._delegate,e._delegate)}}]),e}(),Ok=function(e){w(n,e);var t=_(n);function n(){return y(this,n),t.apply(this,arguments)}return b(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Fu()}(void 0!==t),t}}]),n}(Pk),Rk=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ek(t)}return b(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ab(this._delegate,function(e,t,n){var r=t,i=Tb("where",e);return Pb._create(i,r,n)}(t,n,r)))}catch(i){throw Nk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ab(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Tb("orderBy",e);return Rb._create(n,t)}(t,n)))}catch(r){throw Nk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ab(this._delegate,function(e){return Ig("limit",e),Lb._create("limit",e,"F")}(t)))}catch(n){throw Nk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ab(this._delegate,function(e){return Ig("limitToLast",e),Lb._create("limitToLast",e,"L")}(t)))}catch(n){throw Nk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Ab(this._delegate,Fb.apply(void 0,arguments)))}catch(t){throw Nk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ab(this._delegate,jb.apply(void 0,arguments)))}catch(t){throw Nk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ab(this._delegate,zb.apply(void 0,arguments)))}catch(t){throw Nk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ab(this._delegate,Ub.apply(void 0,arguments)))}catch(t){throw Nk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Mg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ik(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=_g(e,Ag);var t=_g(e.firestore,zg),n=Ug(t),r=new nk(t);return gg(n,e._query,{source:"server"}).then((function(n){return new Zb(t,r,e,n)}))}(this._delegate):function(e){e=_g(e,Ag);var t=_g(e.firestore,zg),n=Ug(t),r=new nk(t);return Cb(e._query),gg(n,e._query).then((function(n){return new Zb(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Mk(n.firestore,new Zb(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Dk(n),a=Ak(n,(function(t){return new Mk(e.firestore,new Zb(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Tk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Lk=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ok(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Mk=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return b(e,[{key:"query",get:function(){return new Rk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Ok(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Lk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Ok(n._firestore,r))}))}},{key:"isEqual",value:function(e){return tk(this._delegate,e._delegate)}}]),e}(),Fk=function(e){w(n,e);var t=_(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return b(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Ck(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Ck(this.firestore,void 0===e?Rg(this._delegate):Rg(this._delegate,e))}catch(t){throw Nk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=_g(e.firestore,zg),r=Rg(e),i=Hb(e.converter,t);return ck(n,[ob(ab(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Pf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Ck(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Lg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Tk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Rk);function jk(e){return _g(e,Dg)}var Vk,zk=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I($g,n)}return b(e,[{key:"isEqual",value:function(e){return(e=ht(e))instanceof $g&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(us.keyField().canonicalString())}}]),e}(),Uk=function(){function e(t){y(this,e),this._delegate=t}return b(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new cb("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ub("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=vk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=mk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new hb("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Bk={Firestore:Sk,GeoPoint:Jg,Timestamp:ns,Blob:kk,Transaction:_k,WriteBatch:Ik,DocumentReference:Ck,DocumentSnapshot:Pk,Query:Rk,QueryDocumentSnapshot:Ok,QuerySnapshot:Mk,CollectionReference:Fk,FieldPath:zk,FieldValue:Uk,setLogLevel:function(e){!function(e){Au.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new mt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Bk)))})(Vk=qn,(function(e,t){return new Sk(e,t,new xk)})),Vk.registerVersion("@firebase/firestore-compat","0.3.8");qn.initializeApp({apiKey:"AIzaSyAFQM-I8diz33JnGIusMlzj-1EubQP7DUM",authDomain:"hero2-21375.firebaseapp.com",projectId:"hero2-21375",storageBucket:"hero2-21375.appspot.com",messagingSenderId:"301818965449",appId:"1:301818965449:web:43128c99f13b9d046b8c18"});var qk=qn.firestore(),Kk=n(666),Gk=n.n(Kk),Qk=n(334),Wk=n.n(Qk),Hk=function(e){var t,n=Wk()({exactly:8,minLength:6,maxLength:10}).map((function(e){return{word:e,flip:!1,team:"Team 1",color:"bg-[#347bdc]",hover:[]}})),r=Wk()({exactly:8,minLength:6,maxLength:10}).map((function(e){return{word:e,flip:!1,team:"Team 2",color:"bg-[#e81111]",hover:[]}})),i=Wk()({exactly:8,minLength:6,maxLength:10}).map((function(e){return{word:e,flip:!1,team:"f",color:"bg-[#e4c3bd]",hover:[]}}));t=-1==e?{word:Wk()(),flip:!1,team:"x",color:"bg-[#1e293b]",hover:[]}:{word:Wk()(),flip:!1,team:"f",color:"bg-[#e4c3bd]",hover:[]};var a=[].concat(m(n),m(r),m(i),[t]).map((function(e,t){return c(c({},e),{},{index:t})}));return a.sort((function(){return.5-Math.random()})),a.sort((function(){return.5-Math.random()})),a.sort((function(){return.5-Math.random()})),a.sort((function(){return.5-Math.random()})),a.sort((function(){return.5-Math.random()})),a};function Xk(e){return(Xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $k(e,t,n,r){if(Xk(n)!==r)throw new TypeError("Invalid prop '".concat(t,"' of type '").concat(Xk(n),"' supplied to '").concat(e,"', expected '").concat(r,"'."))}var Yk="Waveform-module_container__kGWZq",Jk="Waveform-module_bar__5hNhf";function Zk(e){var t=e.size,n=void 0===t?40:t,i=e.color,a=void 0===i?"black":i,o=e.lineWeight,u=void 0===o?3.5:o,s=e.speed,c=void 0===s?1:s;return $k("Waveform","size",n,"number"),$k("Waveform","color",a,"string"),$k("Waveform","speed",c,"number"),$k("Waveform","lineWeight",u,"number"),r.createElement("div",{className:Yk,style:{"--uib-size":n+"px","--uib-color":a,"--uib-line-weight":u+"px","--uib-speed":c+"s"}},r.createElement("div",{className:Jk}),r.createElement("div",{className:Jk}),r.createElement("div",{className:Jk}),r.createElement("div",{className:Jk}))}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".Waveform-module_container__kGWZq{align-items:center;display:flex;height:calc(var(--uib-size)*.9);justify-content:space-between;width:var(--uib-size)}.Waveform-module_bar__5hNhf{background-color:var(--uib-color);height:100%;width:var(--uib-line-weight)}.Waveform-module_bar__5hNhf:first-child{animation:Waveform-module_grow__KV1Si var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.45) infinite}.Waveform-module_bar__5hNhf:nth-child(2){animation:Waveform-module_grow__KV1Si var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.3) infinite}.Waveform-module_bar__5hNhf:nth-child(3){animation:Waveform-module_grow__KV1Si var(--uib-speed) ease-in-out calc(var(--uib-speed)*-.15) infinite}.Waveform-module_bar__5hNhf:nth-child(4){animation:Waveform-module_grow__KV1Si var(--uib-speed) ease-in-out infinite}@keyframes Waveform-module_grow__KV1Si{0%,to{transform:scaleY(.3)}50%{transform:scaleY(1)}}");var ew=function(){return(0,Ue.jsx)("div",{className:"bg-[#082f49] fixed top-0 left-0 min-h-screen min-w-full flex items-center justify-center ",children:(0,Ue.jsx)(Zk,{size:100,lineWeight:3.5,speed:1,color:"white"})})};function tw(e){return Xn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.77 3.77L16 2 6 12l10 10 1.77-1.77L9.54 12z"}}]})(e)}var nw=function(){var e=(0,r.useContext)(ze),t=e.data,n=(e.setData,e.db),i=p((0,r.useState)(!1),2),a=i[0],o=i[1],u=p((0,r.useState)(!1),2),s=u[0],l=u[1],f=p((0,r.useState)(""),2),h=f[0],d=f[1],v=p((0,r.useState)(""),2),m=v[0],y=v[1],g=xe(),b=p((0,r.useState)({id:Gk()().split("-").at(0),name:"",team:"",spymaster:!1}),2),k=b[0],w=b[1],x=p((0,r.useState)(!1),2),S=x[0],E=x[1],_=function(){var e=vt(dt().mark((function e(){var t;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(20!=h.length||""!=k.name.trim()||1!=a){e.next=2;break}return e.abrupt("return");case 2:if(!(k.name.trim().length>0&&20==h.length)){e.next=8;break}return E(!0),e.next=6,n.collection("Rooms").doc(h).update({players:qn.firestore.FieldValue.arrayUnion(c(c({},k),{},{admin:!0}))});case 6:return g("/lobby/"+h+"-"+k.id),e.abrupt("return");case 8:return o(!0),d("generating room ID ... "),e.next=12,n.collection("Rooms").add({players:[],gameover:!1,cards:Hk(1),started:!1,timer:""});case 12:return t=e.sent,d(t.id),y("Click to copy"),E(!1),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=vt(dt().mark((function e(){return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.find((function(e){return e.id==h}))||!k.name.trim().length){e.next=7;break}return E(!0),e.next=4,n.collection("Rooms").doc(h).update({players:qn.firestore.FieldValue.arrayUnion(c(c({},k),{},{admin:!1}))});case 4:return E(!1),g("/lobby/"+h+"-"+k.id),e.abrupt("return");case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){o(!1),l(!1),d("")};return(0,Ue.jsxs)("div",{className:"min-h-screen flex flex-col gap-6 items-center justify-center ",children:[S&&(0,Ue.jsx)(ew,{}),(0,Ue.jsx)("p",{className:"text-7xl mb-10 top-20 ",children:"CodeNames"}),a&&(0,Ue.jsxs)("div",{className:"w-[350px] flex flex-col gap-6 ",children:[(0,Ue.jsx)("p",{onClick:a?function(){navigator.clipboard.writeText(h),y("Copied! Share with your friends"),console.log("ok")}:"",className:"w-full bg-transparent h-[30px] border-b-2 border-b-blue-300 text-blue-200 p-4 pb-8 outline-none  cursor-pointer text-center",children:h}),(0,Ue.jsx)("span",{className:"-mt-4 text-[12px]",children:m}),(0,Ue.jsx)("input",{placeholder:"username:",value:k.name,onChange:function(e){w(c(c({},k),{},{name:e.target.value}))},type:"text",name:"",id:"",className:"w-full bg-transparent h-[30px] border-b-2 border-b-blue-300 text-blue-200 p-4 outline-none text-center"})]}),s&&(0,Ue.jsxs)("div",{className:"w-[350px] flex flex-col gap-6 ",children:[(0,Ue.jsx)("input",{placeholder:"Room ID",value:h,onChange:function(e){!function(e){d(e.target.value);var n=t.find((function(t){return t.id==e.target.value}));if(20===e.target.value.length)return void 0!==n?void y("Valid room ID"):void y("Room id is not valid");y("room ID is only 20 length")}(e)},type:"text",className:"w-full bg-transparent h-[30px] border-b-2 border-b-blue-300 text-blue-200 p-4  outline-none  text-center "}),(0,Ue.jsx)("span",{className:"-mt-4 text-[12px]",children:m}),(0,Ue.jsx)("input",{placeholder:"username:",value:k.name,onChange:function(e){w(c(c({},k),{},{name:e.target.value}))},type:"text",name:"",id:"",className:"w-full bg-transparent h-[30px] border-b-2 border-b-blue-300 text-blue-200 p-4 outline-none text-center"})]}),(0,Ue.jsxs)("div",{className:"flex flex-col gap-4 mt-6",children:[!s&&(0,Ue.jsx)("button",{onClick:_,className:"w-[200px] h-[50px] text-[16px] border-2 text-center ".concat(k.name.length?"border-orange-500":"border-white"),children:k.name.length?"Access lobby":"Create Room"}),!a&&(0,Ue.jsx)("button",{onClick:s?I:function(){l(!0)},className:" w-[200px] h-[50px] text-[16px] border-2 text-center ".concat("Valid room ID"==m&&k.name.length?" border-orange-500":"border-white"),children:"Valid room ID"==m&&k.name.length?"Access lobby":"Join Room"}),a&&(0,Ue.jsx)("div",{onClick:T,className:" cursor-pointer flex justify-center items-center ",children:(0,Ue.jsx)(tw,{size:35,className:"p-1 rounded-[50%] bg-gray-200 text-black text-center"})}),s&&(0,Ue.jsx)("div",{onClick:T,className:" cursor-pointer flex justify-center items-center ",children:(0,Ue.jsx)(tw,{size:35,className:"p-1 rounded-[50%] bg-gray-200 text-black text-center"})})]})]})};n(180);var rw=function(e){var t,n=e.x,i=e.roomID,a=e.playerID,o=e.index,u=(0,r.useContext)(ze),s=u.data,l=(u.setData,u.db),f=null===s||void 0===s?void 0:s.find((function(e){return e.id==i})),h=null===f||void 0===f?void 0:f.players.find((function(e){return e.id==a}));return(0,Ue.jsxs)("div",{className:"w-full flex flex-col md:flex-row justify-between px-8 py-2 ".concat((o+1)%2===0?"border-t border-t-gray-400":""," "),children:[(0,Ue.jsxs)("p",{className:" w-[200px]",children:["Name : ",n.name]}),(0,Ue.jsxs)("div",{className:"flex gap-2 w-[200px]",children:[(0,Ue.jsx)("p",{className:"",children:"spymaster : "}),(0,Ue.jsx)("input",{className:" ".concat("Team 1"==n.team?"accent-blue-400":"accent-red-400"," "),type:"checkbox",checked:n.spymaster,onChange:function(e){!function(e,t){if(""!=h.team){var n=null===f||void 0===f?void 0:f.players.filter((function(e){return e.team==h.team&&1==e.spymaster&&h.id!==e.id}));n.length||l.collection("Rooms").doc(i).update({players:[].concat(m(null===f||void 0===f?void 0:f.players.filter((function(e){return e.id!==h.id}))),[c(c({},h),{},{spymaster:e.target.checked})])})}}(e)},disabled:""==n.team||(null===h||void 0===h?void 0:h.id)!==n.id||(null===f||void 0===f?void 0:f.players.filter((function(e){return 1==e.spymaster&&e.team==(null===h||void 0===h?void 0:h.team)})).length)>0&&(null===f||void 0===f||null===(t=f.players.find((function(e){return 1==e.spymaster&&e.team==(null===h||void 0===h?void 0:h.team)})))||void 0===t?void 0:t.id)!==(null===h||void 0===h?void 0:h.id)})]}),(0,Ue.jsxs)("div",{className:"flex gap-2 w-[200px]",children:[(0,Ue.jsx)("p",{className:"",children:"team : "}),a==n.id?(0,Ue.jsxs)("select",{name:"",id:"",className:" bg-transparent ",onChange:function(e){l.collection("Rooms").doc(i).update({players:[].concat(m(null===f||void 0===f?void 0:f.players.filter((function(e){return e.id!==h.id}))),[c(c({},h),{},{spymaster:!1,team:e.target.value})])})},children:[(0,Ue.jsx)("option",{value:"",className:"text-black",children:"select team"}),(0,Ue.jsx)("option",{value:"Team 1",className:"text-black",children:"blue team"}),(0,Ue.jsx)("option",{value:"Team 2",className:"text-black",children:"red team"})]}):(0,Ue.jsx)("p",{children:""==n.team?"Not selected":n.team})]})]},n.id)};var iw=function(){var e,t,n,i,a=(0,r.useContext)(ze),o=a.data,u=(a.setData,a.db),s=p((0,r.useState)(!1),2),c=s[0],l=s[1],f=ke().pathname.replace("/lobby/","").split("-"),h=f.at(0),d=f.at(-1),v=xe(),m=null===o||void 0===o?void 0:o.find((function(e){return e.id==h})),y=null===m||void 0===m?void 0:m.players.find((function(e){return e.id==d})),g=null===m||void 0===m||null===(e=m.players)||void 0===e?void 0:e.filter((function(e){return""==e.team})),b=null===m||void 0===m||null===(t=m.players)||void 0===t?void 0:t.filter((function(e){return"Team 1"==e.team})),k=null===m||void 0===m||null===(n=m.players)||void 0===n?void 0:n.filter((function(e){return"Team 2"==e.team}));(0,r.useEffect)((function(){1==(null===m||void 0===m?void 0:m.started)&&(l(!1),v("/game/"+h+"-"+d))}),[m]);var w=function(){var e=vt(dt().mark((function e(){var t,n;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),t=null===m||void 0===m?void 0:m.players.filter((function(e){return"Team 1"==e.team})),n=null===m||void 0===m?void 0:m.players.filter((function(e){return"Team 2"==e.team})),void 0!=t.find((function(e){return 1==e.spymaster}))&&void 0!=t.find((function(e){return 0==e.spymaster}))){e.next=5;break}return e.abrupt("return");case 5:if(void 0!=n.find((function(e){return 1==e.spymaster}))&&void 0!=n.find((function(e){return 0==e.spymaster}))){e.next=7;break}return e.abrupt("return");case 7:if(""!=(null===m||void 0===m?void 0:m.timer)){e.next=10;break}return e.next=10,u.collection("Rooms").doc(h).update({timer:"60"});case 10:return e.next=12,u.collection("Rooms").doc(h).update({started:!0,turn:y.team,guessing:!1,winner:""});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Ue.jsxs)("div",{className:" min-h-screen  max-w-7xl pt-6 px-6   gap-6 flex flex-col w-full mx-auto ",children:[c&&(0,Ue.jsx)(ew,{}),(0,Ue.jsxs)("div",{className:" flex gap-12  justify-between ",children:[(0,Ue.jsxs)("div",{className:"flex gap-4   p-2 items-center  justify-center text-[18px] font-normal ",children:[(0,Ue.jsx)("span",{children:"Welcome : "}),(0,Ue.jsx)("span",{children:null===y||void 0===y?void 0:y.name})]}),(0,Ue.jsxs)("div",{className:"flex gap-4   p-2 items-center  justify-center text-[18px] font-normal ",children:[(0,Ue.jsx)("span",{children:"Players : "}),(0,Ue.jsx)("span",{children:null===m||void 0===m?void 0:m.players.length})]}),(0,Ue.jsxs)("div",{className:"flex gap-4   p-2 items-center  justify-center text-[18px] font-normal ",children:[(0,Ue.jsx)("span",{children:"Admin : "}),(0,Ue.jsx)("span",{children:null===m||void 0===m||null===(i=m.players.find((function(e){return 1==e.admin})))||void 0===i?void 0:i.name})]}),(0,Ue.jsxs)("div",{className:"flex gap-4   p-2 items-center  justify-center text-[18px] font-normal ",children:[(0,Ue.jsx)("span",{children:"RoomID : "}),(0,Ue.jsx)("span",{children:h})]})]}),(0,Ue.jsxs)("div",{className:" flex gap-8 justify-between",children:[(0,Ue.jsxs)("div",{className:"",children:[(0,Ue.jsxs)("div",{className:" flex flex-col gap-0 bg-gradient-to-b from-gray-200/50 to-[#082f49]/50",children:[(0,Ue.jsx)("p",{className:"p-2 pb-2 border-b-2 ",children:"waiting list"}),null===g||void 0===g?void 0:g.map((function(e,t){return(0,Ue.jsx)(rw,{index:t,x:e,roomID:h,playerID:d},e.id)}))]}),(0,Ue.jsxs)("div",{className:" flex flex-col gap-0 bg-gradient-to-b from-blue-300/50 to-[#082f49]/50",children:[(0,Ue.jsx)("p",{className:"p-2 pb-2 border-b-2 border-b-blue-500",children:"blue team"}),null===b||void 0===b?void 0:b.map((function(e,t){return(0,Ue.jsx)(rw,{index:t,x:e,roomID:h,playerID:d},e.id)}))]}),(0,Ue.jsxs)("div",{className:" flex flex-col gap-0 bg-gradient-to-b from-red-300/50 to-[#082f49]/50",children:[(0,Ue.jsx)("p",{className:"p-2 pb-2 border-b-2 border-b-red-500",children:"red team"}),null===k||void 0===k?void 0:k.map((function(e,t){return(0,Ue.jsx)(rw,{index:t,x:e,roomID:h,playerID:d},e.id)}))]})]}),(0,Ue.jsxs)("div",{className:" min-w-[300px] my-auto flex flex-col gap-6   px-6 ",children:[(0,Ue.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Ue.jsx)("label",{htmlFor:"",children:"Hint time"}),(0,Ue.jsxs)("select",{value:null===m||void 0===m?void 0:m.timer,name:"",id:"",className:"bg-transparent border h-8 rounded text-center ",onChange:function(e){var t=e.target.value;u.collection("Rooms").doc(h).update({timer:t})},disabled:1!=(null===y||void 0===y?void 0:y.admin),title:"Only admin can change this input",children:[(0,Ue.jsx)("option",{className:"bg-[#082f49] text-white ",value:"60",children:"1 min"}),(0,Ue.jsx)("option",{className:"bg-[#082f49] text-white ",value:"90",children:"1.5 min"}),(0,Ue.jsx)("option",{className:"bg-[#082f49] text-white ",value:"120",children:"2 min"})]})]}),(0,Ue.jsxs)("div",{className:"flex gap-2",children:[(0,Ue.jsx)("input",{onChange:function(e){1==e.target.checked?u.collection("Rooms").doc(h).update({cards:Hk(-1),forbiddencard:!0}):u.collection("Rooms").doc(h).update({cards:Hk(1),forbiddencard:!1})},type:"checkbox",name:"",id:"",className:"",disabled:1!=(null===y||void 0===y?void 0:y.admin),title:"Only admin can change this input"}),(0,Ue.jsx)("label",{htmlFor:"",children:"Include forbidden card"})]}),(0,Ue.jsx)("input",{onClick:w,type:"button",className:"px-6 py-1 bg-green-500  cursor-pointer  rounded ",value:"Start Game",disabled:1!=(null===y||void 0===y?void 0:y.admin),title:"Only admin can change this input"})]})]})]})};function aw(e){return Xn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}var ow=function(){var e,t,n=ke().pathname.replace("/gameover/","").split("-"),i=n.shift(),a=n.join("-"),o=(0,r.useContext)(ze),u=o.data,s=(o.setData,o.db,u.find((function(e){return e.id==i}))),c=(null===(e=u.find((function(e){return e.id==i})))||void 0===e||null===(t=e.players)||void 0===t||t.find((function(e){return e.id==a})),xe());return(0,Ue.jsx)("div",{className:"min-h-screen flex   ",children:(0,Ue.jsxs)("div",{className:"w-[30%] mx-auto pt-12  items-center",children:[(0,Ue.jsxs)("div",{className:"flex gap-4 items-center justify-center ",children:[(0,Ue.jsx)("p",{className:"text-[25px] ",children:"Blue Team"}),(0,Ue.jsx)("p",{className:"text-[20px]",children:"vs"}),(0,Ue.jsx)("p",{className:"text-[25px] ",children:"Red Team"})]}),(0,Ue.jsxs)("p",{className:"text-[35px] text-center",children:[null===s||void 0===s?void 0:s.winner," ",(0,Ue.jsx)("span",{className:"text-orange-400",children:"Win !!"})]}),(0,Ue.jsxs)("div",{className:"p-6 flex gap-6 flex-col  ",children:[(0,Ue.jsxs)("p",{className:"px-4 py-2 bg-blue-500  rounded-lg text-center font-bold  ",children:["Blue Team : ",null===s||void 0===s?void 0:s.cards.filter((function(e){return 1==e.flip&&"Team 1"==e.team})).length," cards flipped"]}),(0,Ue.jsxs)("p",{className:"px-4 py-2 bg-red-500  rounded-lg  text-center font-bold ",children:["Red Team  : ",null===s||void 0===s?void 0:s.cards.filter((function(e){return 1==e.flip&&"Team 2"==e.team})).length," cards flipped"]}),(0,Ue.jsxs)("div",{onClick:function(){c("/")},className:"px-4 py-2 bg-green-500  rounded-lg  text-center font-bold flex flex-col items-center gap-2  cursor-pointer",children:[(0,Ue.jsx)("p",{children:"Play again"}),(0,Ue.jsx)(aw,{})]})]})]})})};var uw=function(){var e=p((0,r.useState)([]),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=qk.collection("Rooms").onSnapshot((function(e){var t=e.docs.map((function(e){return c({id:e.id},e.data())}));n(t)}));return function(){e()}}),[]),(0,Ue.jsx)("div",{className:"App bg-[#082f49] text-white  mx-auto ",children:(0,Ue.jsx)(ze.Provider,{value:{data:t,setData:n,db:qk},children:(0,Ue.jsxs)(Fe,{children:[(0,Ue.jsx)(Le,{path:"/",element:(0,Ue.jsx)(nw,{})}),(0,Ue.jsx)(Le,{path:"/lobby/:roomID",element:(0,Ue.jsx)(iw,{})}),(0,Ue.jsx)(Le,{path:"/game/:ID",element:(0,Ue.jsx)(er,{})}),(0,Ue.jsx)(Le,{path:"/gameover/:ID",element:(0,Ue.jsx)(ow,{})})]})})})};function sw(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),j((function(e,t){var n=F(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,u=n.hash;return L("",{pathname:i,search:o,hash:void 0===u?"":u},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:M(t))}),(function(e,t){O("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var u=o.current,s=p(r.useState({action:u.action,location:u.location}),2),c=s[0],l=s[1];return r.useLayoutEffect((function(){return u.listen(l)}),[u]),r.createElement(Me,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var cw,lw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(cw||(cw={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(lw||(lw={}));i.createRoot(document.getElementById("root")).render((0,Ue.jsx)(sw,{children:(0,Ue.jsx)(uw,{})}))}()}();
//# sourceMappingURL=main.4e438b9a.js.map